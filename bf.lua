local a, b = "bG9jYWwgS2V5R3VhcmRMaWJyYXJ5ID0gbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vY2RuLmtleWd1YXJkaWFuLm9yZy9saWJyYXJ5L3YxLjAuMC5sdWEiKSkoKQ0KbG9jYWwgdHJ1ZURhdGEgPSAiOTkxYTU0MzIyZjk2NDhmYTg3NGRlY2YxYzYwMDBmYWEiDQpsb2NhbCBmYWxzZURhdGEgPSAiZmY2YmEwNzNhNmMyNDJhZTkyMmVjN2YzZDFhMDFmNWQiDQoNCktleUd1YXJkTGlicmFyeS5TZXQoew0KICBwdWJsaWNUb2tlbiA9ICI1YTUyMDYyMGUwY2E0MWVjYjQyNDY3N2U4NjkzZDY5MiIsDQogIHByaXZhdGVUb2tlbiA9ICI3MzM5MjdlMTdmNzY0ZTJmYjY3NDhmMjc0MDBlNjc3ZCIsDQogIHRydWVEYXRhID0gdHJ1ZURhdGEsDQogIGZhbHNlRGF0YSA9IGZhbHNlRGF0YSwNCn0pDQoNCmxvY2FsIEZsdWVudCA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL2dpdGh1Yi5jb20vZGF3aWQtc2NyaXB0cy9GbHVlbnQvcmVsZWFzZXMvbGF0ZXN0L2Rvd25sb2FkL21haW4ubHVhIikpKCkNCmxvY2FsIGZpbGVuYW1lID0gInJhY2lzbWh1YnhEIg0KbG9jYWwgc3VjY2Vzcywgb2xkS2V5ID0gcGNhbGwoZnVuY3Rpb24oKQ0KICAgIGxvY2FsIGYgPSByZWFkZmlsZShmaWxlbmFtZSkNCiAgICBwcmludCgidHJ5aW5nIG9sZCBrZXkiKQ0KICAgIHJldHVybiBmDQplbmQpDQpsb2NhbCBrZXkgPSBzdWNjZXNzIGFuZCBvbGRLZXkgb3IgIiINCg0KbG9jYWwgV2luZG93ID0gRmx1ZW50OkNyZWF0ZVdpbmRvdyh7DQogICAgVGl0bGUgPSAiS2V5IFN5c3RlbSIsDQogICAgU3ViVGl0bGUgPSAiRnJ1aXRzIHNjcmlwdCIsDQogICAgVGFiV2lkdGggPSAxNjAsDQogICAgU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoNTgwLCAzNDApLA0KICAgIEFjcnlsaWMgPSBmYWxzZSwNCiAgICBUaGVtZSA9ICJEYXJrIiwNCiAgICBNaW5pbWl6ZUtleSA9IEVudW0uS2V5Q29kZS5MZWZ0Q29udHJvbA0KfSkNCg0KbG9jYWwgVGFicyA9IHsNCiAgICBLZXlTeXMgPSBXaW5kb3c6QWRkVGFiKHsgVGl0bGUgPSAiS2V5IFN5c3RlbSIsIEljb24gPSAia2V5IiB9KSwNCn0NCg0KbG9jYWwgRW50a2V5ID0gVGFicy5LZXlTeXM6QWRkSW5wdXQoIklucHV0Iiwgew0KICAgIFRpdGxlID0gIkVudGVyIEtleSIsDQogICAgRGVzY3JpcHRpb24gPSAiRW50ZXIgS2V5IEhlcmUiLA0KICAgIERlZmF1bHQgPSAiIiwNCiAgICBQbGFjZWhvbGRlciA9ICJFbnRlciBrZXnigKYiLA0KICAgIE51bWVyaWMgPSBmYWxzZSwNCiAgICBGaW5pc2hlZCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpDQogICAgICAgIGtleSA9IFZhbHVlDQogICAgZW5kDQp9KQ0KDQpsb2NhbCBjaGVjayA9IGZ1bmN0aW9uKCkNCiAgICBsb2NhbCByZXNwb25zZSA9IEtleUd1YXJkTGlicmFyeS52YWxpZGF0ZURlZmF1bHRLZXkoa2V5KQ0KICAgIGlmIHJlc3BvbnNlID09IHRydWVEYXRhIHRoZW4NCiAgICAgICBwcmludCgiS2V5IGlzIHZhbGlkIikNCiAgICAgICB3cml0ZWZpbGUoZmlsZW5hbWUsIGtleSkNCiAgICAgICBxdWV1ZV9vbl90ZWxlcG9ydCgnbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9hc3VrYTY5Njkvc2NyaXB0cy9yZWZzL2hlYWRzL21haW4vYmYubHVhIikpKCknKQ0KICAgICAgIGxvY2FsIExpYnJhcnkgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly95b3Uud2hpbXBlci54eXovc291cmNlcy9idHRlYW0vU3lzdGVtVUkubHVhIikpKCkgLS0gTElCUkFSWQ0KDQoNCmxvY2FsIFdpbmRvdyA9IExpYnJhcnk6Q3JlYXRlV2luZG93KCdCTEFDS1RSQVAnKSAtLSBDUkVBVEUgV0lORE9XDQoNCmxvY2FsIFRhYiA9IHsgLS0gQ1JFQVRFIFRBQlMNClRhYl8xID0gV2luZG93OmFkZFRhYignI0hvbWUnKSwNClRhYl9TZXR0aW5nID0gV2luZG93OmFkZFRhYignI1NldHRpbmdzJyksDQpUYWJfMiA9IFdpbmRvdzphZGRUYWIoJyNNYWluIEZhcm0nKSwNClRhYl9TdWJGYXJtID0gV2luZG93OmFkZFRhYignI1N1YnMgRmFybScpLA0KVGFiXzMgPSBXaW5kb3c6YWRkVGFiKCcjUXVlc3QnKSwNClRhYl9TZWEgPSBXaW5kb3c6YWRkVGFiKCcjU2VhIEV2ZW50JyksDQpUYWJfUmFjZVY0ID0gV2luZG93OmFkZFRhYignI1JhY2UgVjQnKSwNClRhYl80ID0gV2luZG93OmFkZFRhYignI1JhaWRzJyksDQpUYWJfQ29tYmF0ID0gV2luZG93OmFkZFRhYignI1BWUCcpLA0KVGFiXzUgPSBXaW5kb3c6YWRkVGFiKCcjVGVsZXBvcnQgJiBTdGF0dXMnKSwNClRhYl82ID0gV2luZG93OmFkZFRhYignI1Nob3AnKSwNClRhYl83ID0gV2luZG93OmFkZFRhYignI01pc2MnKQ0KDQp9DQoNCmxvY2FsIEhvbWVfTGVmdCA9IFRhYi5UYWJfMTphZGRTZWN0aW9uKCkgLS0gSE9NRSBMRUZUIFNFQ1RJT04NCmxvY2FsIENoYW5nZWxvZyA9IEhvbWVfTGVmdDphZGRNZW51KCIjQ2hhbmdlbG9nIikNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJ1tEZWNlbWJlciwgMjMgMjAyNF0nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBSZW1ha2luZyBTZWEgRXZlbnQnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBJbXByb3ZlIEFpbWJvdCBNYXN0ZXJ5IEZhcm0nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBBZGRlZCBEb2pvIFRyYWluZXIgUXVlc3QgKEJldGEpJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gQWRkZWQgQXV0byBDb2xsZWN0IEVtYmVyJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gRml4aW5nIEZhc3QgQXR0YWNrJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gRml4aW5nIHNvbWUgYnVnJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJycpDQoNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJ1tEZWNlbWJlciwgMTkgMjAyNF0nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCBBdXRvIFN0YXJ0IFJhaWQgKFRoaXJkIFdvcmxkKScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEZpeGVkIEF1dG8gTmV4dCBJc2xhbmQnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBSZWR1Y2UgTGFnIG9uIFJhaWQnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCBBaW1ib3QgTWFzdGVyeSBGYXJtJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gRml4ZWQgQ2hlc3QgRmFybScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEFkZGVkIEZhc3QgU2hvb3QgZm9yIEd1bicpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEltcHJvdmUgRmFzdCBBdHRhY2snKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnJykNCg0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnW0RlY2VtYmVyLCAxNiAyMDI0XScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEZpeGVkIExldmVsIEZhcm0gMjU1MCBhbmQgMjU3NScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEltcHJvdmUgRmFzdCBBdHRhY2snKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBJbXByb3ZlIEZhcm1pbmcnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJ1tEZWNlbWJlciwgMTYgMjAyNF0nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBVcGRhdGUgTGV2ZWwgdG8gMjYwMCcpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCcnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnW0FwcmlsLCAwNiAyMDI0XScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEFkZGVkIFdlYmhvb2sgTm90aWZpZXIgdG8gRGlzY29yZCcpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEFkZGVkIFN1YnMgRmFybWluZycpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEFkZGVkIE5ldyBNZXRob2QgTWFzdGVyeSBGYXJtJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gQWRkZWQgUGlyYXRlIFJhaWQgQ2FzdGxlJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gQWRkZWQgTWlyYWdlIElzbGFuZCBGZWF0dXJlJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gQWRkZWQgS2l0c3VuZSBJc2xhbmQgRmVhdHVyZScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEFkZGVkIFBWUCBGZWF0dXJlJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gQWRkZWQgRnJ1aXQgTm90aWZpZXIgKFNob3AtRGV2aWwgRnJ1aXQpJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gRml4ZWQgQXV0byBTdG9yZSBGcnVpdCcpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEZpeGVkIEFsbCBFU1AnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCBHdW4gTWFzdGVyeSBTa2lsbCcpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIENoYW5nZWQgc29tZSBmdW5jdGlvbi4nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJ1tEZWNlbWJlciwgMTkgMjAyM10nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBTZWEgRXZlbnQgTWVudSAoQmV0YSknKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCAxc3QgV29ybGQgRmFybSBMdiAzNzUgLSA1MjUnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCAybmQgV29ybGQgRmFybSBMdiAxMjUwIC0gMTM3NScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEZpeGVkIFJhaWQgQ2hpcCBCdXknKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBDaGFuZ2UgQnV0dG9uIHRvIFRvZ2dsZSBmb3IgQXV0byBSYWlkJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gRml4ZWQgQ2hlc3QgRmFybScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEZpeGVkIEF1dG8gRG91Z2ggS2luZycpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEZpeGVkIEF1dG8gQnV5IEZydWl0IG9uIFNob3AnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJ1tOb3ZlbWJlciwgMTEgMjAyM10nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCBBdXRvIEZhcm0gTGV2ZWwnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCBPYnNlcnZhdGlvbiBGYXJtJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJy0gRml4ZWQgRG91Z2ggS2luZyBGYXJtJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coJycpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCdbT2N0b2JlciwgMzAgMjAyMyAtIFVQREFURSAyMF0nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCBNb2JzIEluZGV4IEZhcm0nKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coIltPY3RvYmVyLCAyNSAyMDIzIC0gVVBEQVRFIDIwXSIpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEFkZGVkIFF1ZXN0IExpc3QnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGYXN0IEF0dGFjayBEZWZhdWx0IENoYW5nZWQnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBGaXhlZCBzb21lIG1pbm9yIGJ1Z3MnKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnJykNCkNoYW5nZWxvZzphZGRDaGFuZ2Vsb2coIltPY3RvYmVyLCAyMyAyMDIzIC0gVVBEQVRFIDIwXSIpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIENoYW5nZWQgVUknKQ0KQ2hhbmdlbG9nOmFkZENoYW5nZWxvZygnLSBOZXcgTGV2ZWwgRmFybScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEltcHJvdmUgRmFybScpDQpDaGFuZ2Vsb2c6YWRkQ2hhbmdlbG9nKCctIEZpeGVkIFNvbWUgYnVnIGlzc3VlZCcpDQoNCmxvY2FsIEhvbWVfUmlnaHQgPSBUYWIuVGFiXzE6YWRkU2VjdGlvbigpIC0tIEhPTUUgUklHSFQgU0VDVElPTg0KbG9jYWwgTWFpbl9Ib21lID0gSG9tZV9SaWdodDphZGRNZW51KCIjSG9tZSIpDQoNCmdldGdlbnYoKS5XYWxrU3BlZWRWYWx1ZSA9IDI2DQpNYWluX0hvbWU6YWRkVGV4dGJveCgiU3BlZWQgSGFjayIsIGdldGdlbnYoKS5XYWxrU3BlZWRWYWx1ZSwgZnVuY3Rpb24oc3BlZWRmdW5jKQ0KZ2V0Z2VudigpLldhbGtTcGVlZFZhbHVlID0gc3BlZWRmdW5jDQppZiBnZXRnZW52KCkuV2Fsa1NwZWVkVmFsdWUgdGhlbg0KICAgIGxvY2FsIFBsYXllciA9IGdhbWU6c2VydmljZSdQbGF5ZXJzJy5Mb2NhbFBsYXllcg0KICAgIFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsJ1dhbGtTcGVlZCc6Q29ubmVjdChmdW5jdGlvbigpDQogICAgICAgIFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gZ2V0Z2VudigpLldhbGtTcGVlZFZhbHVlDQogICAgZW5kKQ0KICAgIFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gZ2V0Z2VudigpLldhbGtTcGVlZFZhbHVlDQplbmQNCmVuZCkNCg0KZ2V0Z2VudigpLkp1bXBWYWx1ZSA9IDUwDQpNYWluX0hvbWU6YWRkVGV4dGJveCgiSnVtcCBIYWNrIiwgZ2V0Z2VudigpLkp1bXBWYWx1ZSwgZnVuY3Rpb24oanVtcGZ1bmMpDQpnZXRnZW52KCkuSnVtcFZhbHVlID0ganVtcGZ1bmMNCmlmIGdldGdlbnYoKS5KdW1wVmFsdWUgdGhlbg0KICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5KdW1wUG93ZXIgPSBnZXRnZW52KCkuSnVtcFZhbHVlDQplbmQNCmVuZCkNCg0KTWFpbl9Ib21lOmFkZFRvZ2dsZSgiSW5maW5pdGUgSnVtcCIsIEluZmluaXRlSnVtcEVuYWJsZWQsIGZ1bmN0aW9uKFZhbHVlKQ0KSW5maW5pdGVKdW1wRW5hYmxlZCA9IFZhbHVlDQppZiBJbmZpbml0ZUp1bXBFbmFibGVkIHRoZW4NCiAgICBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKS5KdW1wUmVxdWVzdDpjb25uZWN0KGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlIlBsYXllcnMiLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MnSHVtYW5vaWQnOkNoYW5nZVN0YXRlKCJKdW1waW5nIikNCiAgICBlbmQpDQplbmQNCmVuZCkNCg0KTWFpbl9Ib21lOmFkZFRvZ2dsZSgnTm8gQ2xpcCcsIGdldGdlbnYoKS5Ob0NsaXAsIGZ1bmN0aW9uKGNsaXBmKQ0KZ2V0Z2VudigpLk5vQ2xpcCA9IGNsaXBmDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQpwY2FsbChmdW5jdGlvbigpDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLk5vQ2xpcCB0aGVuDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdi5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQpDQplbmQpDQoNCmdldGdlbnYoKS5BbnRpQUZLID0gdHJ1ZQ0KTWFpbl9Ib21lOmFkZFRvZ2dsZSgiQW50aSBBRksiLCBnZXRnZW52KCkuQW50aUFGSywgZnVuY3Rpb24oVmFsdWUpDQpnZXRnZW52KCkuQW50aUFGSyA9IFZhbHVlDQplbmQpDQoNCnRhc2suc3Bhd24oZnVuY3Rpb24gKCkNCndoaWxlIHdhaXQoLjEpIGRvDQogICAgaWYgZ2V0Z2VudigpLkFudGlBRksgdGhlbg0KICAgICAgICBsb2NhbCB2dSA9IGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKQ0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5JZGxlZDpjb25uZWN0KGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHZ1OkJ1dHRvbjJEb3duKFZlY3RvcjIubmV3KDAsMCksd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lKQ0KICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgdnU6QnV0dG9uMlVwKFZlY3RvcjIubmV3KDAsMCksd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KZ2V0Z2VudigpLkFudGlLaWNrQ2xpZW50ID0gdHJ1ZQ0KTWFpbl9Ib21lOmFkZFRvZ2dsZSgiQW50aSBLaWNrIENsaWVudCIsIGdldGdlbnYoKS5BbnRpS2lja0NsaWVudCwgZnVuY3Rpb24oVmFsdWUpDQpnZXRnZW52KCkuQW50aUtpY2tDbGllbnQgPSBWYWx1ZQ0KZW5kKQ0KdGFzay5zcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBnZXRnZW52KCkuQW50aUtpY2tDbGllbnQgdGhlbg0KICAgICAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9naXRsYWIuY29tL1NreTI4MzYvQlQvLS9yYXcvbWFpbi9hbnRpa2lja2NsaWVudCcpKSgpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KTWFpbl9Ib21lOmFkZEJ1dHRvbigiRlBTIEJvb3N0IiwgZnVuY3Rpb24oKQ0KbG9jYWwgZGVjYWxzeWVldGVkID0gZmFsc2UNCmxvY2FsIGcgPSBnYW1lDQpsb2NhbCB3ID0gZy5Xb3Jrc3BhY2UNCmxvY2FsIGwgPSBnLkxpZ2h0aW5nDQpsb2NhbCB0ID0gdy5UZXJyYWluDQp0LldhdGVyV2F2ZVNpemUgPSAwDQp0LldhdGVyV2F2ZVNwZWVkID0gMA0KdC5XYXRlclJlZmxlY3RhbmNlID0gMA0KdC5XYXRlclRyYW5zcGFyZW5jeSA9IDANCmwuR2xvYmFsU2hhZG93cyA9IGZhbHNlDQpsLkZvZ0VuZCA9IDllOQ0KbC5CcmlnaHRuZXNzID0gMA0Kc2V0dGluZ3MoKS5SZW5kZXJpbmcuUXVhbGl0eUxldmVsID0gIkxldmVsMDEiDQpmb3IgaSwgdiBpbiBwYWlycyhnOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgaWYgdjpJc0EoIlBhcnQiKSBvciB2OklzQSgiVW5pb24iKSBvciB2OklzQSgiQ29ybmVyV2VkZ2VQYXJ0Iikgb3IgdjpJc0EoIlRydXNzUGFydCIpIHRoZW4gDQogICAgICAgIHYuTWF0ZXJpYWwgPSAiUGxhc3RpYyINCiAgICAgICAgdi5SZWZsZWN0YW5jZSA9IDANCiAgICBlbHNlaWYgdjpJc0EoIkRlY2FsIikgb3IgdjpJc0EoIlRleHR1cmUiKSBhbmQgZGVjYWxzeWVldGVkIHRoZW4NCiAgICAgICAgdi5UcmFuc3BhcmVuY3kgPSAxDQogICAgZWxzZWlmIHY6SXNBKCJQYXJ0aWNsZUVtaXR0ZXIiKSBvciB2OklzQSgiVHJhaWwiKSB0aGVuDQogICAgICAgIHYuTGlmZXRpbWUgPSBOdW1iZXJSYW5nZS5uZXcoMCkNCiAgICBlbHNlaWYgdjpJc0EoIkV4cGxvc2lvbiIpIHRoZW4NCiAgICAgICAgdi5CbGFzdFByZXNzdXJlID0gMQ0KICAgICAgICB2LkJsYXN0UmFkaXVzID0gMQ0KICAgIGVsc2VpZiB2OklzQSgiRmlyZSIpIG9yIHY6SXNBKCJTcG90TGlnaHQiKSBvciB2OklzQSgiU21va2UiKSBvciB2OklzQSgiU3BhcmtsZXMiKSB0aGVuDQogICAgICAgIHYuRW5hYmxlZCA9IGZhbHNlDQogICAgZWxzZWlmIHY6SXNBKCJNZXNoUGFydCIpIHRoZW4NCiAgICAgICAgdi5NYXRlcmlhbCA9ICJQbGFzdGljIg0KICAgICAgICB2LlJlZmxlY3RhbmNlID0gMA0KICAgICAgICB2LlRleHR1cmVJRCA9IDEwMzg1OTAyNzU4NzI4OTU3DQogICAgZW5kDQplbmQNCmZvciBpLCBlIGluIHBhaXJzKGw6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICBpZiBlOklzQSgiQmx1ckVmZmVjdCIpIG9yIGU6SXNBKCJTdW5SYXlzRWZmZWN0Iikgb3IgZTpJc0EoIkNvbG9yQ29ycmVjdGlvbkVmZmVjdCIpIG9yIGU6SXNBKCJCbG9vbUVmZmVjdCIpIG9yIGU6SXNBKCJEZXB0aE9mRmllbGRFZmZlY3QiKSB0aGVuDQogICAgICAgIGUuRW5hYmxlZCA9IGZhbHNlDQogICAgZW5kDQplbmQNCmVuZCkNCg0KTWFpbl9Ib21lOmFkZEJ1dHRvbigiUmVqb2luIFNlcnZlciIsIGZ1bmN0aW9uKCkNCmdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnQoZ2FtZS5QbGFjZUlkLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcikNCmVuZCkNCg0KTWFpbl9Ib21lOmFkZEJ1dHRvbigiU2VydmVyIEhvcCIsIGZ1bmN0aW9uKCkNCkhvcCgpDQplbmQpDQpmdW5jdGlvbiBIb3AoKQ0KbG9jYWwgUGxhY2VJRCA9IGdhbWUuUGxhY2VJZA0KbG9jYWwgQWxsSURzID0ge30NCmxvY2FsIGZvdW5kQW55dGhpbmcgPSAiIg0KbG9jYWwgYWN0dWFsSG91ciA9IG9zLmRhdGUoIiEqdCIpLmhvdXINCmxvY2FsIERlbGV0ZWQgPSBmYWxzZQ0KZnVuY3Rpb24gVFBSZXR1cm5lcigpDQogICAgbG9jYWwgU2l0ZTsNCiAgICBpZiBmb3VuZEFueXRoaW5nID09ICIiIHRoZW4NCiAgICAgICAgU2l0ZSA9IGdhbWUuSHR0cFNlcnZpY2U6SlNPTkRlY29kZShnYW1lOkh0dHBHZXQoJ2h0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8nIC4uIFBsYWNlSUQgLi4gJy9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9QXNjJmxpbWl0PTEwMCcpKQ0KICAgIGVsc2UNCiAgICAgICAgU2l0ZSA9IGdhbWUuSHR0cFNlcnZpY2U6SlNPTkRlY29kZShnYW1lOkh0dHBHZXQoJ2h0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8nIC4uIFBsYWNlSUQgLi4gJy9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9QXNjJmxpbWl0PTEwMCZjdXJzb3I9JyAuLiBmb3VuZEFueXRoaW5nKSkNCiAgICBlbmQNCiAgICBsb2NhbCBJRCA9ICIiDQogICAgaWYgU2l0ZS5uZXh0UGFnZUN1cnNvciBhbmQgU2l0ZS5uZXh0UGFnZUN1cnNvciB+PSAibnVsbCIgYW5kIFNpdGUubmV4dFBhZ2VDdXJzb3Igfj0gbmlsIHRoZW4NCiAgICAgICAgZm91bmRBbnl0aGluZyA9IFNpdGUubmV4dFBhZ2VDdXJzb3INCiAgICBlbmQNCiAgICBsb2NhbCBudW0gPSAwOw0KICAgIGZvciBpLHYgaW4gcGFpcnMoU2l0ZS5kYXRhKSBkbw0KICAgICAgICBsb2NhbCBQb3NzaWJsZSA9IHRydWUNCiAgICAgICAgSUQgPSB0b3N0cmluZyh2LmlkKQ0KICAgICAgICBpZiB0b251bWJlcih2Lm1heFBsYXllcnMpID4gdG9udW1iZXIodi5wbGF5aW5nKSB0aGVuDQogICAgICAgICAgICBmb3IgXyxFeGlzdGluZyBpbiBwYWlycyhBbGxJRHMpIGRvDQogICAgICAgICAgICAgICAgaWYgbnVtIH49IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBJRCA9PSB0b3N0cmluZyhFeGlzdGluZykgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIHRvbnVtYmVyKGFjdHVhbEhvdXIpIH49IHRvbnVtYmVyKEV4aXN0aW5nKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkZWxGaWxlID0gcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIGRlbGZpbGUoIk5vdFNhbWVTZXJ2ZXJzLmpzb24iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbElEcyA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KEFsbElEcywgYWN0dWFsSG91cikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbnVtID0gbnVtICsgMQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBQb3NzaWJsZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoQWxsSURzLCBJRCkNCiAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgLS0gd3JpdGVmaWxlKCJOb3RTYW1lU2VydmVycy5qc29uIiwgZ2FtZTpHZXRTZXJ2aWNlKCdIdHRwU2VydmljZScpOkpTT05FbmNvZGUoQWxsSURzKSkNCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoUGxhY2VJRCwgSUQsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcikNCiAgICAgICAgICAgICAgICBlbmQpDQogICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZnVuY3Rpb24gVGVsZXBvcnQoKSANCiAgICB3aGlsZSB3YWl0KC4xKSBkbw0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBUUFJldHVybmVyKCkNCiAgICAgICAgICAgIGlmIGZvdW5kQW55dGhpbmcgfj0gIiIgdGhlbg0KICAgICAgICAgICAgICAgIFRQUmV0dXJuZXIoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KVGVsZXBvcnQoKQ0KZW5kDQoNCk1haW5fSG9tZTphZGRCdXR0b24oIlRlbGVwb3J0IFRvIExvd2VyIFNlcnZlciIsIGZ1bmN0aW9uKCkNCmxvY2FsIG1heHBsYXllcnMsIGdhbWVsaW5rLCBnb29kc2VydmVyLCBkYXRhX3RhYmxlID0gbWF0aC5odWdlLCAiaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLyIgLi4gZ2FtZS5QbGFjZUlkIC4uICIvc2VydmVycy9QdWJsaWM/c29ydE9yZGVyPUFzYyZsaW1pdD0xMDAiDQppZiBub3QgX0cuRmFpbGVkU2VydmVySUQgdGhlbiBfRy5GYWlsZWRTZXJ2ZXJJRCA9IHt9IGVuZA0KDQpsb2NhbCBmdW5jdGlvbiBzZXJ2ZXJzZWFyY2goKQ0KICAgIGRhdGFfdGFibGUgPSBnYW1lOkdldFNlcnZpY2UiSHR0cFNlcnZpY2UiOkpTT05EZWNvZGUoZ2FtZTpIdHRwR2V0QXN5bmMoZ2FtZWxpbmspKQ0KICAgIGZvciBfLCB2IGluIHBhaXJzKGRhdGFfdGFibGUuZGF0YSkgZG8NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgdHlwZSh2KSA9PSAidGFibGUiIGFuZCB2LmlkIGFuZCB2LnBsYXlpbmcgYW5kIHRvbnVtYmVyKG1heHBsYXllcnMpID4gdG9udW1iZXIodi5wbGF5aW5nKSBhbmQgbm90IHRhYmxlLmZpbmQoX0cuRmFpbGVkU2VydmVySUQsIHYuaWQpIHRoZW4NCiAgICAgICAgICAgICAgICBtYXhwbGF5ZXJzID0gdi5wbGF5aW5nDQogICAgICAgICAgICAgICAgZ29vZHNlcnZlciA9IHYuaWQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gZ2V0c2VydmVycygpDQogICAgcGNhbGwoc2VydmVyc2VhcmNoKQ0KICAgIGZvciBpLCB2IGluIHBhaXJzKGRhdGFfdGFibGUpIGRvDQogICAgICAgIGlmIGkgPT0gIm5leHRQYWdlQ3Vyc29yIiB0aGVuDQogICAgICAgICAgICBpZiBnYW1lbGluazpmaW5kIiZjdXJzb3I9IiB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgYSA9IGdhbWVsaW5rOmZpbmQiJmN1cnNvcj0iDQogICAgICAgICAgICAgICAgbG9jYWwgYiA9IGdhbWVsaW5rOnN1YihhKQ0KICAgICAgICAgICAgICAgIGdhbWVsaW5rID0gZ2FtZWxpbms6Z3N1YihiLCAiIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2FtZWxpbmsgPSBnYW1lbGluayAuLiAiJmN1cnNvcj0iIC4uIHYNCiAgICAgICAgICAgIHBjYWxsKGdldHNlcnZlcnMpDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCnBjYWxsKGdldHNlcnZlcnMpDQp3YWl0KC4xKQ0KaWYgZ29vZHNlcnZlciA9PSBnYW1lLkpvYklkIG9yIG1heHBsYXllcnMgPT0gI2dhbWU6R2V0U2VydmljZSJQbGF5ZXJzIjpHZXRDaGlsZHJlbigpIC0gMSB0aGVuDQplbmQNCnRhYmxlLmluc2VydChfRy5GYWlsZWRTZXJ2ZXJJRCwgZ29vZHNlcnZlcikNCmdhbWU6R2V0U2VydmljZSJUZWxlcG9ydFNlcnZpY2UiOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKGdhbWUuUGxhY2VJZCwgZ29vZHNlcnZlcikNCg0Kd2hpbGUgd2FpdCguMSkgZG8NCiAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgIGlmIG5vdCBnYW1lOklzTG9hZGVkKCkgdGhlbg0KICAgICAgICAgICAgZ2FtZS5Mb2FkZWQ6V2FpdCgpDQogICAgICAgIGVuZA0KICAgICAgICBnYW1lLkNvcmVHdWkuUm9ibG94UHJvbXB0R3VpLnByb21wdE92ZXJsYXkuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgR1VJID0gZ2FtZS5Db3JlR3VpLlJvYmxveFByb21wdEd1aS5wcm9tcHRPdmVybGF5OkZpbmRGaXJzdENoaWxkKCJFcnJvclByb21wdCIpDQogICAgICAgICAgICBpZiBHVUkgdGhlbg0KICAgICAgICAgICAgICAgIGlmIEdVSS5UaXRsZUZyYW1lLkVycm9yVGl0bGUuVGV4dCA9PSAiRGlzY29ubmVjdGVkIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmICNnYW1lLlBsYXllcnM6R2V0UGxheWVycygpIDw9IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOktpY2soIlxuUmVqb2luaW5nLi4uIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0KGdhbWUuUGxhY2VJZCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKGdhbWUuUGxhY2VJZCwgZ2FtZS5Kb2JJZCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kKQ0KZW5kDQplbmQpDQoNCk1haW5fSG9tZTphZGRCdXR0b24oIkRlc3Ryb3kgR1VJIiwgZnVuY3Rpb24oKQ0KTGlicmFyeTpEZXN0cm95R3VpKCkNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBQQVRIIA0KLS1bW3dhaXQoMSkNCmxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vUzRuWnovYnRfcHJvamVjdC9tYWluL3NjcmlwdCcpKSgpIF1dDQoNCmlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluOkZpbmRGaXJzdENoaWxkKCJDaG9vc2VUZWFtIikgdGhlbg0KcmVwZWF0IHdhaXQoKQ0KICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aTpXYWl0Rm9yQ2hpbGQoIk1haW4iKS5DaG9vc2VUZWFtLlZpc2libGUgPT0gdHJ1ZSB0aGVuDQogICAgICAgIGlmIF9HLlRlYW0gPT0gIlBpcmF0ZSIgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2V0Y29ubmVjdGlvbnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uQ2hvb3NlVGVhbS5Db250YWluZXIuUGlyYXRlcy5GcmFtZS5WaWV3cG9ydEZyYW1lLlRleHRCdXR0b24uQWN0aXZhdGVkKSkgZG8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2LkZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgX0cuVGVhbSA9PSAiTWFyaW5lIiB0aGVuDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZXRjb25uZWN0aW9ucyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5DaG9vc2VUZWFtLkNvbnRhaW5lci5NYXJpbmVzLkZyYW1lLlZpZXdwb3J0RnJhbWUuVGV4dEJ1dHRvbi5BY3RpdmF0ZWQpKSBkbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHYuRnVuY3Rpb24oKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdldGNvbm5lY3Rpb25zKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLkNob29zZVRlYW0uQ29udGFpbmVyLlBpcmF0ZXMuRnJhbWUuVmlld3BvcnRGcmFtZS5UZXh0QnV0dG9uLkFjdGl2YXRlZCkpIGRvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdi5GdW5jdGlvbigpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQp1bnRpbCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuVGVhbSB+PSBuaWwgYW5kIGdhbWU6SXNMb2FkZWQoKQ0KZW5kDQoNCi0tLy8gV29ybGQgQ2hlY2sNCkZpcnN0X1NlYSA9IGZhbHNlDQpTZWNvbmRfU2VhID0gZmFsc2UNClRoaXJkX1NlYSA9IGZhbHNlDQpsb2NhbCBwbGFjZUlkID0gZ2FtZS5QbGFjZUlkDQppZiBwbGFjZUlkID09IDI3NTM5MTU1NDkgdGhlbg0KRmlyc3RfU2VhID0gdHJ1ZQ0KZWxzZWlmIHBsYWNlSWQgPT0gNDQ0MjI3MjE4MyB0aGVuDQpTZWNvbmRfU2VhID0gdHJ1ZQ0KZWxzZWlmIHBsYWNlSWQgPT0gNzQ0OTQyMzYzNSB0aGVuDQpUaGlyZF9TZWEgPSB0cnVlDQplbmQNCg0KLS0vLyBDSEVDSyBNT05TVEVSDQpmdW5jdGlvbiBDaGVja0xldmVsKCkNCmxvY2FsIEx2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZQ0KaWYgRmlyc3RfU2VhIHRoZW4NCiAgICBpZiBMdiA9PSAxIG9yIEx2IDw9IDkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiQmFuZGl0IFtMdi4gNV0iIHRoZW4gLS0gQmFuZGl0DQogICAgICAgIE1zID0gIkJhbmRpdCINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkJhbmRpdFF1ZXN0MSINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJCYW5kaXQiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEwNjAuOTM4MzU0NDkyMiwgMTYuNDU1MDY2NjgwOTA4LCAxNTQ3Ljc4NDE3OTY4NzUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTAzOC41NTMzNDQ3MjY2LCA0MS4yOTYyNDkzODk2NDgsIDE1NzYuNTA5ODg3Njk1MykNCiAgICBlbHNlaWYgTHYgPT0gMTAgb3IgTHYgPD0gMTQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiTW9ua2V5IFtMdi4gMTRdIiB0aGVuIC0tIE1vbmtleQ0KICAgICAgICBNcyA9ICJNb25rZXkiDQogICAgICAgIE5hbWVRdWVzdCA9ICJKdW5nbGVRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJNb25rZXkiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xNjAxLjY1NTM5NTUwNzgsIDM2Ljg1MjEzNDcwNDU5LCAxNTMuMzg4MDkyMDQxMDIpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE0NDguMTQ0NjUzMzIwMywgNTAuODUxOTkzNTYwNzkxLCA2My42MDcxODUzNjM3NykNCiAgICBlbHNlaWYgTHYgPT0gMTUgb3IgTHYgPD0gMjkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiR29yaWxsYSBbTHYuIDIwXSIgdGhlbiAtLSBHb3JpbGxhDQogICAgICAgIE1zID0gIkdvcmlsbGEiDQogICAgICAgIE5hbWVRdWVzdCA9ICJKdW5nbGVRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJHb3JpbGxhIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMTQyLjY0ODgwMzcxMDksIDQwLjQ2MjM0ODkzNzk4OCwgLTUxNS4zOTIyNzI5NDkyMikNCiAgICBlbHNlaWYgTHYgPT0gMzAgb3IgTHYgPD0gMzkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiUGlyYXRlIFtMdi4gMzVdIiB0aGVuIC0tIFBpcmF0ZQ0KICAgICAgICBNcyA9ICJQaXJhdGUiDQogICAgICAgIE5hbWVRdWVzdCA9ICJCdWdneVF1ZXN0MSINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJQaXJhdGUiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xMTQwLjE3NjE0NzQ2MDksIDQuNzUyMDQ5NDQ2MTA2LCAzODI3LjQwNTc2MTcxODgpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTEyMDEuMDg4MTM0NzY1NiwgNDAuNjI4OTQwNTgyMjc1LCAzODU3LjU5NjY3OTY4NzUpDQogICAgZWxzZWlmIEx2ID09IDQwIG9yIEx2IDw9IDU5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkJydXRlIFtMdi4gNDVdIiB0aGVuIC0tIEJydXRlDQogICAgICAgIE1zID0gIkJydXRlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiQnVnZ3lRdWVzdDEiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiQnJ1dGUiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xMTQwLjE3NjE0NzQ2MDksIDQuNzUyMDQ5NDQ2MTA2LCAzODI3LjQwNTc2MTcxODgpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTEzODcuNTMyNDcwNzAzMSwgMjQuNTkyMDM1MjkzNTc5LCA0MTAwLjk1NzUxOTUzMTMpDQogICAgZWxzZWlmIEx2ID09IDYwIG9yIEx2IDw9IDc0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkRlc2VydCBCYW5kaXQgW0x2LiA2MF0iIHRoZW4gLS0gRGVzZXJ0IEJhbmRpdA0KICAgICAgICBNcyA9ICJEZXNlcnQgQmFuZGl0Ig0KICAgICAgICBOYW1lUXVlc3QgPSAiRGVzZXJ0UXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiRGVzZXJ0IEJhbmRpdCINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoODk2LjUxNzIxMTkxNDA2LCA2LjQzODQ2MTc4MDU0ODEsIDQzOTAuMTQ5NDE0MDYyNSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg5ODQuOTk4OTYyNDAyMzQsIDE2LjEwOTU1MjM4MzQyMywgNDQxNy45MTAxNTYyNSkNCiAgICBlbHNlaWYgTHYgPT0gNzUgb3IgTHYgPD0gODkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiRGVzZXJ0IE9mZmljZXIgW0x2LiA3MF0iIHRoZW4gLS0gRGVzZXJ0IE9mZmljZXINCiAgICAgICAgTXMgPSAiRGVzZXJ0IE9mZmljZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJEZXNlcnRRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJEZXNlcnQgT2ZmaWNlciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoODk2LjUxNzIxMTkxNDA2LCA2LjQzODQ2MTc4MDU0ODEsIDQzOTAuMTQ5NDE0MDYyNSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxNTQ3LjE1MTAwMDk3NjYsIDE0LjQ1MjAzODc2NDk1NCwgNDM4MS44MDAyOTI5Njg4KQ0KICAgIGVsc2VpZiBMdiA9PSA5MCBvciBMdiA8PSA5OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJTbm93IEJhbmRpdCBbTHYuIDkwXSIgdGhlbiAtLSBTbm93IEJhbmRpdA0KICAgICAgICBNcyA9ICJTbm93IEJhbmRpdCINCiAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJTbm93IEJhbmRpdCINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTM4Ni44MDczNzMwNDY5LCA4Ny4yNzI3ODkwMDE0NjUsIC0xMjk4LjM1NzY2NjAxNTYpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTM1Ni4zMDI4NTY0NDUzLCAxMDUuNzY4NjUzODY5NjMsIC0xMzI4LjI0MTgyMTI4OTEpDQogICAgZWxzZWlmIEx2ID09IDEwMCBvciBMdiA8PSAxMTkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiU25vd21hbiBbTHYuIDEwMF0iIHRoZW4gLS0gU25vd21hbg0KICAgICAgICBNcyA9ICJTbm93bWFuIg0KICAgICAgICBOYW1lUXVlc3QgPSAiU25vd1F1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIlNub3dtYW4iDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEzODYuODA3MzczMDQ2OSwgODcuMjcyNzg5MDAxNDY1LCAtMTI5OC4zNTc2NjYwMTU2KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEyMTguNzk1NjU0Mjk2OSwgMTM4LjAxMTg0MDgyMDMxLCAtMTQ4OC4wMjYyNDUxMTcyKQ0KICAgIGVsc2VpZiBMdiA9PSAxMjAgb3IgTHYgPD0gMTQ5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkNoaWVmIFBldHR5IE9mZmljZXIgW0x2LiAxMjBdIiB0aGVuIC0tIENoaWVmIFBldHR5IE9mZmljZXINCiAgICAgICAgTXMgPSAiQ2hpZWYgUGV0dHkgT2ZmaWNlciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVF1ZXN0MiINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJDaGllZiBQZXR0eSBPZmZpY2VyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtNTAzNS40OTYwOTM3NSwgMjguNjc3ODM1NDY0NDc4LCA0MzI0LjE4NDA4MjAzMTMpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTQ5MzEuMTU1MjczNDM3NSwgNjUuNzkzMTEzNzA4NDk2LCA0MTIxLjgzOTM1NTQ2ODgpDQogICAgZWxzZWlmIEx2ID09IDE1MCBvciBMdiA8PSAxNzQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiU2t5IEJhbmRpdCBbTHYuIDE1MF0iIHRoZW4gLS0gU2t5IEJhbmRpdA0KICAgICAgICBNcyA9ICJTa3kgQmFuZGl0Ig0KICAgICAgICBOYW1lUXVlc3QgPSAiU2t5UXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiU2t5IEJhbmRpdCINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTQ4NDIuMTM3MjA3MDMxMywgNzE3LjY5NTQzNDU3MDMxLCAtMjYyMy4wNDgzMzk4NDM4KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC00OTU1LjY0MTExMzI4MTMsIDM2NS40NjM2NTM1NjQ0NSwgLTI5MDguMTg2NTIzNDM3NSkNCiAgICBlbHNlaWYgTHYgPT0gMTc1IG9yIEx2IDw9IDE4OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJEYXJrIE1hc3RlciBbTHYuIDE3NV0iIHRoZW4gLS0gRGFyayBNYXN0ZXINCiAgICAgICAgTXMgPSAiRGFyayBNYXN0ZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJTa3lRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJEYXJrIE1hc3RlciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTQ4NDIuMTM3MjA3MDMxMywgNzE3LjY5NTQzNDU3MDMxLCAtMjYyMy4wNDgzMzk4NDM4KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC01MTQ4LjE2NTAzOTA2MjUsIDQzOS4wNDU3MTUzMzIwMywgLTIzMzIuOTYxMTgxNjQwNikNCiAgICBlbHNlaWYgTHYgPT0gMTkwIG9yIEx2IDw9IDIwOSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJQcmlzb25lciBbTHYuIDE5MF0iIHRoZW4gLS0gUHJpc29uZXINCiAgICAgICAgTXMgPSAiUHJpc29uZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJQcmlzb25lclF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlByaXNvbmVyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MzEwLjYwNTQ3LCAwLjM1MDAxNDkyNSwgNDc0Ljk0NjU5NCwgMC4wMTc1MDE3MTE4LCAwLCAwLjk5OTg0NjkzNSwgMCwgMSwgMCwgLTAuOTk5ODQ2OTM1LCAwLCAwLjAxNzUwMTcxMTgpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDkzNy4zMTg4NSwgMC4zMzIwMzEzOTksIDY0OS41NzQ1MjQsIDAuNjk0NjQ5ODE2LCAwLCAtMC43MTkzNDgwNzMsIDAsIDEsIDAsIDAuNzE5MzQ4MDczLCAwLCAwLjY5NDY0OTgxNikNCiAgICBlbHNlaWYgTHYgPT0gMjEwIG9yIEx2IDw9IDI0OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJEYW5nZXJvdXMgUHJpc29uZXIgW0x2LiAyMTBdIiB0aGVuIC0tIERhbmdlcm91cyBQcmlzb25lcg0KICAgICAgICBNcyA9ICJEYW5nZXJvdXMgUHJpc29uZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJQcmlzb25lclF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIkRhbmdlcm91cyBQcmlzb25lciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTMxMC42MDU0NywgMC4zNTAwMTQ5MjUsIDQ3NC45NDY1OTQsIDAuMDE3NTAxNzExOCwgMCwgMC45OTk4NDY5MzUsIDAsIDEsIDAsIC0wLjk5OTg0NjkzNSwgMCwgMC4wMTc1MDE3MTE4KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUwOTkuNjYyNiwgMC4zNTE1NjI2NzksIDEwNTUuNzU4MywgMC44OTg5MDY4MjcsIDAsIC0wLjQzODEzOTg1NiwgMCwgMSwgMCwgMC40MzgxMzk4NTYsIDAsIDAuODk4OTA2ODI3KQ0KICAgIGVsc2VpZiBMdiA9PSAyNTAgb3IgTHYgPD0gMjc0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlRvZ2EgV2FycmlvciBbTHYuIDI1MF0iIHRoZW4gLS0gVG9nYSBXYXJyaW9yDQogICAgICAgIE1zID0gIlRvZ2EgV2FycmlvciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkNvbG9zc2V1bVF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlRvZ2EgV2FycmlvciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTE1NzcuNzg5MDYyNSwgNy40MTUxNDIwNTkzMjYyLCAtMjk4NC40ODM4ODY3MTg4KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xODcyLjUxNjYwMTU2MjUsIDQ5LjA4MDIxNTQ1NDEwMiwgLTI5MTMuODEwNTQ2ODc1KQ0KICAgIGVsc2VpZiBMdiA9PSAyNzUgb3IgTHYgPD0gMjk5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkdsYWRpYXRvciBbTHYuIDI3NV0iIHRoZW4gLS0gR2xhZGlhdG9yDQogICAgICAgIE1zID0gIkdsYWRpYXRvciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkNvbG9zc2V1bVF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIkdsYWRpYXRvciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTE1NzcuNzg5MDYyNSwgNy40MTUxNDIwNTkzMjYyLCAtMjk4NC40ODM4ODY3MTg4KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xNTIxLjM3NDAyMzQzNzUsIDgxLjIwMzE3MDc3NjM2NywgLTMwNjYuMzEzOTY0ODQzOCkNCiAgICBlbHNlaWYgTHYgPT0gMzAwIG9yIEx2IDw9IDMyNCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJNaWxpdGFyeSBTb2xkaWVyIFtMdi4gMzAwXSIgdGhlbiAtLSBNaWxpdGFyeSBTb2xkaWVyDQogICAgICAgIE1zID0gIk1pbGl0YXJ5IFNvbGRpZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJNYWdtYVF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIk1pbGl0YXJ5IFNvbGRpZXIiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC01MzE2LjExNTcyMjY1NjMsIDEyLjI2MjgzMTY4NzkyNywgODUxNy4wMDM5MDYyNSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNTM2OS4wMDA0ODgyODEzLCA2MS4yNDM1MjY0NTg3NCwgODU1Ni40OTIxODc1KQ0KICAgIGVsc2VpZiBMdiA9PSAzMjUgb3IgTHYgPD0gMzc0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIk1pbGl0YXJ5IFNweSBbTHYuIDMyNV0iIHRoZW4gLS0gTWlsaXRhcnkgU3B5DQogICAgICAgIE1zID0gIk1pbGl0YXJ5IFNweSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIk1hZ21hUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiTWlsaXRhcnkgU3B5Ig0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtNTMxNi4xMTU3MjI2NTYzLCAxMi4yNjI4MzE2ODc5MjcsIDg1MTcuMDAzOTA2MjUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTU3ODcuMDAyOTMsIDc1LjgyNjI2MzQsIDg2NTEuNjk5MjIsIDAuODM4NTkwNTYyLCAwLCAtMC41NDQ3NjIxOTQsIDAsIDEsIDAsIDAuNTQ0NzYyMTk0LCAwLCAwLjgzODU5MDU2MikNCiAgICBlbHNlaWYgTHYgPT0gMzc1IG9yIEx2IDw9IDM5OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJGaXNobWFuIFdhcnJpb3IgW0x2LiAzNzVdIiB0aGVuIC0tIEZpc2htYW4gV2FycmlvciANCiAgICAgICAgTXMgPSAiRmlzaG1hbiBXYXJyaW9yIg0KICAgICAgICBOYW1lUXVlc3QgPSAiRmlzaG1hblF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gV2FycmlvciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDYwODQ0LjEwNTQ2ODc1LCA5OC40NjI4NzUzNjYyMTEsIDEyOTguMzk4NTU5NTcwMykNCiAgICAgICAgaWYgKExldmVsRmFybVF1ZXN0IG9yIExldmVsRmFybU5vUXVlc3Qgb3IgU2VsZWN0TW9uc3Rlcl9RdWVzdF9GYXJtIG9yIFNlbGVjdE1vbnN0ZXJfTm9RdWVzdF9GYXJtIG9yIERldmlsTWFzdGVyeV9GYXJtKSBhbmQgKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCB0aGVuDQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpDQogICAgICAgIGVuZA0KICAgIGVsc2VpZiBMdiA9PSA0MDAgb3IgTHYgPD0gNDQ5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gQ29tbWFuZG8gW0x2LiA0MDBdIiB0aGVuIC0tIEZpc2htYW4gQ29tbWFuZG8NCiAgICAgICAgTXMgPSAiRmlzaG1hbiBDb21tYW5kbyINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkZpc2htYW5RdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENvbW1hbmRvIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MTEyMi42NTIzNDM3NSwgMTguNDk3NDQyMjQ1NDgzLCAxNTY5LjM5OTc4MDI3MzQpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjE3MzguMzk4NDM3NSwgNjQuMjA3MzIxMTY2OTkyLCAxNDMzLjgzNzUyNDQxNDEpDQogICAgICAgIGlmIChMZXZlbEZhcm1RdWVzdCBvciBMZXZlbEZhcm1Ob1F1ZXN0IG9yIFNlbGVjdE1vbnN0ZXJfUXVlc3RfRmFybSBvciBTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSBvciBEZXZpbE1hc3RlcnlfRmFybSkgYW5kIChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDAgdGhlbg0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKQ0KICAgICAgICBlbmQNCiAgICBlbHNlaWYgTHYgPT0gNDUwIG9yIEx2IDw9IDQ3NCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJHb2QncyBHdWFyZCBbTHYuIDQ1MF0iIHRoZW4gLS0gR29kJ3MgR3VhcmQNCiAgICAgICAgTXMgPSAiR29kJ3MgR3VhcmQiDQogICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAxUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiR29kJ3MgR3VhcmQiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC00NzIxLjg2MDM1MTU2MjUsIDg0NS4zMDI5Nzg1MTU2MywgLTE5NTMuODQ4OTk5MDIzNCkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNDYyOC4wNDk4MDQ2ODc1LCA4NjYuOTI4NzcxOTcyNjYsIC0xOTMxLjIzNTIyOTQ5MjIpDQogICAgICAgIGlmIChMZXZlbEZhcm1RdWVzdCBvciBMZXZlbEZhcm1Ob1F1ZXN0IG9yIFNlbGVjdE1vbnN0ZXJfUXVlc3RfRmFybSBvciBTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSBvciBEZXZpbE1hc3RlcnlfRmFybSkgYW5kIChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDAgdGhlbg0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldygtNDYwNy44MjI3NSwgODcyLjU0MjQ4LCAtMTY2Ny41NTY4OCkpDQogICAgICAgIGVuZA0KICAgIGVsc2VpZiBMdiA9PSA0NzUgb3IgTHYgPD0gNTI0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlNoYW5kYSBbTHYuIDQ3NV0iIHRoZW4gLS0gU2hhbmRhDQogICAgICAgIE1zID0gIlNoYW5kYSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDFRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJTaGFuZGEiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC03ODYzLjE1OTY2Nzk2ODgsIDU1NDUuNTE5MDQyOTY4OCwgLTM3OC40MjI2Njg0NTcwMykNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNzY4NS4xNDc0NjA5Mzc1LCA1NjAxLjA3NTE5NTMxMjUsIC00NDEuMzg4NzYzNDI3NzMpDQogICAgICAgIGlmIChMZXZlbEZhcm1RdWVzdCBvciBMZXZlbEZhcm1Ob1F1ZXN0IG9yIFNlbGVjdE1vbnN0ZXJfUXVlc3RfRmFybSBvciBTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSBvciBEZXZpbE1hc3RlcnlfRmFybSkgYW5kIChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDAgdGhlbg0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldygtNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0zODAuMjkxMTk4NzMwNDcpKQ0KICAgICAgICBlbmQNCiAgICBlbHNlaWYgTHYgPT0gNTI1IG9yIEx2IDw9IDU0OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJSb3lhbCBTcXVhZCBbTHYuIDUyNV0iIHRoZW4gLS0gUm95YWwgU3F1YWQNCiAgICAgICAgTXMgPSAiUm95YWwgU3F1YWQiDQogICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAyUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiUm95YWwgU3F1YWQiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC03OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLTE0MTAuOTIzODI4MTI1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC03NjU0LjI1MTQ2NDg0MzgsIDU2MzcuMTA3OTEwMTU2MywgLTE0MDcuNzU1MDA0ODgyOCkNCiAgICBlbHNlaWYgTHYgPT0gNTUwIG9yIEx2IDw9IDYyNCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJSb3lhbCBTb2xkaWVyIFtMdi4gNTUwXSIgdGhlbiAtLSBSb3lhbCBTb2xkaWVyDQogICAgICAgIE1zID0gIlJveWFsIFNvbGRpZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAyUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiUm95YWwgU29sZGllciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTc5MDMuMzgyODEyNSwgNTYzNS45ODk3NDYwOTM4LCAtMTQxMC45MjM4MjgxMjUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTc3NjAuNDEwNjQ0NTMxMywgNTY3OS45MDc3MTQ4NDM4LCAtMTg4NC44MTEyNzkyOTY5KQ0KICAgIGVsc2VpZiBMdiA9PSA2MjUgb3IgTHYgPD0gNjQ5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkdhbGxleSBQaXJhdGUgW0x2LiA2MjVdIiB0aGVuIC0tIEdhbGxleSBQaXJhdGUNCiAgICAgICAgTXMgPSAiR2FsbGV5IFBpcmF0ZSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkZvdW50YWluUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiR2FsbGV5IFBpcmF0ZSINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTI1OC4yNzg4MDg1OTM4LCAzOC41MjY5MzE3NjI2OTUsIDQwNTAuMDQ0OTIxODc1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU1NTcuMTY4NDU3MDMxMywgMTUyLjMyNzE3ODk1NTA4LCAzOTk4Ljc3NTg3ODkwNjMpDQogICAgZWxzZWlmIEx2ID49IDY1MCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJHYWxsZXkgQ2FwdGFpbiBbTHYuIDY1MF0iIHRoZW4gLS0gR2FsbGV5IENhcHRhaW4NCiAgICAgICAgTXMgPSAiR2FsbGV5IENhcHRhaW4iDQogICAgICAgIE5hbWVRdWVzdCA9ICJGb3VudGFpblF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIkdhbGxleSBDYXB0YWluIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MjU4LjI3ODgwODU5MzgsIDM4LjUyNjkzMTc2MjY5NSwgNDA1MC4wNDQ5MjE4NzUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTY3Ny42NzcyNDYwOTM4LCA5Mi43ODYxMDk5MjQzMTYsIDQ5NjYuNjMyMzI0MjE4OCkNCiAgICBlbmQNCmVuZA0KaWYgU2Vjb25kX1NlYSB0aGVuDQogICAgaWYgTHYgPT0gNzAwIG9yIEx2IDw9IDcyNCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJSYWlkZXIgW0x2LiA3MDBdIiB0aGVuIC0tIFJhaWRlcg0KICAgICAgICBNcyA9ICJSYWlkZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMVF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlJhaWRlciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTQyNy43MjU2Nzc0OTAyMywgNzIuOTk2MzQ1NTIwMDIsIDE4MzUuOTQyNjI2OTUzMSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2OC44NzQ1NjUxMjQ1MTIsIDkzLjYzNTY0MzAwNTM3MSwgMjQyOS42NzUyOTI5Njg4KQ0KICAgIGVsc2VpZiBMdiA9PSA3MjUgb3IgTHYgPD0gNzc0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIk1lcmNlbmFyeSBbTHYuIDcyNV0iIHRoZW4gLS0gTWVyY2VuYXJ5DQogICAgICAgIE1zID0gIk1lcmNlbmFyeSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWExUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiTWVyY2VuYXJ5Ig0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtNDI3LjcyNTY3NzQ5MDIzLCA3Mi45OTYzNDU1MjAwMiwgMTgzNS45NDI2MjY5NTMxKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC04NjQuODUwMDk3NjU2MjUsIDEyMi40NzEwNDY0NDc3NSwgMTQ1My4xNTA1MTI2OTUzKQ0KICAgIGVsc2VpZiBMdiA9PSA3NzUgb3IgTHYgPD0gNzk5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlN3YW4gUGlyYXRlIFtMdi4gNzc1XSIgdGhlbiAtLSBTd2FuIFBpcmF0ZQ0KICAgICAgICBNcyA9ICJTd2FuIFBpcmF0ZSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWEyUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiU3dhbiBQaXJhdGUiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYzNS42MTE1MTEyMzA0NywgNzMuMDk2MzUxNjIzNTM1LCA5MTcuODEyOTg4MjgxMjUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTA2NS4zNjY5NDMzNTk0LCAxMzcuNjQwMTIxNDU5OTYsIDEzMjQuMzc5ODgyODEyNSkNCiAgICBlbHNlaWYgTHYgPT0gODAwIG9yIEx2IDw9IDg3NCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJGYWN0b3J5IFN0YWZmIFtMdi4gODAwXSIgdGhlbiAtLSBGYWN0b3J5IFN0YWZmDQogICAgICAgIE1zID0gIkZhY3RvcnkgU3RhZmYiDQogICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMlF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIkZhY3RvcnkgU3RhZmYiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYzNS42MTE1MTEyMzA0NywgNzMuMDk2MzUxNjIzNTM1LCA5MTcuODEyOTg4MjgxMjUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTMzLjIyMDQ1ODk4NDM4LCAxMjguNDY4NzY1MjU4NzksIDM1NS42MjYxNTk2Njc5NykNCiAgICBlbHNlaWYgTHYgPT0gODc1IG9yIEx2IDw9IDg5OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJNYXJpbmUgTGlldXRlbmFudCBbTHYuIDg3NV0iIHRoZW4gLS0gTWFyaW5lIExpZXV0ZW5hbnQNCiAgICAgICAgTXMgPSAiTWFyaW5lIExpZXV0ZW5hbnQiDQogICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVRdWVzdDMiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIExpZXV0ZW5hbnQiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0yNDQwLjk5MzQwODIwMzEsIDczLjA0MTkwODI2NDE2LCAtMzIxNy43MDgyNTE5NTMxKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0yNDg5LjI2MjIwNzAzMTMsIDg0LjYxMzU5NDA1NTE3NiwgLTMxNTEuODgzMDU2NjQwNikNCiAgICBlbHNlaWYgTHYgPT0gOTAwIG9yIEx2IDw9IDk0OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJNYXJpbmUgQ2FwdGFpbiBbTHYuIDkwMF0iIHRoZW4gLS0gTWFyaW5lIENhcHRhaW4NCiAgICAgICAgTXMgPSAiTWFyaW5lIENhcHRhaW4iDQogICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVRdWVzdDMiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIENhcHRhaW4iDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0yNDQwLjk5MzQwODIwMzEsIDczLjA0MTkwODI2NDE2LCAtMzIxNy43MDgyNTE5NTMxKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0yMzM1LjIwMjYzNjcxODgsIDc5Ljc4NjY1OTI0MDcyMywgLTMyNDUuODY3NDMxNjQwNikNCiAgICBlbHNlaWYgTHYgPT0gOTUwIG9yIEx2IDw9IDk3NCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJab21iaWUgW0x2LiA5NTBdIiB0aGVuIC0tIFpvbWJpZQ0KICAgICAgICBNcyA9ICJab21iaWUiDQogICAgICAgIE5hbWVRdWVzdCA9ICJab21iaWVRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJab21iaWUiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC01NDk0LjM0MTMwODU5MzgsIDQ4LjUwNTkzMTg1NDI0OCwgLTc5NC41OTA5NDIzODI4MSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNTUzNi40OTcwNzAzMTI1LCAxMDEuMDg1Nzc3MjgyNzEsIC04MzUuNTkwNzU5Mjc3MzQpDQogICAgZWxzZWlmIEx2ID09IDk3NSBvciBMdiA8PSA5OTkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiVmFtcGlyZSBbTHYuIDk3NV0iIHRoZW4gLS0gVmFtcGlyZQ0KICAgICAgICBNcyA9ICJWYW1waXJlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiWm9tYmllUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiVmFtcGlyZSINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTU0OTQuMzQxMzA4NTkzOCwgNDguNTA1OTMxODU0MjQ4LCAtNzk0LjU5MDk0MjM4MjgxKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC01ODA2LjEwOTg2MzI4MTMsIDE2LjcyMjUyODQ1NzY0MiwgLTExNjQuNDM4NDc2NTYyNSkNCiAgICBlbHNlaWYgTHYgPT0gMTAwMCBvciBMdiA8PSAxMDQ5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgVHJvb3BlciBbTHYuIDEwMDBdIiB0aGVuIC0tIFNub3cgVHJvb3Blcg0KICAgICAgICBNcyA9ICJTbm93IFRyb29wZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJTbm93TW91bnRhaW5RdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJTbm93IFRyb29wZXIiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYwNy4wNTk2MzEzNDc2NiwgNDAxLjQ0NzgxNDk0MTQxLCAtNTM3MC41NTQ2ODc1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUzNS4yMTA1MTAyNTM5MSwgNDMyLjc0MjA5NTk0NzI3LCAtNTQ4NC45MTY1MDM5MDYzKQ0KICAgIGVsc2VpZiBMdiA9PSAxMDUwIG9yIEx2IDw9IDEwOTkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiV2ludGVyIFdhcnJpb3IgW0x2LiAxMDUwXSIgdGhlbiAtLSBXaW50ZXIgV2Fycmlvcg0KICAgICAgICBNcyA9ICJXaW50ZXIgV2FycmlvciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dNb3VudGFpblF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIldpbnRlciBXYXJyaW9yIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MDcuMDU5NjMxMzQ3NjYsIDQwMS40NDc4MTQ5NDE0MSwgLTUzNzAuNTU0Njg3NSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMjM0LjQ0NDk0NjI4OTEsIDQ1Ni45NTQxOTMxMTUyMywgLTUxNzQuMTMwODU5Mzc1KQ0KICAgIGVsc2VpZiBMdiA9PSAxMTAwIG9yIEx2IDw9IDExMjQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiTGFiIFN1Ym9yZGluYXRlIFtMdi4gMTEwMF0iIHRoZW4gLS0gTGFiIFN1Ym9yZGluYXRlDQogICAgICAgIE1zID0gIkxhYiBTdWJvcmRpbmF0ZSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkljZVNpZGVRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJMYWIgU3Vib3JkaW5hdGUiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC02MDYxLjg0MTc5Njg3NSwgMTUuOTI2NjcxOTgxODEyLCAtNDkwMi4wMzg1NzQyMTg4KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC01NzIwLjU1NzYxNzE4NzUsIDYzLjMwOTQ3MTEzMDM3MSwgLTQ3ODQuNjEwMzUxNTYyNSkNCiAgICBlbHNlaWYgTHYgPT0gMTEyNSBvciBMdiA8PSAxMTc0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkhvcm5lZCBXYXJyaW9yIFtMdi4gMTEyNV0iIHRoZW4gLS0gSG9ybmVkIFdhcnJpb3INCiAgICAgICAgTXMgPSAiSG9ybmVkIFdhcnJpb3IiDQogICAgICAgIE5hbWVRdWVzdCA9ICJJY2VTaWRlUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiSG9ybmVkIFdhcnJpb3IiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC02MDYxLjg0MTc5Njg3NSwgMTUuOTI2NjcxOTgxODEyLCAtNDkwMi4wMzg1NzQyMTg4KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC02MjkyLjc1MTk1MzEyNSwgOTEuMTgxOTgzOTQ3NzU0LCAtNTUwMi42NDk5MDIzNDM4KQ0KICAgIGVsc2VpZiBMdiA9PSAxMTc1IG9yIEx2IDw9IDExOTkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiTWFnbWEgTmluamEgW0x2LiAxMTc1XSIgdGhlbiAtLSBNYWdtYSBOaW5qYQ0KICAgICAgICBNcyA9ICJNYWdtYSBOaW5qYSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkZpcmVTaWRlUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiTWFnbWEgTmluamEiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC01NDI5LjA0NzM2MzI4MTMsIDE1Ljk3NzU2NTc2NTM4MSwgLTUyOTcuOTYxNDI1NzgxMykNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNTQ2MS44Mzg4NjcxODc1LCAxMzAuMzYzNDc5NjE0MjYsIC01ODM2LjQ3MDIxNDg0MzgpDQogICAgZWxzZWlmIEx2ID09IDEyMDAgb3IgTHYgPD0gMTI0OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJMYXZhIFBpcmF0ZSBbTHYuIDEyMDBdIiB0aGVuIC0tIExhdmEgUGlyYXRlDQogICAgICAgIE1zID0gIkxhdmEgUGlyYXRlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiRmlyZVNpZGVRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJMYXZhIFBpcmF0ZSINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTU0MjkuMDQ3MzYzMjgxMywgMTUuOTc3NTY1NzY1MzgxLCAtNTI5Ny45NjE0MjU3ODEzKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC01MjUxLjE4ODk2NDg0MzgsIDU1LjE2NDUzNTUyMjQ2MSwgLTQ3NzQuNDA5NjY3OTY4OCkNCiAgICBlbHNlaWYgTHYgPT0gMTI1MCBvciBMdiA8PSAxMjc0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlNoaXAgRGVja2hhbmQgW0x2LiAxMjUwXSIgdGhlbiAtLSBTaGlwIERlY2toYW5kDQogICAgICAgIE1zID0gIlNoaXAgRGVja2hhbmQiDQogICAgICAgIE5hbWVRdWVzdCA9ICJTaGlwUXVlc3QxIg0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlNoaXAgRGVja2hhbmQiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEwNDAuMjkyNzI0NjA5NCwgMTI1LjA4MjkzMTUxODU1LCAzMjkxMS4wMzkwNjI1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDkyMS4xMjM2NTcyMjY1NiwgMTI1Ljk4Mzk1NTM4MzMsIDMzMDg4LjMyODEyNSkNCiAgICAgICAgaWYgKExldmVsRmFybVF1ZXN0IG9yIExldmVsRmFybU5vUXVlc3Qgb3IgU2VsZWN0TW9uc3Rlcl9RdWVzdF9GYXJtIG9yIFNlbGVjdE1vbnN0ZXJfTm9RdWVzdF9GYXJtIG9yIERldmlsTWFzdGVyeV9GYXJtKSBhbmQgKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDAgdGhlbg0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpDQogICAgICAgIGVuZA0KICAgIGVsc2VpZiBMdiA9PSAxMjc1IG9yIEx2IDw9IDEyOTkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBFbmdpbmVlciBbTHYuIDEyNzVdIiB0aGVuIC0tIFNoaXAgRW5naW5lZXINCiAgICAgICAgTXMgPSAiU2hpcCBFbmdpbmVlciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDEiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiU2hpcCBFbmdpbmVlciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTA0MC4yOTI3MjQ2MDk0LCAxMjUuMDgyOTMxNTE4NTUsIDMyOTExLjAzOTA2MjUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoODg2LjI4MTc5OTMxNjQxLCA0MC40Nzc5MDE0NTg3NCwgMzI4MDAuODMyMDMxMjUpDQogICAgICAgIGlmIChMZXZlbEZhcm1RdWVzdCBvciBMZXZlbEZhcm1Ob1F1ZXN0IG9yIFNlbGVjdE1vbnN0ZXJfUXVlc3RfRmFybSBvciBTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSBvciBEZXZpbE1hc3RlcnlfRmFybSkgYW5kIChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwIHRoZW4NCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKQ0KICAgICAgICBlbmQNCiAgICBlbHNlaWYgTHYgPT0gMTMwMCBvciBMdiA8PSAxMzI0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlNoaXAgU3Rld2FyZCBbTHYuIDEzMDBdIiB0aGVuIC0tIFNoaXAgU3Rld2FyZA0KICAgICAgICBNcyA9ICJTaGlwIFN0ZXdhcmQiDQogICAgICAgIE5hbWVRdWVzdCA9ICJTaGlwUXVlc3QyIg0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlNoaXAgU3Rld2FyZCINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoOTcxLjQyMDY1NDI5Njg4LCAxMjUuMDgyOTMxNTE4NTUsIDMzMjQ1LjU0Mjk2ODc1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDk0My44NTUwNDE1MDM5MSwgMTI5LjU4MTgzMjg4NTc0LCAzMzQ0NC4zNjcxODc1KQ0KICAgICAgICBpZiAoTGV2ZWxGYXJtUXVlc3Qgb3IgTGV2ZWxGYXJtTm9RdWVzdCBvciBTZWxlY3RNb25zdGVyX1F1ZXN0X0Zhcm0gb3IgU2VsZWN0TW9uc3Rlcl9Ob1F1ZXN0X0Zhcm0gb3IgRGV2aWxNYXN0ZXJ5X0Zhcm0pIGFuZCAoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCB0aGVuDQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSkNCiAgICAgICAgZW5kDQogICAgZWxzZWlmIEx2ID09IDEzMjUgb3IgTHYgPD0gMTM0OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJTaGlwIE9mZmljZXIgW0x2LiAxMzI1XSIgdGhlbiAtLSBTaGlwIE9mZmljZXINCiAgICAgICAgTXMgPSAiU2hpcCBPZmZpY2VyIg0KICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MiINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJTaGlwIE9mZmljZXIiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDk3MS40MjA2NTQyOTY4OCwgMTI1LjA4MjkzMTUxODU1LCAzMzI0NS41NDI5Njg3NSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg5NTUuMzg0NTgyNTE5NTMsIDE4MS4wODMzNTg3NjQ2NSwgMzMzMzEuODkwNjI1KQ0KICAgICAgICBpZiAoTGV2ZWxGYXJtUXVlc3Qgb3IgTGV2ZWxGYXJtTm9RdWVzdCBvciBTZWxlY3RNb25zdGVyX1F1ZXN0X0Zhcm0gb3IgU2VsZWN0TW9uc3Rlcl9Ob1F1ZXN0X0Zhcm0gb3IgRGV2aWxNYXN0ZXJ5X0Zhcm0pIGFuZCAoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCB0aGVuDQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSkNCiAgICAgICAgZW5kDQogICAgZWxzZWlmIEx2ID09IDEzNTAgb3IgTHYgPD0gMTM3NCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJBcmN0aWMgV2FycmlvciBbTHYuIDEzNTBdIiB0aGVuIC0tIEFyY3RpYyBXYXJyaW9yDQogICAgICAgIE1zID0gIkFyY3RpYyBXYXJyaW9yIg0KICAgICAgICBOYW1lUXVlc3QgPSAiRnJvc3RRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJBcmN0aWMgV2FycmlvciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTY2OC4xMzcyMDcwMzEzLCAyOC4yMDI1MzE4MTQ1NzUsIC02NDg0LjYwMDU4NTkzNzUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTkzNS40NTQxMDE1NjI1LCA3Ny4yNjAxNjk5ODI5MSwgLTY0NzIuNzU2ODM1OTM3NSkNCiAgICAgICAgaWYgKExldmVsRmFybVF1ZXN0IG9yIExldmVsRmFybU5vUXVlc3Qgb3IgU2VsZWN0TW9uc3Rlcl9RdWVzdF9GYXJtIG9yIFNlbGVjdE1vbnN0ZXJfTm9RdWVzdF9GYXJtIG9yIERldmlsTWFzdGVyeV9GYXJtKSBhbmQgKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDAgdGhlbg0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldygtNjUwOC41NTgxMDU0Njg4LCA4OS4wMzQ5OTYwMzI3MTUsIC0xMzIuODM5NTM4NTc0MjIpKQ0KICAgICAgICBlbmQNCiAgICBlbHNlaWYgTHYgPT0gMTM3NSBvciBMdiA8PSAxNDI0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgTHVya2VyIFtMdi4gMTM3NV0iIHRoZW4gLS0gU25vdyBMdXJrZXINCiAgICAgICAgTXMgPSAiU25vdyBMdXJrZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJGcm9zdFF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIlNub3cgTHVya2VyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NjY4LjEzNzIwNzAzMTMsIDI4LjIwMjUzMTgxNDU3NSwgLTY0ODQuNjAwNTg1OTM3NSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1NjI4LjQ4MjQyMTg3NSwgNTcuNTc0OTk2OTQ4MjQyLCAtNjYxOC4zNDgxNDQ1MzEzKQ0KICAgIGVsc2VpZiBMdiA9PSAxNDI1IG9yIEx2IDw9IDE0NDkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiU2VhIFNvbGRpZXIgW0x2LiAxNDI1XSIgdGhlbiAtLSBTZWEgU29sZGllcg0KICAgICAgICBNcyA9ICJTZWEgU29sZGllciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkZvcmdvdHRlblF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlNlYSBTb2xkaWVyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMzA1NC41ODI3NjM2NzE5LCAyMzYuODcyMTMxMzQ3NjYsIC0xMDE0Ny43OTAwMzkwNjMpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTMxODUuMDE1MzgwODU5NCwgNTguNzg5MDg5MjAyODgxLCAtOTY2My42MDY0NDUzMTI1KQ0KICAgIGVsc2VpZiBMdiA+PSAxNDUwIG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIldhdGVyIEZpZ2h0ZXIgW0x2LiAxNDUwXSIgdGhlbiAtLSBXYXRlciBGaWdodGVyDQogICAgICAgIE1zID0gIldhdGVyIEZpZ2h0ZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJGb3Jnb3R0ZW5RdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJXYXRlciBGaWdodGVyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMzA1NC41ODI3NjM2NzE5LCAyMzYuODcyMTMxMzQ3NjYsIC0xMDE0Ny43OTAwMzkwNjMpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTMyNjIuOTMwMTc1NzgxMywgMjk4LjY5MDM2ODY1MjM0LCAtMTA1NTIuNTI5Mjk2ODc1KQ0KICAgIGVuZA0KZW5kDQppZiBUaGlyZF9TZWEgdGhlbg0KICAgIGlmIEx2ID09IDE1MDAgb3IgTHYgPD0gMTUyNCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJQaXJhdGUgTWlsbGlvbmFpcmUgW0x2LiAxNTAwXSIgdGhlbiAtLSBQaXJhdGUgTWlsbGlvbmFpcmUNCiAgICAgICAgTXMgPSAiUGlyYXRlIE1pbGxpb25haXJlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiUGlyYXRlUG9ydFF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlBpcmF0ZSBNaWxsaW9uYWlyZSINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTI4OS42MTc1MjMxOTMzNiwgNDMuODE5MDExNjg4MjMyLCA1NTgwLjA5MDMzMjAzMTMpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTQzNS42ODEwOTEzMDg1OSwgMTg5LjY5ODY2OTQzMzU5LCA1NTUxLjA3NTY4MzU5MzgpDQogICAgZWxzZWlmIEx2ID09IDE1MjUgb3IgTHYgPD0gMTU3NCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJQaXN0b2wgQmlsbGlvbmFpcmUgW0x2LiAxNTI1XSIgdGhlbiAtLSBQaXN0b2wgQmlsbG9vbmFpcmUNCiAgICAgICAgTXMgPSAiUGlzdG9sIEJpbGxpb25haXJlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiUGlyYXRlUG9ydFF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIlBpc3RvbCBCaWxsaW9uYWlyZSINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTI4OS42MTc1MjMxOTMzNiwgNDMuODE5MDExNjg4MjMyLCA1NTgwLjA5MDMzMjAzMTMpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTIzNi41MzY1Mjk1NDEwMiwgMjE3LjQ2Njc2NjM1NzQyLCA2MDA2LjA4ODM3ODkwNjMpDQogICAgZWxzZWlmIEx2ID09IDE1NzUgb3IgTHYgPD0gMTU5OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJEcmFnb24gQ3JldyBXYXJyaW9yIFtMdi4gMTU3NV0iIHRoZW4gLS0gRHJhZ29uIENyZXcgV2Fycmlvcg0KICAgICAgICBNcyA9ICJEcmFnb24gQ3JldyBXYXJyaW9yIg0KICAgICAgICBOYW1lUXVlc3QgPSAiQW1hem9uUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiRHJhZ29uIENyZXcgV2FycmlvciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTgzMy4xMTQ3NDYwOTM4LCA1MS42MDQ5ODA0Njg3NSwgLTExMDMuMDY5MzM1OTM3NSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2MzAxLjk5NzU1ODU5MzgsIDEwNC43NzE1MzAxNTEzNywgLTEwODIuNjA3NTQzOTQ1MykNCiAgICBlbHNlaWYgTHYgPT0gMTYwMCBvciBMdiA8PSAxNjI0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkRyYWdvbiBDcmV3IEFyY2hlciBbTHYuIDE2MDBdIiB0aGVuIC0tIERyYWdvbiBDcmV3IEFyY2hlcg0KICAgICAgICBNcyA9ICJEcmFnb24gQ3JldyBBcmNoZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJBbWF6b25RdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJEcmFnb24gQ3JldyBBcmNoZXIiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU4MzMuMTE0NzQ2MDkzOCwgNTEuNjA0OTgwNDY4NzUsIC0xMTAzLjA2OTMzNTkzNzUpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjgzMS4xMTcxODc1LCA0NDEuNzY3MDg5ODQzNzUsIDQ0Ni41ODYxNTExMjMwNSkNCiAgICBlbHNlaWYgTHYgPT0gMTYyNSBvciBMdiA8PSAxNjQ5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkZlbWFsZSBJc2xhbmRlciBbTHYuIDE2MjVdIiB0aGVuIC0tIEZlbWFsZSBJc2xhbmRlcg0KICAgICAgICBNcyA9ICJGZW1hbGUgSXNsYW5kZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJBbWF6b25RdWVzdDIiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiRmVtYWxlIElzbGFuZGVyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NDQ2Ljg3OTM5NDUzMTMsIDYwMS42Mjk0NTU1NjY0MSwgNzQ5LjQ1NjcyNjA3NDIyKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU3OTIuNTE2NjAxNTYyNSwgODQ4LjE0MzkyMDg5ODQ0LCAxMDg0LjE4MTg4NDc2NTYpDQogICAgZWxzZWlmIEx2ID09IDE2NTAgb3IgTHYgPD0gMTY5OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJHaWFudCBJc2xhbmRlciBbTHYuIDE2NTBdIiB0aGVuIC0tIEdpYW50IElzbGFuZGVyDQogICAgICAgIE1zID0gIkdpYW50IElzbGFuZGVyIg0KICAgICAgICBOYW1lUXVlc3QgPSAiQW1hem9uUXVlc3QyIg0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIkdpYW50IElzbGFuZGVyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NDQ2Ljg3OTM5NDUzMTMsIDYwMS42Mjk0NTU1NjY0MSwgNzQ5LjQ1NjcyNjA3NDIyKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUwMDkuNTA2ODM1OTM3NSwgNjY0LjExMDcxNzc3MzQ0LCAtNDAuOTYwMTQ0MDQyOTY5KQ0KICAgIGVsc2VpZiBMdiA9PSAxNzAwIG9yIEx2IDw9IDE3MjQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIENvbW1vZG9yZSBbTHYuIDE3MDBdIiB0aGVuIC0tIE1hcmluZSBDb21tb2RvcmUNCiAgICAgICAgTXMgPSAiTWFyaW5lIENvbW1vZG9yZSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVRyZWVJc2xhbmQiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIENvbW1vZG9yZSINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjE3OS45ODgyODEyNSwgMjguNzMxMjM5MzE4ODQ4LCAtNjc0MC4wNTUxNzU3ODEzKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDIxOTguMDA2MzQ3NjU2MywgMTI4LjcxMDc1NDM5NDUzLCAtNzEwOS41MDQzOTQ1MzEzKQ0KICAgIGVsc2VpZiBMdiA9PSAxNzI1IG9yIEx2IDw9IDE3NzQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIFJlYXIgQWRtaXJhbCBbTHYuIDE3MjVdIiB0aGVuIC0tIE1hcmluZSBSZWFyIEFkbWlyYWwNCiAgICAgICAgTXMgPSAiTWFyaW5lIFJlYXIgQWRtaXJhbCINCiAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVRyZWVJc2xhbmQiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIFJlYXIgQWRtaXJhbCINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjE3OS45ODgyODEyNSwgMjguNzMxMjM5MzE4ODQ4LCAtNjc0MC4wNTUxNzU3ODEzKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDMyOTQuMzE0MjA4OTg0NCwgMzg1LjQxMTI1NDg4MjgxLCAtNzA0OC42MzQyNzczNDM4KQ0KICAgIGVsc2VpZiBMdiA9PSAxNzc1IG9yIEx2IDw9IDE3OTkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBSYWlkZXIgW0x2LiAxNzc1XSIgdGhlbiAtLSBGaXNobWFuIFJhaWRlDQogICAgICAgIE1zID0gIkZpc2htYW4gUmFpZGVyIg0KICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDMiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBSYWlkZXIiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xMDU4Mi43NTk3NjU2MjUsIDMzMS43ODg0NTIxNDg0NCwgLTg3NTcuNjY2MDE1NjI1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMDU1My4yNjg1NTQ2ODgsIDUyMS4zODQzOTk0MTQwNiwgLTgxNzYuOTQ1ODAwNzgxMykNCiAgICBlbHNlaWYgTHYgPT0gMTgwMCBvciBMdiA8PSAxODI0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gQ2FwdGFpbiBbTHYuIDE4MDBdIiB0aGVuIC0tIEZpc2htYW4gQ2FwdGFpbg0KICAgICAgICBNcyA9ICJGaXNobWFuIENhcHRhaW4iDQogICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMyINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENhcHRhaW4iDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xMDU4My4wOTk2MDkzNzUsIDMzMS43ODg0NTIxNDg0NCwgLTg3NTkuNDYzODY3MTg3NSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTA3ODkuNDAxMzY3MTg4LCA0MjcuMTg2MzcwODQ5NjEsIC05MTMxLjQ0MjM4MjgxMjUpDQogICAgZWxzZWlmIEx2ID09IDE4MjUgb3IgTHYgPD0gMTg0OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJGb3Jlc3QgUGlyYXRlIFtMdi4gMTgyNV0iIHRoZW4gLS0gRm9yZXN0IFBpcmF0ZQ0KICAgICAgICBNcyA9ICJGb3Jlc3QgUGlyYXRlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZCINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJGb3Jlc3QgUGlyYXRlIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTMyMzIuNjYyMTA5Mzc1LCAzMzIuNDAzOTYxMTgxNjQsIC03NjI2LjQ4MTkzMzU5MzgpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTEzNDg5LjM5NzQ2MDkzOCwgNDAwLjMwMzQ5NzMxNDQ1LCAtNzc3MC4yNTE5NTMxMjUpDQogICAgZWxzZWlmIEx2ID09IDE4NTAgb3IgTHYgPD0gMTg5OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJNeXRob2xvZ2ljYWwgUGlyYXRlIFtMdi4gMTg1MF0iIHRoZW4gLS0gTXl0aG9sb2dpY2FsIFBpcmF0ZQ0KICAgICAgICBNcyA9ICJNeXRob2xvZ2ljYWwgUGlyYXRlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZCINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJNeXRob2xvZ2ljYWwgUGlyYXRlIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTMyMzIuNjYyMTA5Mzc1LCAzMzIuNDAzOTYxMTgxNjQsIC03NjI2LjQ4MTkzMzU5MzgpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTEzNTA4LjYxNjIxMDkzOCwgNTgyLjQ2MjI4MDI3MzQ0LCAtNjk4NS4zMDM3MTA5Mzc1KQ0KICAgIGVsc2VpZiBMdiA9PSAxOTAwIG9yIEx2IDw9IDE5MjQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiSnVuZ2xlIFBpcmF0ZSBbTHYuIDE5MDBdIiB0aGVuIC0tIEp1bmdsZSBQaXJhdGUNCiAgICAgICAgTXMgPSAiSnVuZ2xlIFBpcmF0ZSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQyIg0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIkp1bmdsZSBQaXJhdGUiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xMjY4Mi4wOTY2Nzk2ODgsIDM5MC44ODY1MzU2NDQ1MywgLTk5MDIuMTI0MDIzNDM3NSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTIyNjcuMTAzNTE1NjI1LCA0NTkuNzUyNjI0NTExNzIsIC0xMDI3Ny4yMDAxOTUzMTMpDQogICAgZWxzZWlmIEx2ID09IDE5MjUgb3IgTHYgPD0gMTk3NCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJNdXNrZXRlZXIgUGlyYXRlIFtMdi4gMTkyNV0iIHRoZW4gLS0gTXVza2V0ZWVyIFBpcmF0ZQ0KICAgICAgICBNcyA9ICJNdXNrZXRlZXIgUGlyYXRlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDIiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiTXVza2V0ZWVyIFBpcmF0ZSINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTEyNjgyLjA5NjY3OTY4OCwgMzkwLjg4NjUzNTY0NDUzLCAtOTkwMi4xMjQwMjM0Mzc1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMzI5MS41MDc4MTI1LCA1MjAuNDczMzg4NjcxODgsIC05OTA0LjYzODY3MTg3NSkNCiAgICBlbHNlaWYgTHYgPT0gMTk3NSBvciBMdiA8PSAxOTk5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlJlYm9ybiBTa2VsZXRvbiBbTHYuIDE5NzVdIiB0aGVuDQogICAgICAgIE1zID0gIlJlYm9ybiBTa2VsZXRvbiINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDEiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiUmVib3JuIFNrZWxldG9uIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtOTQ4MC44MDc2MiwgMTQyLjEzMDY2MSwgNTU2Ni4zNzMwNSwgLTAuMDA2NTU1MDMwNTksIDQuNTI5NTQyMjVlLTA4LCAtMC45OTk5Nzg1NDIsIDIuMDQ5MjA0NzJlLTA4LCAxLCA0LjUxNjIwNjc5ZS0wOCwgMC45OTk5Nzg1NDIsIC0yLjAxOTU1Njc5ZS0wOCwgLTAuMDA2NTU1MDMwNTkpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTg3NjEuNzcxNDgsIDE4My40MzE3NDcsIDYxNjguMzMzMDEsIDAuOTc4MDczNTk3LCAtMS4zOTUwNzMyZS0wNSwgLTAuMjA4MjU5MDE2LCAtMS4wODA3MzkyNWUtMDYsIDEsIC03LjIwNjMwMjY5ZS0wNSwgMC4yMDgyNTkwMTYsIDcuMDcwODAzOTllLTA1LCAwLjk3ODA3MzU5NykNCiAgICBlbHNlaWYgTHYgPT0gMjAwMCBvciBMdiA8PSAyMDI0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkxpdmluZyBab21iaWUgW0x2LiAyMDAwXSIgdGhlbg0KICAgICAgICBNcyA9ICJMaXZpbmcgWm9tYmllIg0KICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MSINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJMaXZpbmcgWm9tYmllIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtOTQ4MC44MDc2MiwgMTQyLjEzMDY2MSwgNTU2Ni4zNzMwNSwgLTAuMDA2NTU1MDMwNTksIDQuNTI5NTQyMjVlLTA4LCAtMC45OTk5Nzg1NDIsIDIuMDQ5MjA0NzJlLTA4LCAxLCA0LjUxNjIwNjc5ZS0wOCwgMC45OTk5Nzg1NDIsIC0yLjAxOTU1Njc5ZS0wOCwgLTAuMDA2NTU1MDMwNTkpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTEwMTAzLjc1MjksIDIzOC41NjU5NzksIDYxNzkuNzU5NzcsIDAuOTk5NDc0MjI3LCAyLjc3NTQ3MTQxZS0wOCwgMC4wMzI0MjQwMzY0LCAtMi41ODAwNjMyN2UtMDgsIDEsIC02LjA2ODQ4NDc0ZS0wOCwgLTAuMDMyNDI0MDM2NCwgNS45ODE2Mzg2NWUtMDgsIDAuOTk5NDc0MjI3KQ0KICAgIGVsc2VpZiBMdiA9PSAyMDI1IG9yIEx2IDw9IDIwNDkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiRGVtb25pYyBTb3VsIFtMdi4gMjAyNV0iIHRoZW4NCiAgICAgICAgTXMgPSAiRGVtb25pYyBTb3VsIg0KICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MiINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJEZW1vbmljIFNvdWwiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC05NTE2Ljk5MzE2NDA2MjUsIDE3OC4wMDY1MTU1MDI5MywgNjA3OC40NjUzMzIwMzEzKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC05NzEyLjAzMTI1LCAyMDQuNjk1ODkyMzMzOTgsIDYxOTMuMzIyMjY1NjI1KQ0KICAgIGVsc2VpZiBMdiA9PSAyMDUwIG9yIEx2IDw9IDIwNzQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiUG9zZXNzZWQgTXVtbXkgW0x2LiAyMDUwXSIgdGhlbg0KICAgICAgICBNcyA9ICJQb3Nlc3NlZCBNdW1teSINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDIiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiUG9zZXNzZWQgTXVtbXkiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC05NTE2Ljk5MzE2NDA2MjUsIDE3OC4wMDY1MTU1MDI5MywgNjA3OC40NjUzMzIwMzEzKQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC05NTQ1Ljc3NjM2NzE4NzUsIDY5LjYxOTg5NTkzNTA1OSwgNjMzOS41NjE1MjM0Mzc1KQ0KICAgIGVsc2VpZiBMdiA9PSAyMDc1IG9yIEx2IDw9IDIwOTkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiUGVhbnV0IFNjb3V0IFtMdi4gMjA3NV0iIHRoZW4NCiAgICAgICAgTXMgPSAiUGVhbnV0IFNjb3V0Ig0KICAgICAgICBOYW1lUXVlc3QgPSAiTnV0c0lzbGFuZFF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlBlYW51dCBTY291dCINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTIxMDUuNTMxOTgsIDM3LjI0OTU5OTUsIC0xMDE5NS41MDg4LCAtMC43NjYwNjE2NjQsIDAsIC0wLjY0Mjc2NzYwOCwgMCwgMSwgMCwgMC42NDI3Njc2MDgsIDAsIC0wLjc2NjA2MTY2NCkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMjE1MC41ODc4OTA2MjUsIDEyMi40OTc2NzMwMzQ2NywgLTEwMzU4Ljk5NDE0MDYyNSkNCiAgICBlbHNlaWYgTHYgPT0gMjEwMCBvciBMdiA8PSAyMTI0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlBlYW51dCBQcmVzaWRlbnQgW0x2LiAyMTAwXSIgdGhlbg0KICAgICAgICBNcyA9ICJQZWFudXQgUHJlc2lkZW50Ig0KICAgICAgICBOYW1lUXVlc3QgPSAiTnV0c0lzbGFuZFF1ZXN0Ig0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIlBlYW51dCBQcmVzaWRlbnQiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0yMTA1LjUzMTk4LCAzNy4yNDk1OTk1LCAtMTAxOTUuNTA4OCwgLTAuNzY2MDYxNjY0LCAwLCAtMC42NDI3Njc2MDgsIDAsIDEsIDAsIDAuNjQyNzY3NjA4LCAwLCAtMC43NjYwNjE2NjQpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTIxNTAuNTg3ODkwNjI1LCAxMjIuNDk3NjczMDM0NjcsIC0xMDM1OC45OTQxNDA2MjUpDQogICAgZWxzZWlmIEx2ID09IDIxMjUgb3IgTHYgPD0gMjE0OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJJY2UgQ3JlYW0gQ2hlZiBbTHYuIDIxMjVdIiB0aGVuDQogICAgICAgIE1zID0gIkljZSBDcmVhbSBDaGVmIg0KICAgICAgICBOYW1lUXVlc3QgPSAiSWNlQ3JlYW1Jc2xhbmRRdWVzdCINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJJY2UgQ3JlYW0gQ2hlZiINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTgxOS4zNzY3MDksIDY0LjkyNTk3OTYsIC0xMDk2Ny4yODMyLCAtMC43NjYwNjE2NjQsIDAsIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAtMC42NDI3Njc2MDgsIDAsIC0wLjc2NjA2MTY2NCkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNzg5Ljk0MTUyOCwgMjA5LjM4Mjg4OSwgLTExMDA5Ljk4MDUsIC0wLjA3MDMxMDE1MzEsIC0wLCAtMC45OTc1MjUxNTYsIC0wLCAxLjAwMDAwMDEyLCAtMCwgMC45OTc1MjUyNzUsIDAsIC0wLjA3MDMxMDE0NTYpDQogICAgZWxzZWlmIEx2ID09IDIxNTAgb3IgTHYgPD0gMjE5OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJJY2UgQ3JlYW0gQ29tbWFuZGVyIFtMdi4gMjE1MF0iIHRoZW4NCiAgICAgICAgTXMgPSAiSWNlIENyZWFtIENvbW1hbmRlciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkljZUNyZWFtSXNsYW5kUXVlc3QiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiSWNlIENyZWFtIENvbW1hbmRlciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTgxOS4zNzY3MDksIDY0LjkyNTk3OTYsIC0xMDk2Ny4yODMyLCAtMC43NjYwNjE2NjQsIDAsIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAtMC42NDI3Njc2MDgsIDAsIC0wLjc2NjA2MTY2NCkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNzg5Ljk0MTUyOCwgMjA5LjM4Mjg4OSwgLTExMDA5Ljk4MDUsIC0wLjA3MDMxMDE1MzEsIC0wLCAtMC45OTc1MjUxNTYsIC0wLCAxLjAwMDAwMDEyLCAtMCwgMC45OTc1MjUyNzUsIDAsIC0wLjA3MDMxMDE0NTYpDQogICAgZWxzZWlmIEx2ID09IDIyMDAgb3IgTHYgPD0gMjIyNCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJDb29raWUgQ3JhZnRlciBbTHYuIDIyMDBdIiB0aGVuDQogICAgICAgIE1zID0gIkNvb2tpZSBDcmFmdGVyIg0KICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MSINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJDb29raWUgQ3JhZnRlciINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTIwMjIuMjk4NTgsIDM2LjkyNzU4OTQsIC0xMjAzMC45NzY2LCAtMC45NjEyNzM5MDksIDAsIC0wLjI3NTU5NDU5MiwgMCwgMSwgMCwgMC4yNzU1OTQ1OTIsIDAsIC0wLjk2MTI3MzkwOSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMjMyMS43MTIxNiwgMzYuNjk5NDgyLCAtMTIyMTYuNzg3MSwgLTAuNzgwMDc0OTU0LCAwLCAwLjYyNTY4NjEwOSwgMCwgMSwgMCwgLTAuNjI1Njg2MTA5LCAwLCAtMC43ODAwNzQ5NTQpDQogICAgZWxzZWlmIEx2ID09IDIyMjUgb3IgTHYgPD0gMjI0OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJDYWtlIEd1YXJkIFtMdi4gMjIyNV0iIHRoZW4NCiAgICAgICAgTXMgPSAiQ2FrZSBHdWFyZCINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDEiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiQ2FrZSBHdWFyZCINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLTIwMjIuMjk4NTgsIDM2LjkyNzU4OTQsIC0xMjAzMC45NzY2LCAtMC45NjEyNzM5MDksIDAsIC0wLjI3NTU5NDU5MiwgMCwgMSwgMCwgMC4yNzU1OTQ1OTIsIDAsIC0wLjk2MTI3MzkwOSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTQxOC4xMTAxMSwgMzYuNjcxODk0MSwgLTEyMjU1LjczMjQsIDAuMDY3Nzg0NDg4MiwgMCwgMC45OTc3MDAwMzYsIDAsIDEsIDAsIC0wLjk5NzcwMDAzNiwgMCwgMC4wNjc3ODQ0ODgyKQ0KICAgIGVsc2VpZiBMdiA9PSAyMjUwIG9yIEx2IDw9IDIyNzQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiQmFraW5nIFN0YWZmIFtMdi4gMjI1MF0iIHRoZW4NCiAgICAgICAgTXMgPSAiQmFraW5nIFN0YWZmIg0KICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MiINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJCYWtpbmcgU3RhZmYiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xOTI4LjMxNzYzLCAzNy43Mjk2NjM4LCAtMTI4NDAuNjI2LCAwLjk1MTA2ODQwMSwgLTAsIC0wLjMwODk4MDQ2NSwgMCwgMSwgLTAsIDAuMzA4OTgwNDY1LCAwLCAwLjk1MTA2ODQwMSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTk4MC40Mzg0OCwgMzYuNjcxNjc2NiwgLTEyOTgzLjg0MTgsIC0wLjI1NDQ0Mzc2NSwgMCwgLTAuOTY3MDg3NTY3LCAwLCAxLCAwLCAwLjk2NzA4NzU2NywgMCwgLTAuMjU0NDQzNzY1KQ0KICAgIGVsc2VpZiBMdiA9PSAyMjc1IG9yIEx2IDw9IDIyOTkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiSGVhZCBCYWtlciBbTHYuIDIyNzVdIiB0aGVuDQogICAgICAgIE1zID0gIkhlYWQgQmFrZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QyIg0KICAgICAgICBRdWVzdEx2ID0gMg0KICAgICAgICBOYW1lTW9uID0gIkhlYWQgQmFrZXIiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xOTI4LjMxNzYzLCAzNy43Mjk2NjM4LCAtMTI4NDAuNjI2LCAwLjk1MTA2ODQwMSwgLTAsIC0wLjMwODk4MDQ2NSwgMCwgMSwgLTAsIDAuMzA4OTgwNDY1LCAwLCAwLjk1MTA2ODQwMSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMjI1MS41NzkxLCA1Mi4yNzE0NjE1LCAtMTMwMzMuMzk2NSwgLTAuOTkxOTcxMDE2LCAwLCAtMC4xMjY0NjYwOTUsIDAsIDEsIDAsIDAuMTI2NDY2MDk1LCAwLCAtMC45OTE5NzEwMTYpDQogICAgZWxzZWlmIEx2ID09IDIzMDAgb3IgTHYgPD0gMjMyNCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJDb2NvYSBXYXJyaW9yIFtMdi4gMjMwMF0iIHRoZW4NCiAgICAgICAgTXMgPSAiQ29jb2EgV2FycmlvciINCiAgICAgICAgTmFtZVF1ZXN0ID0iQ2hvY1F1ZXN0MSINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJDb2NvYSBXYXJyaW9yIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMzEuNzUsIDIzLjkwMDMwMjksIC0xMjIwMC4yOTIsIC0xLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAtMSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxNjcuOTc4NTE2LCAyNi4yMjU0NjU4LCAtMTIyMzguODc0LCAtMC45Mzk3MDA5NjEsIDAsIDAuMzQxOTk4MzY5LCAwLCAxLCAwLCAtMC4zNDE5OTgzNjksIDAsIC0wLjkzOTcwMDk2MSkNCiAgICBlbHNlaWYgTHYgPT0gMjMyNSBvciBMdiA8PSAyMzQ5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciBbTHYuIDIzMjVdIiB0aGVuDQogICAgICAgIE1zID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDEiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMzEuNzUsIDIzLjkwMDMwMjksIC0xMjIwMC4yOTIsIC0xLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAtMSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg3MDEuMzEyMDczLCAyNS41ODI0OTg2LCAtMTI3MDguMjE0OCwgLTAuMzQyMDQyNjg1LCAwLCAtMC45Mzk2ODQzOTEsIDAsIDEsIDAsIDAuOTM5Njg0MzkxLCAwLCAtMC4zNDIwNDI2ODUpDQogICAgZWxzZWlmIEx2ID09IDIzNTAgb3IgTHYgPD0gMjM3NCBvciBfRy5TZWxlY3RNb25zdGVyID09ICJTd2VldCBUaGllZiBbTHYuIDIzNTBdIiB0aGVuDQogICAgICAgIE1zID0gIlN3ZWV0IFRoaWVmIg0KICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MiINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJTd2VldCBUaGllZiINCiAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTUxLjE5ODI0MiwgMjMuODkwNzE0NiwgLTEyNzc0LjYxNzIsIDAuNDIyNTkyOTk4LCAwLCAwLjkwNjMxOTYxOCwgMCwgMSwgMCwgLTAuOTA2MzE5NjE4LCAwLCAwLjQyMjU5Mjk5OCkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTQwLjI1ODMwMSwgMjUuNTgyNDk4NiwgLTEyNjUyLjMxMTUsIDAuMTczNjI0MzM3LCAtMCwgLTAuOTg0ODExOTAyLCAwLCAxLCAtMCwgMC45ODQ4MTE5MDIsIDAsIDAuMTczNjI0MzM3KQ0KICAgIGVsc2VpZiBMdiA9PSAyMzc1IG9yIEx2IDw9IDI0MDAgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiQ2FuZHkgUmViZWwgW0x2LiAyMzc1XSIgdGhlbg0KICAgICAgICBNcyA9ICJDYW5keSBSZWJlbCINCiAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDIiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiQ2FuZHkgUmViZWwiDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDE1MS4xOTgyNDIsIDIzLjg5MDcxNDYsIC0xMjc3NC42MTcyLCAwLjQyMjU5Mjk5OCwgMCwgMC45MDYzMTk2MTgsIDAsIDEsIDAsIC0wLjkwNjMxOTYxOCwgMCwgMC40MjI1OTI5OTgpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDcuOTIzMTQ1MywgMjUuNTgyNDk4NiwgLTEzMDI5LjI0MDIsIC0wLjgxOTE1NjA1MSwgMCwgLTAuNTczNTcxMjY1LCAwLCAxLCAwLCAwLjU3MzU3MTI2NSwgMCwgLTAuODE5MTU2MDUxKQ0KICAgIGVsc2VpZiBMdiA9PSAyNDAwIG9yIEx2IDw9IDI0MjQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiQ2FuZHkgUGlyYXRlIFtMdi4gMjQwMF0iIHRoZW4NCiAgICAgICAgTXMgPSAiQ2FuZHkgUGlyYXRlIg0KICAgICAgICBOYW1lUXVlc3QgPSAiQ2FuZHlRdWVzdDEiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiQ2FuZHkgUGlyYXRlIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTE0OS4zMjgsIDEzLjU3NTkwMzksIC0xNDQ0NS42MTQzLCAtMC4xNTY0NDYwOTksIDAsIC0wLjk4NzY4NjU3NCwgMCwgMSwgMCwgMC45ODc2ODY1NzQsIDAsIC0wLjE1NjQ0NjA5OSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTQzNy41NjM0OCwgMTcuMTQ4MTI4NSwgLTE0Mzg1LjY5MzQsIDAuMTczNjI0MzM3LCAtMCwgLTAuOTg0ODExOTAyLCAwLCAxLCAtMCwgMC45ODQ4MTE5MDIsIDAsIDAuMTczNjI0MzM3KQ0KICAgIGVsc2VpZiBMdiA9PSAyNDI1IG9yIEx2IDw9IDI0NDkgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiU25vdyBEZW1vbiBbTHYuIDI0MjVdIiB0aGVuDQogICAgICAgIE1zID0gIlNub3cgRGVtb24iDQogICAgICAgIE5hbWVRdWVzdCA9ICJDYW5keVF1ZXN0MSINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJTbm93IERlbW9uIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTE0OS4zMjgsIDEzLjU3NTkwMzksIC0xNDQ0NS42MTQzLCAtMC4xNTY0NDYwOTksIDAsIC0wLjk4NzY4NjU3NCwgMCwgMSwgMCwgMC45ODc2ODY1NzQsIDAsIC0wLjE1NjQ0NjA5OSkNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtOTE2LjIyMjY1NiwgMTcuMTQ4MTI4NSwgLTE0NjM4LjgxMjUsIDAuODY2MDA3MjY4LCAwLCAwLjUwMDAzMTQxMiwgMCwgMSwgMCwgLTAuNTAwMDMxNDEyLCAwLCAwLjg2NjAwNzI2OCkNCg0KICAgIGVsc2VpZiBMdiA9PSAyNDUwIG9yIEx2IDw9IDI0NzQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiSXNsZSBPdXRsYXcgW0x2LiAyNDUwXSIgdGhlbg0KICAgICAgICBNcyA9ICJJc2xlIE91dGxhdyINCiAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDEiDQogICAgICAgIFF1ZXN0THYgPSAxDQogICAgICAgIE5hbWVNb24gPSAiSXNsZSBPdXRsYXciDQogICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0xNjU0OC44MTY0LCA1NS42MDU5OTE0LCAtMTcyLjgxMjUsIDAuMjEzMDkyNTY2LCAtMCwgLTAuOTc3MDMyMDA2LCAwLCAxLCAtMCwgMC45NzcwMzIwMDYsIDAsIDAuMjEzMDkyNTY2KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xNjEyMi40MDYyLCAxMC42MzI4MTczLCAtMjU3LjM1MTY4NSwgLTAuNjMwMDI5MDgyLCAwLCAwLjc3NjU3MTYzMSwgMCwgMSwgMCwgLTAuNzc2NTcxNjMxLCAwLCAtMC42MzAwMjkwODIpDQogICAgZWxzZWlmIEx2ID09IDI0NzUgb3IgTHYgPD0gMjQ5OSBvciBfRy5TZWxlY3RNb25zdGVyID09ICJJc2xhbmQgQm95IFsyNDc1XSIgdGhlbg0KICAgICAgICBNcyA9ICJJc2xhbmQgQm95Ig0KICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MSINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJJc2xhbmQgQm95Ig0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTY1NDguODE2NCwgNTUuNjA1OTkxNCwgLTE3Mi44MTI1LCAwLjIxMzA5MjU2NiwgLTAsIC0wLjk3NzAzMjAwNiwgMCwgMSwgLTAsIDAuOTc3MDMyMDA2LCAwLCAwLjIxMzA5MjU2NikNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTY3MzYuMjI2NiwgMjAuNTMzOTQ3LCAtMTMxLjcxODgxMSwgMC41NDYzOTM2OTIsIDAsIDAuODM3NTI4NDY3LCAwLCAxLCAwLCAtMC44Mzc1Mjg0NjcsIDAsIDAuNTQ2MzkzNjkyKQ0KICAgIGVsc2VpZiBMdiA9PSAyNTAwIG9yIEx2IDw9IDI1MjQgb3IgX0cuU2VsZWN0TW9uc3RlciA9PSAiU3VuLWtpc3NlZCBXYXJyaW9yIFtMdi4gMjUwMF0iIHRoZW4NCiAgICAgICAgTXMgPSAiU3VuLWtpc3NlZCBXYXJyaW9yIg0KICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MiINCiAgICAgICAgUXVlc3RMdiA9IDENCiAgICAgICAgTmFtZU1vbiA9ICJTdW4tIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTY1NDEuMDIxNSwgNTQuNzcwODEzLCAxMDUxLjQ2MTE4LCAwLjA0MTA3NTcwNjUsIC0wLCAtMC45OTkxNTYwNTgsIDAsIDEsIC0wLCAwLjk5OTE1NjA1OCwgMCwgMC4wNDEwNzU3MDY1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xNjQxMy41MDc4LCA1NC42MzUwNDc5LCAxMDU0LjQzNTU1LCAtMC45OTkzOTE5MTMsIDAsIC0wLjAzNDg2ODc4OCwgMCwgMSwgMCwgMC4wMzQ4Njg3ODgsIDAsIC0wLjk5OTM5MTkxMykNCiAgICBlbHNlaWYgTHYgPT0gMjUyNSBvciBMdiA8PSAyNTQ5IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIklzbGUgQ2hhbXBpb24gW0x2LiAyNTI1XSIgdGhlbg0KICAgICAgICBNcyA9ICJJc2xlIENoYW1waW9uIg0KICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MiINCiAgICAgICAgUXVlc3RMdiA9IDINCiAgICAgICAgTmFtZU1vbiA9ICJJc2xlIENoYW1waW9uIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTY1NDEuMDIxNSwgNTQuNzcwODEzLCAxMDUxLjQ2MTE4LCAwLjA0MTA3NTcwNjUsIC0wLCAtMC45OTkxNTYwNTgsIDAsIDEsIC0wLCAwLjk5OTE1NjA1OCwgMCwgMC4wNDEwNzU3MDY1KQ0KICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xNjc4Ny4zMjAzLCAyMC42MzUwNTE3LCA5OTIuMTMxODM2LCAtMC43NzU0NzEwOTEsIDAsIDAuNjMxMzgzMTIxLCAwLCAxLCAwLCAtMC42MzEzODMxMjEsIDAsIC0wLjc3NTQ3MTA5MSkNCiAgICBlbHNlaWYgTHYgPT0gMjU1MCBvciBMdiA8PSAyNTc0IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlNlcnBlbnQgSHVudGVyIFtMdi4gMjU1MF0iIHRoZW4NCiAgICAgICAgTXMgPSAiU2VycGVudCBIdW50ZXIiDQogICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QzIg0KICAgICAgICBRdWVzdEx2ID0gMQ0KICAgICAgICBOYW1lTW9uID0gIlNlcnBlbnQgSHVudGVyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTY2NjUuMTkxNCwgMTA0LjU5NjQwNSwgMTU3OS42OTQzNCwgMC45NTEwNjg0MDEsIC0wLCAtMC4zMDg5ODA0NjUsIDAsIDEsIC0wLCAwLjMwODk4MDQ2NSwgMCwgMC45NTEwNjg0MDEpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE2NjU0Ljc3NTQsIDEwNS4yODYyMzIsIDE1NzkuNjc0NDQsIDAuOTk5MDk2NzUxLCA0LjQ1OTM0NDg5ZS0wOCwgMC4wNDI0OTI4ODE0LCAtNC4zODgyMjY2N2UtMDgsIDEsIC0xLjc2NjkyODQ3ZS0wOCwgLTAuMDQyNDkyODgxNCwgMS41Nzg4NjQxNWUtMDgsIDAuOTk5MDk2NzUxKQ0KICAgIGVsc2VpZiBMdiA+PSAyNTc1IG9yIF9HLlNlbGVjdE1vbnN0ZXIgPT0gIlNrdWxsIFNsYXllciBbTHYuIDI1NzVdIiB0aGVuDQogICAgICAgIE1zID0gIlNrdWxsIFNsYXllciINCiAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDMiDQogICAgICAgIFF1ZXN0THYgPSAyDQogICAgICAgIE5hbWVNb24gPSAiU2t1bGwgU2xheWVyIg0KICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtMTY2NjUuMTkxNCwgMTA0LjU5NjQwNSwgMTU3OS42OTQzNCwgMC45NTEwNjg0MDEsIC0wLCAtMC4zMDg5ODA0NjUsIDAsIDEsIC0wLCAwLjMwODk4MDQ2NSwgMCwgMC45NTEwNjg0MDEpDQogICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE2NjU0Ljc3NTQsIDEwNS4yODYyMzIsIDE1NzkuNjc0NDQsIDAuOTk5MDk2NzUxLCA0LjQ1OTM0NDg5ZS0wOCwgMC4wNDI0OTI4ODE0LCAtNC4zODgyMjY2N2UtMDgsIDEsIC0xLjc2NjkyODQ3ZS0wOCwgLTAuMDQyNDkyODgxNCwgMS41Nzg4NjQxNWUtMDgsIDAuOTk5MDk2NzUxKQ0KICAgIGVuZA0KZW5kDQplbmQNCg0KLS0vLyBTZWxlY3QgTW9uc3Rlcg0KaWYgRmlyc3RfU2VhIHRoZW4NCnRhYmxlTW9uID0geyJCYW5kaXQgW0x2LiA1XSIsIk1vbmtleSBbTHYuIDE0XSIsIkdvcmlsbGEgW0x2LiAyMF0iLCJQaXJhdGUgW0x2LiAzNV0iLCJCcnV0ZSBbTHYuIDQ1XSIsIkRlc2VydCBCYW5kaXQgW0x2LiA2MF0iLCJEZXNlcnQgT2ZmaWNlciBbTHYuIDcwXSIsIlNub3cgQmFuZGl0IFtMdi4gOTBdIiwiU25vd21hbiBbTHYuIDEwMF0iLCJDaGllZiBQZXR0eSBPZmZpY2VyIFtMdi4gMTIwXSIsIlNreSBCYW5kaXQgW0x2LiAxNTBdIiwiRGFyayBNYXN0ZXIgW0x2LiAxNzVdIiwiUHJpc29uZXIgW0x2LiAxOTBdIiwgIkRhbmdlcm91cyBQcmlzb25lciBbTHYuIDIxMF0iLCJUb2dhIFdhcnJpb3IgW0x2LiAyNTBdIiwiR2xhZGlhdG9yIFtMdi4gMjc1XSIsIk1pbGl0YXJ5IFNvbGRpZXIgW0x2LiAzMDBdIiwiTWlsaXRhcnkgU3B5IFtMdi4gMzI1XSIsIkZpc2htYW4gV2FycmlvciBbTHYuIDM3NV0iLCJGaXNobWFuIENvbW1hbmRvIFtMdi4gNDAwXSIsIkdvZCdzIEd1YXJkIFtMdi4gNDUwXSIsIlNoYW5kYSBbTHYuIDQ3NV0iLCJSb3lhbCBTcXVhZCBbTHYuIDUyNV0iLCJSb3lhbCBTb2xkaWVyIFtMdi4gNTUwXSIsIkdhbGxleSBQaXJhdGUgW0x2LiA2MjVdIiwiR2FsbGV5IENhcHRhaW4gW0x2LiA2NTBdIn0NCmVsc2VpZiBTZWNvbmRfU2VhIHRoZW4NCnRhYmxlTW9uID0geyJSYWlkZXIgW0x2LiA3MDBdIiwiTWVyY2VuYXJ5IFtMdi4gNzI1XSIsIlN3YW4gUGlyYXRlIFtMdi4gNzc1XSIsIkZhY3RvcnkgU3RhZmYgW0x2LiA4MDBdIiwiTWFyaW5lIExpZXV0ZW5hbnQgW0x2LiA4NzVdIiwiTWFyaW5lIENhcHRhaW4gW0x2LiA5MDBdIiwiWm9tYmllIFtMdi4gOTUwXSIsIlZhbXBpcmUgW0x2LiA5NzVdIiwiU25vdyBUcm9vcGVyIFtMdi4gMTAwMF0iLCJXaW50ZXIgV2FycmlvciBbTHYuIDEwNTBdIiwiTGFiIFN1Ym9yZGluYXRlIFtMdi4gMTEwMF0iLCJIb3JuZWQgV2FycmlvciBbTHYuIDExMjVdIiwiTWFnbWEgTmluamEgW0x2LiAxMTc1XSIsIkxhdmEgUGlyYXRlIFtMdi4gMTIwMF0iLCJTaGlwIERlY2toYW5kIFtMdi4gMTI1MF0iLCJTaGlwIEVuZ2luZWVyIFtMdi4gMTI3NV0iLCJTaGlwIFN0ZXdhcmQgW0x2LiAxMzAwXSIsIlNoaXAgT2ZmaWNlciBbTHYuIDEzMjVdIiwiQXJjdGljIFdhcnJpb3IgW0x2LiAxMzUwXSIsIlNub3cgTHVya2VyIFtMdi4gMTM3NV0iLCJTZWEgU29sZGllciBbTHYuIDE0MjVdIiwiV2F0ZXIgRmlnaHRlciBbTHYuIDE0NTBdIn0NCmVsc2VpZiBUaGlyZF9TZWEgdGhlbg0KdGFibGVNb24gPSB7IlBpcmF0ZSBNaWxsaW9uYWlyZSBbTHYuIDE1MDBdIiwiRHJhZ29uIENyZXcgV2FycmlvciBbTHYuIDE1NzVdIiwiRHJhZ29uIENyZXcgQXJjaGVyIFtMdi4gMTYwMF0iLCJGZW1hbGUgSXNsYW5kZXIgW0x2LiAxNjI1XSIsIkdpYW50IElzbGFuZGVyIFtMdi4gMTY1MF0iLCJNYXJpbmUgQ29tbW9kb3JlIFtMdi4gMTcwMF0iLCJNYXJpbmUgUmVhciBBZG1pcmFsIFtMdi4gMTcyNV0iLCJGaXNobWFuIFJhaWRlciBbTHYuIDE3NzVdIiwiRmlzaG1hbiBDYXB0YWluIFtMdi4gMTgwMF0iLCJGb3Jlc3QgUGlyYXRlIFtMdi4gMTgyNV0iLCJNeXRob2xvZ2ljYWwgUGlyYXRlIFtMdi4gMTg1MF0iLCJKdW5nbGUgUGlyYXRlIFtMdi4gMTkwMF0iLCJNdXNrZXRlZXIgUGlyYXRlIFtMdi4gMTkyNV0iLCJSZWJvcm4gU2tlbGV0b24gW0x2LiAxOTc1XSIsIkxpdmluZyBab21iaWUgW0x2LiAyMDAwXSIsIkRlbW9uaWMgU291bCBbTHYuIDIwMjVdIiwiUG9zZXNzZWQgTXVtbXkgW0x2LiAyMDUwXSIsICJQZWFudXQgU2NvdXQgW0x2LiAyMDc1XSIsICJQZWFudXQgUHJlc2lkZW50IFtMdi4gMjEwMF0iLCAiSWNlIENyZWFtIENoZWYgW0x2LiAyMTI1XSIsICJJY2UgQ3JlYW0gQ29tbWFuZGVyIFtMdi4gMjE1MF0iLCAiQ29va2llIENyYWZ0ZXIgW0x2LiAyMjAwXSIsICJDYWtlIEd1YXJkIFtMdi4gMjIyNV0iLCAiQmFraW5nIFN0YWZmIFtMdi4gMjI1MF0iLCAiSGVhZCBCYWtlciBbTHYuIDIyNzVdIiwgIkNvY29hIFdhcnJpb3IgW0x2LiAyMzAwXSIsICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIgW0x2LiAyMzI1XSIsICJTd2VldCBUaGllZiBbTHYuIDIzNTBdIiwgIkNhbmR5IFJlYmVsIFtMdi4gMjM3NV0iLCAiQ2FuZHkgUGlyYXRlIFtMdi4gMjQwMF0iLCAiU25vdyBEZW1vbiBbTHYuIDI0MjVdIiwNCiAgICAiSXNsZSBPdXRsYXcgW0x2LiAyNDUwXSIsICJJc2xhbmQgQm95IFsyNDc1XSIsICJTdW4ta2lzc2VkIFdhcnJpb3IgW0x2LiAyNTAwXSIsICJJc2xlIENoYW1waW9uIFtMdi4gMjUyNV0iLCAiU2VycGVudCBIdW50ZXIgW0x2LiAyNTUwXSIsICJTa3VsbCBTbGF5ZXIgW0x2LiAyNTc1XSINCn0NCmVuZA0KDQotLS8vIENoZWNrIEJvc3MgUXVlc3QNCmZ1bmN0aW9uIENoZWNrQm9zc1F1ZXN0KCkNCmlmIEZpcnN0X1NlYSB0aGVuDQogICAgaWYgU2VsZWN0Qm9zcyA9PSAiVGhlIEdvcmlsbGEgS2luZyIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIlRoZSBHb3JpbGxhIEtpbmcgW0x2LiAyNV0gW0Jvc3NdIg0KICAgICAgICBOYW1lQm9zcyA9ICdUaGUgR29ycmlsYSBLaW5nJw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkp1bmdsZVF1ZXN0Ig0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDMNCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMiwwMDBcbjcsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKQ0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtMTA4OC43NTk3NywgOC4xMzQ2Mzc4MywgLTQ4OC41NTk5MDYsIC0wLjcwNzEzNDI0NywgMCwgMC43MDcwNzkyOTEsIDAsIDEsIDAsIC0wLjcwNzA3OTI5MSwgMCwgLTAuNzA3MTM0MjQ3KQ0KICAgIGVsc2VpZiBTZWxlY3RCb3NzID09ICJCb2JieSIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIkJvYmJ5IFtMdi4gNTVdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnQm9iYnknDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiQnVnZ3lRdWVzdDEiDQogICAgICAgIFF1ZXN0THZCb3NzID0gMw0KICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ4LDAwMFxuMzUsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtMTE0MC4xNzYxNDc0NjA5LCA0Ljc1MjA0OTQ0NjEwNiwgMzgyNy40MDU3NjE3MTg4KQ0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtMTA4Ny4zNzYwOTg2MzI4LCA0Ni45NDk0MDk0ODQ4NjMsIDQwNDAuMTQ2MjQwMjM0NCkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiVGhlIFNhdyIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIlRoZSBTYXcgW0x2LiAxMDBdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnVGhlIFNhdycNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLTc4NC44OTcxNTU3NjE3MiwgNzIuNDI3MzgzNDIyODUyLCAxNjAzLjU4MjI3NTM5MDYpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIllldGkiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJZZXRpIFtMdi4gMTEwXSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ1lldGknDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiU25vd1F1ZXN0Ig0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDMNCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTAsMDAwXG4xODAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygxMzg2LjgwNzM3MzA0NjksIDg3LjI3Mjc4OTAwMTQ2NSwgLTEyOTguMzU3NjY2MDE1NikNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMTIxOC43OTU2NTQyOTY5LCAxMzguMDExODQwODIwMzEsIC0xNDg4LjAyNjI0NTExNzIpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIk1vYiBMZWFkZXIiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJNb2IgTGVhZGVyIFtMdi4gMTIwXSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ01vYiBMZWFkZXInDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0yODQ0LjczMDcxMjg5MDYsIDcuNDE4MDUwMjg5MTU0MSwgNTM1Ni42NzIzNjMyODEzKQ0KICAgIGVsc2VpZiBTZWxlY3RCb3NzID09ICJWaWNlIEFkbWlyYWwiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJWaWNlIEFkbWlyYWwgW0x2LiAxMzBdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnVmljZSBBZG1pcmFsJw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIk1hcmluZVF1ZXN0MiINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAyDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEwLDAwMFxuMTgwLDAwMCBFeHAuIg0KICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLTUwMzYuMjQ2NTgyMDMxMywgMjguNjc3ODM1NDY0NDc4LCA0MzI0LjU2NjQwNjI1KQ0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtNTAwNi41NDU0MTAxNTYzLCA4OC4wMzIwODE2MDQwMDQsIDQzNTMuMTYyMTA5Mzc1KQ0KICAgIGVsc2VpZiBTZWxlY3RCb3NzID09ICJTYWJlciBFeHBlcnQiIHRoZW4NCiAgICAgICAgTmFtZUJvc3MgPSAnU2FiZXIgRXhwZXJ0Jw0KICAgICAgICBCb3NzTW9uID0gIlNhYmVyIEV4cGVydCBbTHYuIDIwMF0gW0Jvc3NdIg0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtMTQ1OC44OTUwMiwgMjkuODg3MDMzNSwgLTUwLjYzMzU2NCkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiV2FyZGVuIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiV2FyZGVuIFtMdi4gMjIwXSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ1dhcmRlbicNCiAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJbXBlbFF1ZXN0Ig0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDENCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kNiwwMDBcbjg1MCwwMDAgRXhwLiINCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTI3OC4wNDkzMiwgMi4xNTE2NzQ3NSwgOTQ0LjEwMTkyOSwgMC4yMjA1NDY5NjEsIC00LjQ5OTQ2NDAxZS0wNiwgMC45NzUzNzY0MjcsIC0xLjk1NDEyNTc2ZS0wNSwgMSwgOS4wMzE2MjA3MmUtMDYsIC0wLjk3NTM3NjQyNywgLTIuMTA1MTk3NTZlLTA1LCAwLjIyMDU0Njk2MSkNCiAgICAgICAgQ0ZyYW1lUUJvc3M9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLTAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLTAuNjgxOTY1MTcyLCAwLCAtMC43MzEzODQ2MzUpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIkNoaWVmIFdhcmRlbiIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIkNoaWVmIFdhcmRlbiBbTHYuIDIzMF0gW0Jvc3NdIg0KICAgICAgICBOYW1lQm9zcyA9ICdDaGllZiBXYXJkZW4nDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSW1wZWxRdWVzdCINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAyDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEwLDAwMFxuMSwwMDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUyMDYuOTI1NzgsIDAuOTk3NzUzMzgyLCA4MTQuOTc2NzQ2LCAwLjM0MjA0MTM0MywgLTAuMDAwNjI5MTU2NzcsIDAuOTM5Njg0NzQ5LCAwLjAwMTkxNjQ1Mzk0LCAwLjk5OTk5ODE1MiwgLTIuODA0MjIzMzdlLTA1LCAtMC45Mzk2ODI5NjEsIDAuMDAxODEwNDU0MDYsIDAuMzQyMDQxOTM5KQ0KICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLTAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLTAuNjgxOTY1MTcyLCAwLCAtMC43MzEzODQ2MzUpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIlN3YW4iIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJTd2FuIFtMdi4gMjQwXSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ1N3YW4nDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSW1wZWxRdWVzdCINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAzDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuMSw2MDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUzMjUuMDk2MTksIDcuMDM5MDY1ODQsIDcxOS41NzA2NzksIC0wLjMwOTA2MDgxMiwgMCwgMC45NTEwNDIyMzUsIDAsIDEsIDAsIC0wLjk1MTA0MjIzNSwgMCwgLTAuMzA5MDYwODEyKQ0KICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLTAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLTAuNjgxOTY1MTcyLCAwLCAtMC43MzEzODQ2MzUpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIk1hZ21hIEFkbWlyYWwiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJNYWdtYSBBZG1pcmFsIFtMdi4gMzUwXSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ01hZ21hIEFkbWlyYWwnDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFnbWFRdWVzdCINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAzDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuMiw4MDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtNTMxNC42MjIwNzAzMTI1LCAxMi4yNjI0MjA2NTQyOTcsIDg1MTcuMjc5Mjk2ODc1KQ0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtNTc2NS44OTY5NzI2NTYzLCA4Mi45MjA2NDY2Njc0OCwgODcxOC4zMDQ2ODc1KQ0KICAgIGVsc2VpZiBTZWxlY3RCb3NzID09ICJGaXNobWFuIExvcmQiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJGaXNobWFuIExvcmQgW0x2LiA0MjVdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnRmlzaG1hbiBMb3JkJw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkZpc2htYW5RdWVzdCINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAzDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuNCwwMDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg2MTEyMi42NTIzNDM3NSwgMTguNDk3NDQyMjQ1NDgzLCAxNTY5LjM5OTc4MDI3MzQpDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDYxMjYwLjE1MjM0Mzc1LCAzMC45NTA4ODE5NTgwMDgsIDExOTMuNDMyOTgzMzk4NCkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiV3lzcGVyIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiV3lzcGVyIFtMdi4gNTAwXSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ1d5c3BlcicNCiAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJTa3lFeHAxUXVlc3QiDQogICAgICAgIFF1ZXN0THZCb3NzID0gMw0KICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjQsODAwLDAwMCBFeHAuIg0KICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLTc4NjEuOTQ3MjY1NjI1LCA1NTQ1LjUxNzU3ODEyNSwgLTM3OS44NTk3NDEyMTA5NCkNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLTc4NjYuMTMzMzAwNzgxMywgNTU3Ni40MzExNTIzNDM4LCAtNTQ2Ljc0ODE2ODk0NTMxKQ0KICAgIGVsc2VpZiBTZWxlY3RCb3NzID09ICJUaHVuZGVyIEdvZCIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIlRodW5kZXIgR29kIFtMdi4gNTc1XSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ1RodW5kZXIgR29kJw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIlNreUV4cDJRdWVzdCINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAzDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIwLDAwMFxuNSw4MDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtNzkwMy4zODI4MTI1LCA1NjM1Ljk4OTc0NjA5MzgsIC0xNDEwLjkyMzgyODEyNSkNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLTc5OTQuOTg0Mzc1LCA1NzYxLjAyNTM5MDYyNSwgLTIwODguNjQ3OTQ5MjE4OCkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiQ3lib3JnIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiQ3lib3JnIFtMdi4gNjc1XSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ0N5Ym9yZycNCiAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGb3VudGFpblF1ZXN0Ig0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDMNCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG43LDUwMCwwMDAgRXhwLiINCiAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSkNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNjA5NC4wMjQ5MDIzNDM4LCA3My43NzAwNTAwNDg4MjgsIDM4MjUuNzM0ODYzMjgxMykNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiSWNlIEFkbWlyYWwiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJJY2UgQWRtaXJhbCBbTHYuIDcwMF0gW0Jvc3NdIg0KICAgICAgICBOYW1lQm9zcyA9ICdJY2UgQWRtaXJhbCcNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMTI2Ni4wODk0OCwgMjYuMTc1Nzk0NiwgLTEzOTkuNTc2NzgsIC0wLjU3MzU5OTIxOSwgMCwgLTAuODE5MTM2NTYsIDAsIDEsIDAsIDAuODE5MTM2NTYsIDAsIC0wLjU3MzU5OTIxOSkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiR3JleWJlYXJkIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiR3JleWJlYXJkIFtMdi4gNzUwXSBbUmFpZCBCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnR3JleWJlYXJkJw0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtNTA4MS4zNDUyMTQ4NDM4LCA4NS4yMjE2NDE1NDA1MjcsIDQyNTcuMzU4ODg2NzE4OCkNCiAgICBlbmQNCmVuZA0KaWYgU2Vjb25kX1NlYSB0aGVuDQogICAgaWYgU2VsZWN0Qm9zcyA9PSAiRGlhbW9uZCIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIkRpYW1vbmQgW0x2LiA3NTBdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnRGlhbW9uZCcNCiAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJBcmVhMVF1ZXN0Ig0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDMNCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG45LDAwMCwwMDAgRXhwLiINCiAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC00MjcuNTY2NjgwOTA4MiwgNzMuMzEzNzgxNzM4MjgxLCAxODM1LjQyMDg5ODQzNzUpDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0xNTc2LjcxNjY3NDgwNDcsIDE5OC41OTI2NTEzNjcxOSwgMTMuNzI0Mjg2MDc5NDA3KQ0KICAgIGVsc2VpZiBTZWxlY3RCb3NzID09ICJKZXJlbXkiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJKZXJlbXkgW0x2LiA4NTBdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnSmVyZW15Jw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkFyZWEyUXVlc3QiDQogICAgICAgIFF1ZXN0THZCb3NzID0gMw0KICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyNSwwMDBcbjExLDUwMCwwMDAgRXhwLiINCiAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDYzNi43OTk0Mzg0NzY1NiwgNzMuNDEzNzg3ODQxNzk3LCA5MTguMDA0MTUwMzkwNjMpDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDIwMDYuOTI2MTQ3NDYwOSwgNDQ4Ljk1NjY2NTAzOTA2LCA4NTMuOTgyODQ5MTIxMDkpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIkZhaml0YSIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIkZhaml0YSBbTHYuIDkyNV0gW0Jvc3NdIg0KICAgICAgICBOYW1lQm9zcyA9ICdGYWppdGEnDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFyaW5lUXVlc3QzIg0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDMNCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG4xNSwwMDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtMjQ0MS45ODYzMjgxMjUsIDczLjM1OTM0NDQ4MjQyMiwgLTMyMTcuNTMyNDcwNzAzMSkNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLTIxNzIuNzM5OTkwMjM0NCwgMTAzLjMyMjE2NjQ0Mjg3LCAtNDAxNS4wMjUzOTA2MjUpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIkRvbiBTd2FuIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiRG9uIFN3YW4gW0x2LiAxMDAwXSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ0RvbiBTd2FuJw0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygyMjg2LjIwMDQzOTQ1MzEsIDE1LjE3NzgzOTI3OTE3NSwgODYzLjgzODg2NzE4NzUpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIlNtb2tlIEFkbWlyYWwiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJTbW9rZSBBZG1pcmFsIFtMdi4gMTE1MF0gW0Jvc3NdIg0KICAgICAgICBOYW1lQm9zcyA9ICdTbW9rZSBBZG1pcmFsJw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkljZVNpZGVRdWVzdCINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAzDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIwLDAwMFxuMjUsMDAwLDAwMCBFeHAuIg0KICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLTU0MjkuMDQ3MzYzMjgxMywgMTUuOTc3NTY1NzY1MzgxLCAtNTI5Ny45NjE0MjU3ODEzKQ0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtNTI3NS4xOTg3MzA0Njg4LCAyMC43NTcyNTc0NjE1NDgsIC01MjYwLjY2Njk5MjE4NzUpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiQXdha2VuZWQgSWNlIEFkbWlyYWwgW0x2LiAxNDAwXSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ0F3YWtlbmVkIEljZSBBZG1pcmFsJw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkZyb3N0UXVlc3QiDQogICAgICAgIFF1ZXN0THZCb3NzID0gMw0KICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjM2LDAwMCwwMDAgRXhwLiINCiAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDU2NjguOTc4MDI3MzQzOCwgMjguNTE5OTg5MDEzNjcyLCAtNjQ4My4zNTIwNTA3ODEzKQ0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg2NDAzLjU0Mzk0NTMxMjUsIDM0MC4yOTc2Njg0NTcwMywgLTY4OTQuNTU5NTcwMzEyNSkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiVGlkZSBLZWVwZXIiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJUaWRlIEtlZXBlciBbTHYuIDE0NzVdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnVGlkZSBLZWVwZXInDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRm9yZ290dGVuUXVlc3QiDQogICAgICAgIFF1ZXN0THZCb3NzID0gMw0KICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxMiw1MDBcbjM4LDAwMCwwMDAgRXhwLiINCiAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0zMDUzLjk4MTQ0NTMxMjUsIDIzNy4xODk1NDQ2Nzc3MywgLTEwMTQ1LjAzOTA2MjUpDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0zNzk1LjY0MjMzMzk4NDQsIDEwNS44ODg3NzEwNTcxMywgLTExNDIxLjMwNzYxNzE4OCkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiRGFya2JlYXJkIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiRGFya2JlYXJkIFtMdi4gMTAwMF0gW1JhaWQgQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ0RhcmtiZWFyZCcNCiAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygzNjc3LjA4MjAzMTI1LCA2Mi43NTE5Mzc4NjYyMTEsIC0zMTQ0LjgzMzI1MTk1MzEpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIkN1cnNlZCBDYXB0YWluIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiQ3Vyc2VkIENhcHRhaW4gW0x2LiAxMzI1XSBbUmFpZCBCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnQ3Vyc2VkIENhcHRhaW4nDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDkxNi45Mjg1ODksIDE4MS4wOTI3NzMsIDMzNDIyKQ0KICAgIGVsc2VpZiBTZWxlY3RCb3NzID09ICJPcmRlciIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIk9yZGVyIFtMdi4gMTI1MF0gW1JhaWQgQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ09yZGVyJw0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtNjIxNy4yMDIxNDg0Mzc1LCAyOC4wNDc2NDU1Njg4NDgsIC01MDUzLjEzNTc0MjE4NzUpDQogICAgZW5kDQplbmQNCmlmIFRoaXJkX1NlYSB0aGVuDQogICAgaWYgU2VsZWN0Qm9zcyA9PSAiU3RvbmUiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJTdG9uZSBbTHYuIDE1NTBdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnU3RvbmUnDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiUGlyYXRlUG9ydFF1ZXN0Ig0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDMNCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG40MCwwMDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtMjg5Ljc2NzA1OTMyNjE3LCA0My44MTkwMTE2ODgyMzIsIDU1NzkuOTM4NDc2NTYyNSkNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLTEwMjcuNjUxMjQ1MTE3MiwgOTIuNDA0MTc0ODA0Njg4LCA2NTc4Ljg1MzAyNzM0MzgpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIklzbGFuZCBFbXByZXNzIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiSXNsYW5kIEVtcHJlc3MgW0x2LiAxNjc1XSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ0lzbGFuZCBFbXByZXNzJw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkFtYXpvblF1ZXN0MiINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAzDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDMwLDAwMFxuNTIsMDAwLDAwMCBFeHAuIg0KICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTQ0NS45NTQxMDE1NjI1LCA2MDEuNjI5NDU1NTY2NDEsIDc1MS40Mzc5MjcyNDYwOSkNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTU0My44NjMyODEyNSwgNjY4Ljk3Mzk5OTAyMzQ0LCAxOTkuMDM0MTc5Njg3NSkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiS2lsbyBBZG1pcmFsIiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiS2lsbyBBZG1pcmFsIFtMdi4gMTc1MF0gW0Jvc3NdIg0KICAgICAgICBOYW1lQm9zcyA9ICdLaWxvIEFkbWlyYWwnDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFyaW5lVHJlZUlzbGFuZCINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAzDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDM1LDAwMFxuNTYsMDAwLDAwMCBFeHAuIg0KICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoMjE3OS4zMDEwMjUzOTA2LCAyOC43MzEyMzkzMTg4NDgsIC02NzM5Ljk3NDEyMTA5MzgpDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDI3NjQuMjIzMzg4NjcxOSwgNDMyLjQ2MTU0Nzg1MTU2LCAtNzE0NC40NTgwMDc4MTI1KQ0KICAgIGVsc2VpZiBTZWxlY3RCb3NzID09ICJDYXB0YWluIEVsZXBoYW50IiB0aGVuDQogICAgICAgIEJvc3NNb24gPSAiQ2FwdGFpbiBFbGVwaGFudCBbTHYuIDE4NzVdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnQ2FwdGFpbiBFbGVwaGFudCcNCiAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJEZWVwRm9yZXN0SXNsYW5kIg0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDMNCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kNDAsMDAwXG42NywwMDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtMTMyMzIuNjgyNjE3MTg4LCAzMzIuNDAzOTYxMTgxNjQsIC03NjI2LjAxMTcxODc1KQ0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtMTMzNzYuNzU3ODEyNSwgNDMzLjI4Njg5NTc1MTk1LCAtODA3MS4zOTI1NzgxMjUpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIkJlYXV0aWZ1bCBQaXJhdGUiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJCZWF1dGlmdWwgUGlyYXRlIFtMdi4gMTk1MF0gW0Jvc3NdIg0KICAgICAgICBOYW1lQm9zcyA9ICdCZWF1dGlmdWwgUGlyYXRlJw0KICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkRlZXBGb3Jlc3RJc2xhbmQyIg0KICAgICAgICBRdWVzdEx2Qm9zcyA9IDMNCiAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kNTAsMDAwXG43MCwwMDAsMDAwIEV4cC4iDQogICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtMTI2ODIuMDk2Njc5Njg4LCAzOTAuODg2NTM1NjQ0NTMsIC05OTAyLjEyNDAyMzQzNzUpDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUyODMuNjA5Mzc1LCAyMi41NjIyMzQ4Nzg1NCwgLTExMC43ODI4NTIxNzI4NSkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiQ2FrZSBRdWVlbiIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIkNha2UgUXVlZW4gW0x2LiAyMTc1XSBbQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ0Nha2UgUXVlZW4nDQogICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSWNlQ3JlYW1Jc2xhbmRRdWVzdCINCiAgICAgICAgUXVlc3RMdkJvc3MgPSAzDQogICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDMwLDAwMFxuMTEyLDUwMCwwMDAgRXhwLiINCiAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC04MTkuMzc2NzA5LCA2NC45MjU5Nzk2LCAtMTA5NjcuMjgzMiwgLTAuNzY2MDYxNjY0LCAwLCAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgLTAuNjQyNzY3NjA4LCAwLCAtMC43NjYwNjE2NjQpDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC02NzguNjQ4ODA0LCAzODEuMzUzOTQzLCAtMTExMTQuMjAxMiwgLTAuOTA4NjQxODE1LCAwLjAwMTQ5Mjk0MzM4LCAwLjQxNzU3Mzc4LCAwLjAwODM3MTE0OTE5LCAwLjk5OTg1Nzg0MywgMC4wMTQ2NDA4OTI5LCAtMC40MTc0OTI1NjgsIDAuMDE2Nzk4ODk4NiwgLTAuOTA4NTI0OTkpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gIkxvbmdtYSIgdGhlbg0KICAgICAgICBCb3NzTW9uID0gIkxvbmdtYSBbTHYuIDIwMDBdIFtCb3NzXSINCiAgICAgICAgTmFtZUJvc3MgPSAnTG9uZ21hJw0KICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtMTAyMzguODc1OTc2NTYzLCAzODkuNzkxMjkwMjgzMiwgLTk1NDkuNzkzOTQ1MzEyNSkNCiAgICBlbHNlaWYgU2VsZWN0Qm9zcyA9PSAiU291bCBSZWFwZXIiIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJTb3VsIFJlYXBlciBbTHYuIDIxMDBdIFtSYWlkIEJvc3NdIg0KICAgICAgICBOYW1lQm9zcyA9ICdTb3VsIFJlYXBlcicNCiAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLTk1MjQuNzg5MDYyNSwgMzE1LjgwNDI5MDc3MTQ4LCA2NjU1LjcxOTIzODI4MTMpDQogICAgZWxzZWlmIFNlbGVjdEJvc3MgPT0gInJpcF9pbmRyYSBUcnVlIEZvcm0iIHRoZW4NCiAgICAgICAgQm9zc01vbiA9ICJyaXBfaW5kcmEgVHJ1ZSBGb3JtIFtMdi4gNTAwMF0gW1JhaWQgQm9zc10iDQogICAgICAgIE5hbWVCb3NzID0gJ3JpcF9pbmRyYSBUcnVlIEZvcm0nDQogICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC01NDE1LjM5MjA4OTg0MzgsIDUwNS43NDEzMzMwMDc4MSwgLTI4MTQuMDE2NjAxNTYyNSkNCiAgICBlbmQNCmVuZA0KZW5kDQoNCi0tLy8gQ2hlY2sgTWF0ZXJpYWwNCmZ1bmN0aW9uIE1hdGVyaWFsTW9uKCkNCmlmIFNlbGVjdE1hdGVyaWFsID09ICJSYWRpb2FjdGl2ZSBNYXRlcmlhbCIgdGhlbg0KICAgIE1Nb24gPSAiRmFjdG9yeSBTdGFmZiINCiAgICBNUG9zID0gQ0ZyYW1lLm5ldygyOTUsNzMsLTU2KQ0KICAgIFNQID0gIkRlZmF1bHQiDQplbHNlaWYgU2VsZWN0TWF0ZXJpYWwgPT0gIk15c3RpYyBEcm9wbGV0IiB0aGVuDQogICAgTU1vbiA9ICJXYXRlciBGaWdodGVyIg0KICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0zMzg1LDIzOSwtMTA1NDIpDQogICAgU1AgPSAiRGVmYXVsdCINCmVsc2VpZiBTZWxlY3RNYXRlcmlhbCA9PSAiTWFnbWEgT3JlIiB0aGVuDQogICAgaWYgRmlyc3RfU2VhIHRoZW4NCiAgICAgICAgTU1vbiA9ICJNaWxpdGFyeSBTcHkiDQogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC01ODE1LDg0LDg4MjApDQogICAgICAgIFNQID0gIkRlZmF1bHQiDQogICAgZWxzZWlmIFNlY29uZF9TZWEgdGhlbg0KICAgICAgICBNTW9uID0gIk1hZ21hIE5pbmphIg0KICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtNTQyOCw3OCwtNTk1OSkNCiAgICAgICAgU1AgPSAiRGVmYXVsdCINCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RNYXRlcmlhbCA9PSAiQW5nZWwgV2luZ3MiIHRoZW4NCiAgICBNTW9uID0gIkdvZCdzIEd1YXJkIg0KICAgIE1Qb3MgPSBDRnJhbWUubmV3KC00Njk4LDg0NSwtMTkxMikNCiAgICBTUCA9ICJEZWZhdWx0Ig0KICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtNzg1OS4wOTgxNCwgNTU0NC4xOTA0MywgLTM4MS40NzYxOTYpKS5NYWduaXR1ZGUgPj0gNTAwMCB0aGVuDQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsVmVjdG9yMy5uZXcoLTc4NTkuMDk4MTQsIDU1NDQuMTkwNDMsIC0zODEuNDc2MTk2KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RNYXRlcmlhbCA9PSAiTGVhdGhlciIgdGhlbg0KICAgIGlmIEZpcnN0X1NlYSB0aGVuDQogICAgICAgIE1Nb24gPSAiQnJ1dGUiDQogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0xMTQ1LDE1LDQzNTApDQogICAgICAgIFNQID0gIkRlZmF1bHQiDQogICAgZWxzZWlmIFNlY29uZF9TZWEgdGhlbg0KICAgICAgICBNTW9uID0gIk1hcmluZSBDYXB0YWluIg0KICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtMjAxMC41MDU5ODE0NDUzMTI1LCA3My4wMDExNTk2Njc5Njg3NSwgLTMzMjYuNjIwODQ5NjA5Mzc1KQ0KICAgICAgICBTUCA9ICJEZWZhdWx0Ig0KICAgIGVsc2VpZiBUaGlyZF9TZWEgdGhlbg0KICAgICAgICBNTW9uID0gIkp1bmdsZSBQaXJhdGUiDQogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0xMTk3NS43ODUxNTYyNSwgMzMxLjc3MzQwNjk4MjQyMTksIC0xMDYyMC4wMzAyNzM0Mzc1KQ0KICAgICAgICBTUCA9ICJEZWZhdWx0Ig0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdE1hdGVyaWFsID09ICJTY3JhcCBNZXRhbCIgdGhlbg0KICAgIGlmIEZpcnN0X1NlYSB0aGVuDQogICAgICAgIE1Nb24gPSAiQnJ1dGUiDQogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0xMTQ1LDE1LDQzNTApDQogICAgICAgIFNQID0gIkRlZmF1bHQiDQogICAgZWxzZWlmIFNlY29uZF9TZWEgdGhlbg0KICAgICAgICBNTW9uID0gIlN3YW4gUGlyYXRlIg0KICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg4NzgsMTIyLDEyMzUpDQogICAgICAgIFNQID0gIkRlZmF1bHQiDQogICAgZWxzZWlmIFRoaXJkX1NlYSB0aGVuDQogICAgICAgIE1Nb24gPSAiSnVuZ2xlIFBpcmF0ZSINCiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLTEyMTA3LDMzMiwtMTA1NDkpDQogICAgICAgIFNQID0gIkRlZmF1bHQiDQogICAgZW5kDQplbHNlaWYgU2VsZWN0TWF0ZXJpYWwgPT0gIkZpc2ggVGFpbCIgdGhlbg0KICAgIGlmIFRoaXJkX1NlYSB0aGVuDQogICAgICAgIE1Nb24gPSAiRmlzaG1hbiBSYWlkZXIiDQogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0xMDk5MywzMzIsLTg5NDApDQogICAgICAgIFNQID0gIkRlZmF1bHQiDQogICAgZWxzZWlmIEZpcnN0X1NlYSB0aGVuDQogICAgICAgIE1Nb24gPSAiRmlzaG1hbiBXYXJyaW9yIg0KICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2MTEyMywxOSwxNTY5KQ0KICAgICAgICBTUCA9ICJEZWZhdWx0Ig0KICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgNS4zNDIzNDIzNzY3MDg5ODQsIDE4MTkuNzg0MTc5Njg3NSkpLk1hZ25pdHVkZSA+PSAxNzAwMCB0aGVuDQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDUuMzQyMzQyMzc2NzA4OTg0LCAxODE5Ljc4NDE3OTY4NzUpKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RNYXRlcmlhbCA9PSAiRGVtb25pYyBXaXNwIiB0aGVuDQogICAgTU1vbiA9ICJEZW1vbmljIFNvdWwiDQogICAgTVBvcyA9IENGcmFtZS5uZXcoLTk1MDcsMTcyLDYxNTgpDQogICAgU1AgPSAiRGVmYXVsdCINCmVsc2VpZiBTZWxlY3RNYXRlcmlhbCA9PSAiVmFtcGlyZSBGYW5nIiB0aGVuDQogICAgTU1vbiA9ICJWYW1waXJlIg0KICAgIE1Qb3MgPSBDRnJhbWUubmV3KC02MDMzLDcsLTEzMTcpDQogICAgU1AgPSAiRGVmYXVsdCINCmVsc2VpZiBTZWxlY3RNYXRlcmlhbCA9PSAiQ29uanVyZWQgQ29jb2EiIHRoZW4NCiAgICBNTW9uID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciINCiAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2MjAuNjM0NDYwNDQ5MjE4OCw3OC45MzY0NDcxNDM1NTQ2OSwgLTEyNTgxLjM2OTE0MDYyNSkNCiAgICBTUCA9ICJEZWZhdWx0Ig0KZWxzZWlmIFNlbGVjdE1hdGVyaWFsID09ICJEcmFnb24gU2NhbGUiIHRoZW4NCiAgICBNTW9uID0gIkRyYWdvbiBDcmV3IEFyY2hlciINCiAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2NTk0LDM4MywxMzkpDQogICAgU1AgPSAiRGVmYXVsdCINCmVsc2VpZiBTZWxlY3RNYXRlcmlhbCA9PSAiR3VucG93ZGVyIiB0aGVuDQogICAgTU1vbiA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiDQogICAgTVBvcyA9IENGcmFtZS5uZXcoLTQ2OSw3NCw1OTA0KQ0KICAgIFNQID0gIkRlZmF1bHQiDQplbHNlaWYgU2VsZWN0TWF0ZXJpYWwgPT0gIk1pbmkgVHVzayIgdGhlbg0KICAgIE1Nb24gPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSINCiAgICBNUG9zID0gQ0ZyYW1lLm5ldygtMTM1NDUsNDcwLC02OTE3KQ0KICAgIFNQID0gIkRlZmF1bHQiDQplbmQNCmVuZA0KDQoNCg0KLS0vLyBCeXBhc3MNCi0tW1tmdW5jdGlvbiBCeXBhc3NDaGVjaygpDQpmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgIGlmIHY6SXNBKCJMb2NhbFNjcmlwdCIpIHRoZW4NCiAgICAgICAgaWYgdi5OYW1lID09ICJHZW5lcmFsIiBvciB2Lk5hbWUgPT0gIlNoaWZ0bG9jayIgIG9yIHYuTmFtZSA9PSAiRmFsbERhbWFnZSIgb3Igdi5OYW1lID09ICI0NDQ0IiBvciB2Lk5hbWUgPT0gIkNhbUJvYiIgb3Igdi5OYW1lID09ICJKdW1wQ0QiIG9yIHYuTmFtZSA9PSAiTG9va2luZyIgb3Igdi5OYW1lID09ICJSdW4iIHRoZW4NCiAgICAgICAgICAgIHY6RGVzdHJveSgpDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQpmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllclNjcmlwdHM6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICBpZiB2OklzQSgiTG9jYWxTY3JpcHQiKSB0aGVuDQogICAgICAgIGlmIHYuTmFtZSA9PSAiUm9ibG94TW90b3I2REJ1Z0ZpeCIgb3Igdi5OYW1lID09ICJDbGFucyIgIG9yIHYuTmFtZSA9PSAiQ29kZXMiIG9yIHYuTmFtZSA9PSAiQ3VzdG9tRm9yY2VGaWVsZCIgb3Igdi5OYW1lID09ICJNZW51Qmxvb2RTcCIgIG9yIHYuTmFtZSA9PSAiUGxheWVyTGlzdCIgdGhlbg0KICAgICAgICAgICAgdjpEZXN0cm95KCkNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCdXb3Jrc3BhY2UnKTpHZXRDaGlsZHJlbigpKSBkbw0KICAgIGlmIHYuTmFtZSA9PSAiU2NyaXB0IiB0aGVuDQogICAgICAgIHY6RGVzdHJveSgpDQogICAgZW5kDQplbmQNCmVuZA0KQnlwYXNzQ2hlY2soKV1dDQoNCi0tLy8gRVFVSVAgV0VBUE9OIA0KZnVuY3Rpb24gRXF1aXBUb29sKFRvb2wpDQpwY2FsbChmdW5jdGlvbigpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2woZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW1Rvb2xdKQ0KZW5kKQ0KZW5kDQoNCi0tLy8gVFdFRU4gUExBWUVSDQpmdW5jdGlvbiBUd2VlbihQMSkNCmxvY2FsIERpc3RhbmNlID0gKFAxLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUNCmlmIERpc3RhbmNlID4gMSB0aGVuDQogICAgU3BlZWQgPSAzNTANCmVuZA0KZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LFR3ZWVuSW5mby5uZXcoRGlzdGFuY2UvU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSx7Q0ZyYW1lID0gUDF9KTpQbGF5KCkNCmlmIF9HLlN0b3BUd2VlbiB0aGVuDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LFR3ZWVuSW5mby5uZXcoRGlzdGFuY2UvU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSx7Q0ZyYW1lID0gUDF9KTpDYW5jZWwoKQ0KZW5kDQplbmQNCg0KLS0vLyBUUCBJU0xBTkQNCmZ1bmN0aW9uIFRQMihQMSkNCmxvY2FsIERpc3RhbmNlID0gKFAxLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUNCmlmIERpc3RhbmNlID4gMSB0aGVuDQogICAgU3BlZWQgPSAzNTANCmVuZA0KZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LFR3ZWVuSW5mby5uZXcoRGlzdGFuY2UvU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSx7Q0ZyYW1lID0gUDF9KTpQbGF5KCkNCmlmIF9HLlN0b3BUd2VlbjIgdGhlbg0KICAgIGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCxUd2VlbkluZm8ubmV3KERpc3RhbmNlL1NwZWVkLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcikse0NGcmFtZSA9IFAxfSk6Q2FuY2VsKCkNCmVuZA0KX0cuQ2xpcDIgPSB0cnVlDQp3YWl0KERpc3RhbmNlL1NwZWVkKQ0KX0cuQ2xpcDIgPSBmYWxzZQ0KZW5kDQoNCi0tLy8gQ0FOQ0VMIFRXRUVODQpmdW5jdGlvbiBDYW5jZWxUd2Vlbih0YXJnZXQpDQppZiBub3QgdGFyZ2V0IHRoZW4NCiAgICBfRy5TdG9wVHdlZW4gPSB0cnVlDQogICAgd2FpdCguMSkNCiAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgd2FpdCguMSkNCiAgICBfRy5TdG9wVHdlZW4gPSBmYWxzZQ0KZW5kDQplbmQNCg0KLS0vLyBCeXBhc3MgVGVsZXBvcnQNCmZ1bmN0aW9uIEJUUChUYXJwb3MpDQppZiAoVGFycG9zLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwIHRoZW4NCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQ6RGVzdHJveSgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFRhcnBvcw0KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlNldFNwYXduUG9pbnQiKQ0KICAgIHdhaXQoMSkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gVGFycG9zDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2V0U3Bhd25Qb2ludCIpDQogICAgd2FpdCg3KQ0KZWxzZWlmIChUYXJwb3MuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDIwMDAgdGhlbg0KICAgIFR3ZWVuKFRhcnBvcykNCmVuZA0KZW5kDQoNCi0tLy8gQVVUTyBDTElDSw0KZnVuY3Rpb24gQXV0b0NsaWNrKCkNCi0tZ2FtZTpHZXRTZXJ2aWNlKCdWaXJ0dWFsVXNlcicpOkNhcHR1cmVDb250cm9sbGVyKCkNCi0tZ2FtZTpHZXRTZXJ2aWNlKCdWaXJ0dWFsVXNlcicpOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3MikpDQplbmQNCg0KZnVuY3Rpb24gQXV0b0NsaWNrMigpDQpnYW1lOkdldFNlcnZpY2UoJ1ZpcnR1YWxVc2VyJyk6Q2FwdHVyZUNvbnRyb2xsZXIoKQ0KZ2FtZTpHZXRTZXJ2aWNlKCdWaXJ0dWFsVXNlcicpOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3MikpDQplbmQNCnRhc2suc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgbG9jYWwgQ2FtZXJhU2hha2VyUiA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5VdGlsLkNhbWVyYVNoYWtlcikNCiAgICBDYW1lcmFTaGFrZXJSOlN0b3AoKQ0KZW5kDQplbmQpDQoNCi0tLy8gUGxheWVyIEJvZHkgVmVsb2NpdHkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgQmxhemVFbWJlckZhcm0gb3IgQXR0YWNrRmlzaCBvciBBdHRhY2tUZXJyb3JzaGFyayBvciBBdHRhY2tHaG9zdHNoaXAgb3IgQXV0b1NlYWJlYXN0RmFybSBvciBBdXRvU2VhRmFybSBvciBEb2pvQ2xhaW1RdWVzdCBvciBEb2pvUmVxdWVzdFF1ZXN0IG9yIERvam9RdWVzdEVuYWJsZSBvciBBdXRvU1RhcnRSYWlkcyBvciBUZWxlcG9ydHRvRnJ1aXREZWFsZXIgb3IgX0cuVGVsZXBvcnRGcnVpdCBvciBUZWxlcG9ydHRvS2l0c3VuZSBvciBDb2xsZWN0QXp1cmVBbWJlciBvciBBdXRvVHJhaW4gb3IgQXV0b0tpbGxIdW1hbiBvciBBdXRvUGlyYXRlQ2FzdGxlIG9yIFR3ZWVuVG9QbGF5ZXIgb3IgQXV0b1NhaWwgb3IgQXV0b0Zhcm1UZXJyb3JTaGFyayBvciBBdXRvRmFybUZpc2ggb3IgQXV0b0Zhcm1TZWFCZWFzdCBvciBBdXRvRmFybUdob3N0Qm9hdHMgb3IgTGV2ZWxGYXJtTm9RdWVzdCBvciBMZXZlbEZhcm1RdWVzdCBvciBGYXJtX0JvbmUgb3IgRmFybV9FY3RvcGxhc20gb3IgTmVhcmVzdF9GYXJtIG9yIFNlbGVjdE1vbnN0ZXJfUXVlc3RfRmFybSBvciBTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSBvciBBdXRvX0Zhcm1fTWF0ZXJpYWwgb3IgQXV0b0Zhcm1Cb3NzTm9RdWVzdCBvciBBdXRvRmFybUJvc3NRdWVzdCBvciBHdW5NYXN0ZXJ5X0Zhcm0gb3IgRGV2aWxNYXN0ZXJ5X0Zhcm0gb3IgQXV0b0tlblYyIG9yIEF1dG9GYXJtS2VuIG9yIEF1dG9OZXh0SXNsYW5kIG9yIEJvc3NSYWlkIG9yIF9HLlRlbGVwb3J0X3RvX1BsYXllciBvciBfRy5DbGlwIG9yIF9HLkF1dG9fS2lsbF9QbGF5ZXJfTWVsZWUgb3IgX0cuQXV0b19LaWxsX1BsYXllcl9HdW4gb3IgVGVsZXBvcnR0b01pcmFnZSBvciBUZWxlcG9ydHRvR2VhciBvciBfRy5BdXRvX1RlbGVwb3J0X0ZydWl0IG9yIEF1dG9TZWNvbmRXb3JsZCBvciBBdXRvVGhpcmRXb3JsZCBvciBBdXRvRGVhdGhTdGVwIG9yIEF1dG9TdXBlcmh1bWFuIG9yIEF1dG9TaGFya21hbiBvciBBdXRvRWxlY3RyaWNDbGF3IG9yIEF1dG9EcmFnb25UYWxvbiBvciBBdXRvR29kaHVtYW4gb3IgQXV0b1NhYmVyIG9yIEF1dG9SZW5nb2t1IG9yIEF1dG9CdWRkeVN3b3JkIG9yIEF1dG9Qb2xlIG9yIEF1dG9ZYW1hIG9yIEF1dG9DYXZhbmRlciBvciBBdXRvVHVzaGl0YSBvciBBdXRvX0N1cnNlZF9EdWFsX0thdGFuYSBvciBBdXRvX1F1ZXN0X1lhbWFfMSBvciBBdXRvX1F1ZXN0X1lhbWFfMiBvciBBdXRvX1F1ZXN0X1lhbWFfMyBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMiBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMyBvciBBdXRvRWxpdGVIdW50ZXIgb3IgQXV0b0Nha2VQcmluY2Ugb3IgX0cuQXV0b0RvdWdoS2luZyBvciBBdXRvRGFya0RhZ2dlciBvciBBdXRvSGFsbG93U3ljdGhlIG9yIEF1dG9DaXRpemVuIG9yIEF1dG9Fdm9SYWNlIG9yIEF1dG9CYXJ0aWxvIG9yIEF1dG9GYWN0b3J5IG9yIF9HLlN3YW5HbGFzc2VzIG9yIFJpcEluZHJhIG9yIEF1dG9SYWluYm93SGFraSBvciBBdXRvVG9yY2ggb3IgQXV0b1NvdWxHdWl0YXIgb3IgQXV0b1RyeUx1Y2sgb3IgQXV0b1ByYXkgb3IgQXV0b0FkdmFuY2VEdW5nZW9uIG9yIEF1dG9NdXNrZXRlZXIgb3IgQXV0b19TZXJwZW50X0JvdyB0aGVuDQogICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlDbGlwIikgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIE5vY2xpcCA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikNCiAgICAgICAgICAgICAgICBOb2NsaXAuTmFtZSA9ICJCb2R5Q2xpcCINCiAgICAgICAgICAgICAgICBOb2NsaXAuUGFyZW50ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQNCiAgICAgICAgICAgICAgICBOb2NsaXAuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygxMDAwMDAsMTAwMDAwLDEwMDAwMCkNCiAgICAgICAgICAgICAgICBOb2NsaXAuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQm9keUNsaXAiKSB0aGVuDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlDbGlwIik6RGVzdHJveSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQplbmQpDQoNCi0tLy8gRmFybWluZyBDbGlwIFR3ZWVuDQpzcGF3bihmdW5jdGlvbigpDQpwY2FsbChmdW5jdGlvbigpDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgQmxhemVFbWJlckZhcm0gb3IgQXR0YWNrRmlzaCBvciBBdHRhY2tUZXJyb3JzaGFyayBvciBBdHRhY2tHaG9zdHNoaXAgb3IgQXV0b1NlYWJlYXN0RmFybSBvciBBdXRvU2VhRmFybSBvciBEb2pvQ2xhaW1RdWVzdCBvciBEb2pvUmVxdWVzdFF1ZXN0IG9yIERvam9RdWVzdEVuYWJsZSBvciBBdXRvU1RhcnRSYWlkcyBvciBUZWxlcG9ydHRvRnJ1aXREZWFsZXIgb3IgX0cuVGVsZXBvcnRGcnVpdCBvciBUZWxlcG9ydHRvS2l0c3VuZSBvciBDb2xsZWN0QXp1cmVBbWJlciBvciBBdXRvVHJhaW4gb3IgQXV0b0tpbGxIdW1hbiBvciBBdXRvUGlyYXRlQ2FzdGxlIG9yIFR3ZWVuVG9QbGF5ZXIgb3IgQXV0b1NhaWwgb3IgQXV0b0Zhcm1UZXJyb3JTaGFyayBvciBBdXRvRmFybUZpc2ggb3IgQXV0b0Zhcm1TZWFCZWFzdCBvciBBdXRvRmFybUdob3N0Qm9hdHMgb3IgTGV2ZWxGYXJtTm9RdWVzdCBvciBMZXZlbEZhcm1RdWVzdCBvciBGYXJtX0JvbmUgb3IgRmFybV9FY3RvcGxhc20gb3IgTmVhcmVzdF9GYXJtIG9yIFNlbGVjdE1vbnN0ZXJfUXVlc3RfRmFybSBvciBTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSBvciBBdXRvX0Zhcm1fTWF0ZXJpYWwgb3IgQXV0b0Zhcm1Cb3NzTm9RdWVzdCBvciBBdXRvRmFybUJvc3NRdWVzdCBvciBHdW5NYXN0ZXJ5X0Zhcm0gb3IgRGV2aWxNYXN0ZXJ5X0Zhcm0gb3IgQXV0b0tlblYyIG9yIEF1dG9GYXJtS2VuIG9yIEF1dG9OZXh0SXNsYW5kIG9yIEJvc3NSYWlkIG9yIF9HLlRlbGVwb3J0X3RvX1BsYXllciBvciBfRy5DbGlwIG9yIF9HLkF1dG9fS2lsbF9QbGF5ZXJfTWVsZWUgb3IgX0cuQXV0b19LaWxsX1BsYXllcl9HdW4gb3IgVGVsZXBvcnR0b01pcmFnZSBvciBUZWxlcG9ydHRvR2VhciBvciBfRy5BdXRvX1RlbGVwb3J0X0ZydWl0IG9yIEF1dG9TZWNvbmRXb3JsZCBvciBBdXRvVGhpcmRXb3JsZCBvciBBdXRvRGVhdGhTdGVwIG9yIEF1dG9TdXBlcmh1bWFuIG9yIEF1dG9TaGFya21hbiBvciBBdXRvRWxlY3RyaWNDbGF3IG9yIEF1dG9EcmFnb25UYWxvbiBvciBBdXRvR29kaHVtYW4gb3IgQXV0b1NhYmVyIG9yIEF1dG9SZW5nb2t1IG9yIEF1dG9CdWRkeVN3b3JkIG9yIEF1dG9Qb2xlIG9yIEF1dG9ZYW1hIG9yIEF1dG9DYXZhbmRlciBvciBBdXRvVHVzaGl0YSBvciBBdXRvX0N1cnNlZF9EdWFsX0thdGFuYSBvciBBdXRvX1F1ZXN0X1lhbWFfMSBvciBBdXRvX1F1ZXN0X1lhbWFfMiBvciBBdXRvX1F1ZXN0X1lhbWFfMyBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMiBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMyBvciBBdXRvRWxpdGVIdW50ZXIgb3IgQXV0b0Nha2VQcmluY2Ugb3IgX0cuQXV0b0RvdWdoS2luZyBvciBBdXRvRGFya0RhZ2dlciBvciBBdXRvSGFsbG93U3ljdGhlIG9yIEF1dG9DaXRpemVuIG9yIEF1dG9Fdm9SYWNlIG9yIEF1dG9CYXJ0aWxvIG9yIEF1dG9GYWN0b3J5IG9yIF9HLlN3YW5HbGFzc2VzIG9yIFJpcEluZHJhIG9yIEF1dG9SYWluYm93SGFraSBvciBBdXRvVG9yY2ggb3IgQXV0b1NvdWxHdWl0YXIgb3IgQXV0b1RyeUx1Y2sgb3IgQXV0b1ByYXkgb3IgQXV0b0FkdmFuY2VEdW5nZW9uIG9yIEF1dG9NdXNrZXRlZXIgb3IgQXV0b19TZXJwZW50X0JvdyB0aGVuDQogICAgICAgICAgICBmb3IgXyx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdi5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQpDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KLS0vLyBTRVRUSU5HIEVMRlQNCmxvY2FsIFNldHRpbmdfTGVmdCA9IFRhYi5UYWJfU2V0dGluZzphZGRTZWN0aW9uKCkNCmxvY2FsIE1haW5fU2V0dGluZyA9IFNldHRpbmdfTGVmdDphZGRNZW51KCcjTWFpbiBTZXR0aW5nJykNCg0KbG9jYWwgV2VhcG9uTGlzdCA9IHsiTWVsZWUiLCJCbG94IEZydWl0IiwiU3dvcmQiLCJHdW4ifQ0KU2VsZWN0V2VhcG9uRmFybSA9ICJNZWxlZSINCk1haW5fU2V0dGluZzphZGREcm9wZG93bigiU2VsZWN0IFdlYXBvbiIsIFNlbGVjdFdlYXBvbkZhcm0sIFdlYXBvbkxpc3QsZnVuY3Rpb24od2VhcG9uZnVuYykNClNlbGVjdFdlYXBvbkZhcm0gPSB3ZWFwb25mdW5jDQplbmQpDQp0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgU2VsZWN0V2VhcG9uRmFybSA9PSAiTWVsZWUiIHRoZW4NCiAgICAgICAgICAgIGZvciBpICx2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuVG9vbFRpcCA9PSAiTWVsZWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgU2VsZWN0V2VhcG9uRmFybSA9PSAiU3dvcmQiIHRoZW4NCiAgICAgICAgICAgIGZvciBpICx2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuVG9vbFRpcCA9PSAiU3dvcmQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgU2VsZWN0V2VhcG9uRmFybSA9PSAiQmxveCBGcnVpdCIgdGhlbg0KICAgICAgICAgICAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5Ub29sVGlwID09ICJCbG94IEZydWl0IiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2Lk5hbWUpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb24gPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIFNlbGVjdFdlYXBvbkZhcm0gPT0gIkd1biIgdGhlbg0KICAgICAgICAgICAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5Ub29sVGlwID09ICJHdW4iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCmVuZCkNCg0KLS0vLyBGYXJtIE1vZGUNCmxvY2FsIEZhcm1UYWJsZSA9IHsNCiJBYm92ZSIsDQoiQmVzaWRlIg0KfQ0KQXV0b0Zhcm1UeXBlID0gIkFib3ZlIg0KTWFpbl9TZXR0aW5nOmFkZERyb3Bkb3duKCJTZWxlY3QgRmFybSBUeXBlIiwgQXV0b0Zhcm1UeXBlLCBGYXJtVGFibGUsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0Zhcm1UeXBlID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIEF1dG9GYXJtVHlwZSA9PSAiQWJvdmUiIHRoZW4NCiAgICAgICAgRmFybV9Nb2RlID0gQ0ZyYW1lLm5ldygwLERpc0Zhcm0sMCkgKiBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKC05MCksMCwwKQ0KICAgIGVsc2VpZiBBdXRvRmFybVR5cGUgPT0gIkJlc2lkZSIgdGhlbg0KICAgICAgICBGYXJtX01vZGUgPSBDRnJhbWUubmV3KDAsMixEaXNGYXJtKSAqIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoMCksMCwwKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCkRpc0Zhcm0gPSAzMA0KTWFpbl9TZXR0aW5nOmFkZFRleHRib3goIkRpc3RhbmNlIEZhcm0iLCBEaXNGYXJtLCBmdW5jdGlvbihWYWx1ZSkNCkRpc0Zhcm0gPSBWYWx1ZQ0KZW5kKQ0KDQpmdW5jdGlvbiBhdHRhY2tFbmVtaWVzKGVuZW15VGFyZ2V0KQ0KbG9jYWwgcGxyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCmxvY2FsIFJlZ2lzdGVyQXR0YWNrID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0WyJSRS9SZWdpc3RlckF0dGFjayJdDQpsb2NhbCBSZWdpc3RlckhpdCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldFsiUkUvUmVnaXN0ZXJIaXQiXQ0KbG9jYWwgUmVjZWl2ZWRIaXQgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXRbIlJFL1JlY2VpdmVkSGl0Il0NCmxvY2FsIFNob290R3VuRXZlbnQgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXRbIlJFL1Nob290R3VuRXZlbnQiXQ0KbG9jYWwgdG9vbEVxdWlwZWQgPSBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpDQoNCi0tbG9jYWwgUmVtb3RlRXZlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyc1siRHJhZ29uLURyYWdvbiJdLlJlbW90ZUV2ZW50DQotLWxvY2FsIExlZnRDbGlja1JlbW90ZSA9IHdvcmtzcGFjZS5DaGFyYWN0ZXJzLlBsYXllcnNbIkRyYWdvbi1EcmFnb24iXS5MZWZ0Q2xpY2tSZW1vdGUNCg0KaWYgZW5lbXlUYXJnZXQgYW5kIChlbmVteVRhcmdldC5Qb3NpdGlvbiAtIHBsci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgNjAgdGhlbg0KICAgIGlmICh0b29sRXF1aXBlZC5Ub29sVGlwID09ICJNZWxlZSIgb3IgdG9vbEVxdWlwZWQuVG9vbFRpcCA9PSAiU3dvcmQiKSBhbmQgbm90IFJhaWRBdXJhIHRoZW4NCiAgICAgICAgUmVnaXN0ZXJBdHRhY2s6RmlyZVNlcnZlcigwKQ0KICAgICAgICBSZWdpc3RlckhpdDpGaXJlU2VydmVyKGVuZW15VGFyZ2V0LCB7fSkNCiAgICAgICAgUmVjZWl2ZWRIaXQ6RmlyZVNlcnZlcihlbmVteVRhcmdldCwge30pDQogICAgZW5kDQoNCiAgICBpZiB0b29sRXF1aXBlZC5Ub29sVGlwID09ICJHdW4iIGFuZCBub3QgUmFpZEF1cmEgdGhlbg0KICAgICAgICBTaG9vdEd1bkV2ZW50OkZpcmVTZXJ2ZXIoZW5lbXlUYXJnZXQuUG9zaXRpb24sIHtbMV0gPSBlbmVteVRhcmdldH0pDQogICAgZW5kDQplbmQNCmVuZA0KDQpmdW5jdGlvbiBGYXN0QXR0YWNrZWQoKQ0KbG9jYWwgcGxyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCg0KZm9yIGssIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgYXR0YWNrRW5lbWllcyh2LkhlYWQpDQogICAgYXR0YWNrRW5lbWllcyh2Lkh1bWFub2lkUm9vdFBhcnQpDQplbmQNCg0KZm9yIGssIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5TZWFCZWFzdHM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykgdGhlbg0KICAgICAgICBhdHRhY2tFbmVtaWVzKHYuSHVtYW5vaWRSb290UGFydCkNCiAgICBlbmQNCmVuZA0KDQpmb3IgaywgdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkNoYXJhY3RlcnM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICBpZiB2IH49IHBsci5DaGFyYWN0ZXIgdGhlbg0KICAgICAgICBhdHRhY2tFbmVtaWVzKHYuSGVhZCkNCiAgICBlbmQNCmVuZA0KZW5kDQoNCmxvY2FsIENhbWVyYVNoYWtlclIgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuVXRpbC5DYW1lcmFTaGFrZXIpDQpsb2NhbCBDb21iYXRDb250cm9sbGVyID0gcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuQ29udHJvbGxlcnMuQ29tYmF0Q29udHJvbGxlcikNCg0KRmFzdEF0dGFjayA9IHRydWUNCk1haW5fU2V0dGluZzphZGRUb2dnbGUoJ0Zhc3QgQXR0YWNrJywgRmFzdEF0dGFjaywgZnVuY3Rpb24oVmFsdWUpDQpGYXN0QXR0YWNrID0gVmFsdWUNCmVuZCkNCnRhc2suc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBGYXN0QXR0YWNrIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgcmVwZWF0IHRhc2sud2FpdCgpDQogICAgICAgICAgICAgICAgRmFzdEF0dGFja2VkKCkNCiAgICAgICAgICAgICAgICBDYW1lcmFTaGFrZXJSOlN0b3AoKQ0KICAgICAgICAgICAgdW50aWwgbm90IEZhc3RBdHRhY2sNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCi0tW1tsb2NhbCBBdHRhY2tMaXN0ID0geyIwLjEwMCAoUmlzaykiLCAiMC4xNjUiLCAiMC4xNzUgKERlZmF1bHQpIiwgIjAuMTg1IiwgIjAuMjAwIiwgIjAuMzAwIiwgIjAuNTAwIiwgIjAuNzAwIChTbG93KSJ9DQoNCkZhc3RBdHRhY2tTZWxlY3RlZCA9ICIwLjE3NSAoRGVmYXVsdCkiDQpNYWluX1NldHRpbmc6YWRkRHJvcGRvd24oIkZhc3QgQXR0YWNrIERlbGF5IiwgRmFzdEF0dGFja1NlbGVjdGVkLCBBdHRhY2tMaXN0LCBmdW5jdGlvbihWYWx1ZSkNCkZhc3RBdHRhY2tTZWxlY3RlZCA9IFZhbHVlDQplbmQpDQoNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgRmFzdEF0dGFja1NlbGVjdGVkID09ICIwLjEwMCAoUmlzaykiIHRoZW4NCiAgICAgICAgRmFzdEF0dGFja0RlbGF5ID0gMC4xDQogICAgZWxzZWlmIEZhc3RBdHRhY2tTZWxlY3RlZCA9PSAiMC4xNjUiIHRoZW4NCiAgICAgICAgRmFzdEF0dGFja0RlbGF5ID0gMC4xNjUNCiAgICBlbHNlaWYgRmFzdEF0dGFja1NlbGVjdGVkID09ICIwLjE3NSAoRGVmYXVsdCkiIHRoZW4NCiAgICAgICAgRmFzdEF0dGFja0RlbGF5ID0gMC4xNzUNCiAgICBlbHNlaWYgRmFzdEF0dGFja1NlbGVjdGVkID09ICIwLjE4NSIgdGhlbg0KICAgICAgICBGYXN0QXR0YWNrRGVsYXkgPSAwLjE4NQ0KICAgIGVsc2VpZiBGYXN0QXR0YWNrU2VsZWN0ZWQgPT0gIjAuMjAwIiB0aGVuDQogICAgICAgIEZhc3RBdHRhY2tEZWxheSA9IDAuMg0KICAgIGVsc2VpZiBGYXN0QXR0YWNrU2VsZWN0ZWQgPT0gIjAuMzAwIiB0aGVuDQogICAgICAgIEZhc3RBdHRhY2tEZWxheSA9IDAuMw0KICAgIGVsc2VpZiBGYXN0QXR0YWNrU2VsZWN0ZWQgPT0gIjAuNTAwIiB0aGVuDQogICAgICAgIEZhc3RBdHRhY2tEZWxheSA9IDAuNQ0KICAgIGVsc2VpZiBGYXN0QXR0YWNrU2VsZWN0ZWQgPT0gIjAuNzAwIChTbG93KSIgdGhlbg0KICAgICAgICBGYXN0QXR0YWNrRGVsYXkgPSAwLjcNCiAgICBlbmQNCmVuZA0KZW5kKV1dDQoNCi0tW1svLyBGYXN0IEF0dGFjaw0KbG9jYWwgQ29tYmF0RnJhbWV3b3JrID0gcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5QbGF5ZXJTY3JpcHRzLkNvbWJhdEZyYW1ld29yaykNCg0KZnVuY3Rpb24gR2V0Q3VycmVudEJsYWRlKCkNCmxvY2FsIEdldEZhc3RBdHRhY2sgPSBkZWJ1Zy5nZXR1cHZhbHVlcyhDb21iYXRGcmFtZXdvcmspWzJdDQpsb2NhbCBhY3RpdmVDb250cm9sbGVyID0gR2V0RmFzdEF0dGFjay5hY3RpdmVDb250cm9sbGVyDQpsb2NhbCBibGFkZXMgPSBhY3RpdmVDb250cm9sbGVyLmJsYWRlc1sxXQ0KaWYgbm90IGJsYWRlcyB0aGVuIHJldHVybiBlbmQNCndoaWxlIGJsYWRlcy5QYXJlbnQgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciBkbyBibGFkZXMgPSBibGFkZXMuUGFyZW50IGVuZA0KcmV0dXJuIGJsYWRlcw0KZW5kDQoNCmZ1bmN0aW9uIEF0dGFja05vQ0QoKQ0KbG9jYWwgcGxyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCmxvY2FsIEdldEZhc3RBdHRhY2sgPSBkZWJ1Zy5nZXR1cHZhbHVlcyhDb21iYXRGcmFtZXdvcmspWzJdDQoNCmxvY2FsIGFjdGl2ZUNvbnRyb2xsZXIgPSBHZXRGYXN0QXR0YWNrLmFjdGl2ZUNvbnRyb2xsZXINCmZvciBpID0gMSwgMSBkbw0KICAgIGxvY2FsIGdldEJsYWRlSGl0cyA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5Db21iYXRGcmFtZXdvcmsuUmlnTGliKS5nZXRCbGFkZUhpdHMocGxyLkNoYXJhY3Rlcix7cGxyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0fSw2MCkNCiAgICBsb2NhbCBjYWMgPSB7fQ0KICAgIGxvY2FsIGhhc2ggPSB7fQ0KICAgIGZvciBrLCB2IGluIHBhaXJzKGdldEJsYWRlSGl0cykgZG8NCiAgICAgICAgaWYgdi5QYXJlbnQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgbm90IGhhc2hbdi5QYXJlbnRdIHRoZW4NCiAgICAgICAgICAgIHRhYmxlLmluc2VydChjYWMsIHYuUGFyZW50Lkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICBoYXNoW3YuUGFyZW50XSA9IHRydWUNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgZ2V0QmxhZGVIaXRzID0gY2FjDQogICAgaWYgI2dldEJsYWRlSGl0cyA+IDAgdGhlbg0KICAgICAgICBsb2NhbCB1OCA9IGRlYnVnLmdldHVwdmFsdWUoYWN0aXZlQ29udHJvbGxlci5hdHRhY2ssIDUpDQogICAgICAgIGxvY2FsIHU5ID0gZGVidWcuZ2V0dXB2YWx1ZShhY3RpdmVDb250cm9sbGVyLmF0dGFjaywgNikNCiAgICAgICAgbG9jYWwgdTcgPSBkZWJ1Zy5nZXR1cHZhbHVlKGFjdGl2ZUNvbnRyb2xsZXIuYXR0YWNrLCA0KQ0KICAgICAgICBsb2NhbCB1MTAgPSBkZWJ1Zy5nZXR1cHZhbHVlKGFjdGl2ZUNvbnRyb2xsZXIuYXR0YWNrLCA3KQ0KICAgICAgICBsb2NhbCB1MTIgPSAodTggKiA3OTg0MDUgKyB1NyAqIDcyNzU5NSkgJSB1OQ0KICAgICAgICBsb2NhbCB1MTMgPSB1NyAqIDc5ODQwNQ0KICAgICAgICAgICAgKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB1MTIgPSAodTEyICogdTkgKyB1MTMpICUgMTA5OTUxMTYyNzc3Ng0KICAgICAgICAgICAgICAgIHU4ID0gbWF0aC5mbG9vcih1MTIgLyB1OSkNCiAgICAgICAgICAgICAgICB1NyA9IHUxMiAtIHU4ICogdTkNCiAgICAgICAgICAgIGVuZCkoKQ0KICAgICAgICB1MTAgPSB1MTAgKyAxDQogICAgICAgIGRlYnVnLnNldHVwdmFsdWUoYWN0aXZlQ29udHJvbGxlci5hdHRhY2ssIDUsIHU4KQ0KICAgICAgICBkZWJ1Zy5zZXR1cHZhbHVlKGFjdGl2ZUNvbnRyb2xsZXIuYXR0YWNrLCA2LCB1OSkNCiAgICAgICAgZGVidWcuc2V0dXB2YWx1ZShhY3RpdmVDb250cm9sbGVyLmF0dGFjaywgNCwgdTcpDQogICAgICAgIGRlYnVnLnNldHVwdmFsdWUoYWN0aXZlQ29udHJvbGxlci5hdHRhY2ssIDcsIHUxMCkNCg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpIGFuZCBhY3RpdmVDb250cm9sbGVyLmJsYWRlcyBhbmQgYWN0aXZlQ29udHJvbGxlci5ibGFkZXNbMV0gdGhlbg0KICAgICAgICAgICAgICAgIGFjdGl2ZUNvbnRyb2xsZXIuYW5pbWF0b3IuYW5pbXMuYmFzaWNbMV06UGxheSgwLjAxLDAuMDEsMC4wMSkNCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmlnQ29udHJvbGxlckV2ZW50OkZpcmVTZXJ2ZXIoIndlYXBvbkNoYW5nZSIsdG9zdHJpbmcoR2V0Q3VycmVudEJsYWRlKCkpKQ0KICAgICAgICAgICAgICAgIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5WYWxpZGF0b3I6RmlyZVNlcnZlcihtYXRoLmZsb29yKHUxMiAvIDEwOTk1MTE2Mjc3NzYgKiAxNjc3NzIxNSksIHUxMCkNCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmlnQ29udHJvbGxlckV2ZW50OkZpcmVTZXJ2ZXIoImhpdCIsIGdldEJsYWRlSGl0cywgaSwgIiIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmRdXQ0KDQotLVtbbG9jYWwgRmFzdEF0dGFjayA9IHRydWUNCk1haW5fU2V0dGluZzphZGRUb2dnbGUoJ0Zhc3QgQXR0YWNrIDEgKFNlbGVjdGVkIERlbGF5KScsIEZhc3RBdHRhY2ssIGZ1bmN0aW9uKFZhbHVlKQ0KRmFzdEF0dGFjayA9IFZhbHVlDQplbmQpXV0NCg0KDQotLVtbc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBGYXN0QXR0YWNrIHRoZW4NCiAgICAgICAgbG9jYWwgQ2FtZXJhU2hha2VyUiA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5VdGlsLkNhbWVyYVNoYWtlcikNCiAgICAgICAgQ2FtZXJhU2hha2VyUjpTdG9wKCkNCg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KEZhc3RBdHRhY2tEZWxheSkNCiAgICAgICAgICAgICAgICBBdHRhY2tOb0NEKCkNCiAgICAgICAgICAgIHVudGlsIG5vdCBGYXN0QXR0YWNrDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKV1dDQoNCi0tW1tNYWluX1NldHRpbmc6YWRkVG9nZ2xlKCdGYXN0IEF0dGFjayAyIChXaXRob3V0IFNlbGVjdGVkIERlbGF5KScsIE1vYmlsZUZhc3RBdHRhY2ssIGZ1bmN0aW9uKFZhbHVlKQ0KTW9iaWxlRmFzdEF0dGFjayA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIE1vYmlsZUZhc3RBdHRhY2sgdGhlbg0KICAgICAgICBsb2NhbCBDYW1lcmFTaGFrZXJSID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlV0aWwuQ2FtZXJhU2hha2VyKQ0KICAgICAgICBDYW1lcmFTaGFrZXJSOlN0b3AoKQ0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCBDb21iYXRGcmFtZXdvcmtMaWIgPSBnZXR1cHZhbHVlcyhyZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllclNjcmlwdHMuUGxheWVyTW9kdWxlLkNvbnRyb2xNb2R1bGUpKQ0KICAgICAgICAgICAgbG9jYWwgQ21yRndMaWIgPSBDb21iYXRGcmFtZXdvcmtMaWJbMl0NCiAgICAgICAgICAgIGxvY2FsIGFjdGl2ZUNvbnRyb2xsZXIgPSBDbXJGd0xpYi5hY3RpdmVDb250cm9sbGVyDQogICAgICAgICAgICANCiAgICAgICAgICAgIGFjdGl2ZUNvbnRyb2xsZXIudGltZVRvTmV4dEF0dGFjayA9IDANCiAgICAgICAgICAgIGFjdGl2ZUNvbnRyb2xsZXIuYXR0YWNraW5nID0gZmFsc2UNCiAgICAgICAgICAgIGFjdGl2ZUNvbnRyb2xsZXIuYmxvY2tpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgYWN0aXZlQ29udHJvbGxlci50aW1lVG9OZXh0QmxvY2sgPSAwDQogICAgICAgICAgICBhY3RpdmVDb250cm9sbGVyLmluY3JlbWVudCA9IDANCiAgICAgICAgICAgIGFjdGl2ZUNvbnRyb2xsZXIuaGl0Ym94TWFnbml0dWRlID0gMTAwDQogICAgICAgICAgICBhY3RpdmVDb250cm9sbGVyLmZvY3VzU3RhcnQgPSAwDQogICAgICAgICAgICBhY3RpdmVDb250cm9sbGVyLmh1bWFub2lkLkF1dG9Sb3RhdGUgPSAwDQogICAgICAgICAgICBhY3RpdmVDb250cm9sbGVyLmFuaW1hdG9yLmFuaW1zLmJhc2ljWzFdOlBsYXkoMC4wMSwwLjAxLDAuMDEpDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKV1dDQoNCi0tLy8gQlJJTkcgTU9CUw0KZnVuY3Rpb24gQnJpbmdNb25zdGVyKFRhcmdldE5hbWUsIFRhcmdldENGcmFtZSkNCmxvY2FsIHNldGhpZGRlbnByb3BlcnR5ID0gc2V0aGlkZGVucHJvcGVydHkgb3IgKGZ1bmN0aW9uKC4uLikgcmV0dXJuIC4uLiBlbmQpDQpmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgIGlmIHYuTmFtZSA9PSBUYXJnZXROYW1lIHRoZW4NCiAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgIGlmICh2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IHRvbnVtYmVyKGJyaW5nZnJlYykgdGhlbg0KICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBUYXJnZXRDRnJhbWUNCiAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKQ0KICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIC0tc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KcGNhbGwoc2V0aGlkZGVucHJvcGVydHksIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpDQplbmQNCg0KYnJpbmdmcmVjID0gMjUwDQpNYWluX1NldHRpbmc6YWRkVGV4dGJveCgiQnJpbmcgTW9icyBEaXN0YW5jZSAoRGVmYXVsdCAyNTApIiwgYnJpbmdmcmVjLCBmdW5jdGlvbihWYWx1ZSkNCmJyaW5nZnJlYyA9IFZhbHVlDQplbmQpDQoNCmxvY2FsIEJyaW5nTW9icyA9IHRydWUNCk1haW5fU2V0dGluZzphZGRUb2dnbGUoIkJyaW5nIE1vYiIsIEJyaW5nTW9icywgZnVuY3Rpb24oVmFsdWUpDQpCcmluZ01vYnMgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBCcmluZ01vYnMgYW5kIChMZXZlbEZhcm1RdWVzdCBvciBMZXZlbEZhcm1Ob1F1ZXN0KSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIEJyaW5nTW9uc3RlcihMZXZlbF9GYXJtX05hbWUsIExldmVsX0Zhcm1fQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlaWYgQnJpbmdNb2JzIGFuZCBGYXJtX0JvbmUgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBCcmluZ01vbnN0ZXIoQm9uZV9GYXJtX05hbWUsIEJvbmVfRmFybV9DRnJhbWUpDQogICAgICAgIGVuZCkNCg0KICAgIGVsc2VpZiBCcmluZ01vYnMgYW5kIEZhcm1fRWN0b3BsYXNtIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQnJpbmdNb25zdGVyKEVjdG9fRmFybV9OYW1lLCBFY3RvX0Zhcm1fQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlaWYgQnJpbmdNb2JzIGFuZCBOZWFyZXN0X0Zhcm0gdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBCcmluZ01vbnN0ZXIoTmVhcmVzdF9GYXJtX05hbWUsIE5lYXJlc3RfRmFybV9DRnJhbWUpDQogICAgICAgIGVuZCkNCg0KICAgIGVsc2VpZiBCcmluZ01vYnMgYW5kIChTZWxlY3RNb25zdGVyX1F1ZXN0X0Zhcm0gb3IgU2VsZWN0TW9uc3Rlcl9Ob1F1ZXN0X0Zhcm0pIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQnJpbmdNb25zdGVyKFNlbGVjdE1vbnN0ZXJfRmFybV9OYW1lLCBTZWxlY3RNb25zdGVyX0Zhcm1fQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlaWYgQnJpbmdNb2JzIGFuZCBBdXRvX0Zhcm1fTWF0ZXJpYWwgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBCcmluZ01vbnN0ZXIoTWF0ZXJpYWxfRmFybV9OYW1lLCBNYXRlcmlhbF9GYXJtX0NGcmFtZSkNCiAgICAgICAgZW5kKQ0KDQogICAgZWxzZWlmIEJyaW5nTW9icyBhbmQgKEd1bk1hc3RlcnlfRmFybSBvciBEZXZpbE1hc3RlcnlfRmFybSkgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBCcmluZ01vbnN0ZXIoTWFzdGVyeV9GYXJtX05hbWUsIE1hc3RlcnlfRmFybV9DRnJhbWUpDQogICAgICAgIGVuZCkNCg0KICAgIGVsc2VpZiBCcmluZ01vYnMgYW5kIEF1dG9SZW5nb2t1IHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQnJpbmdNb25zdGVyKFJlbmdva3VfRmFybV9OYW1lLCBSZW5nb2t1X0Zhcm1fQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlaWYgQnJpbmdNb2JzIGFuZCBBdXRvQ2FrZVByaW5jZSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIEJyaW5nTW9uc3RlcihDYWtlUHJpbmNlX0Zhcm1fTmFtZSwgQ2FrZVByaW5jZV9GYXJtX0NGcmFtZSkNCiAgICAgICAgZW5kKQ0KDQogICAgZWxzZWlmIEJyaW5nTW9icyBhbmQgX0cuQXV0b0RvdWdoS2luZyB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIEJyaW5nTW9uc3RlcihEb3VnaEtpbmdfRmFybV9OYW1lLCBEb3VnaEtpbmdfRmFybV9DRnJhbWUpDQogICAgICAgIGVuZCkNCg0KICAgIGVsc2VpZiBCcmluZ01vYnMgYW5kIEF1dG9DaXRpemVuIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQnJpbmdNb25zdGVyKENpdGl6ZW5fRmFybV9OYW1lLCBDaXRpemVuX0Zhcm1fQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlaWYgQnJpbmdNb2JzIGFuZCBBdXRvRXZvUmFjZSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIEJyaW5nTW9uc3RlcihFdm9WMl9GYXJtX05hbWUsIEV2b1YyX0Zhcm1fQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlaWYgQnJpbmdNb2JzIGFuZCBBdXRvQmFydGlsbyB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIEJyaW5nTW9uc3RlcihCYXJ0aWxvX0Zhcm1fTmFtZSwgQmFydGlsb19GYXJtX0NGcmFtZSkNCiAgICAgICAgZW5kKQ0KDQogICAgZWxzZWlmIEJyaW5nTW9icyBhbmQgQXV0b1NvdWxHdWl0YXIgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBCcmluZ01vbnN0ZXIoU291bEd1aXRhcl9GYXJtX05hbWUsIFNvdWxHdWl0YXJfRmFybV9DRnJhbWUpDQogICAgICAgIGVuZCkNCg0KICAgIGVsc2VpZiBCcmluZ01vYnMgYW5kIEF1dG9NdXNrZXRlZXIgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBCcmluZ01vbnN0ZXIoTXVza2V0ZXJlX0Zhcm1fTmFtZSwgTXVza2V0ZXJlX0Zhcm1fQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgIGVsc2VpZiBCcmluZ01vYnMgYW5kIEF1dG9UcmFpbiB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIEJyaW5nTW9uc3RlcihBbmNpZW50X0Zhcm1fTmFtZSwgQW5jaWVudF9GYXJtX0NGcmFtZSkNCiAgICAgICAgZW5kKQ0KDQogICAgZWxzZWlmIEJyaW5nTW9icyBhbmQgQXV0b1BpcmF0ZUNhc3RsZSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIEJyaW5nTW9uc3RlcihQaXJhdGVDYXN0bGVfTmFtZSwgUGlyYXRlQ2FzdGxlX0NGcmFtZSkNCiAgICAgICAgZW5kKQ0KICAgIGVsc2VpZiBCcmluZ01vYnMgYW5kIEJsYXplRW1iZXJGYXJtIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQnJpbmdNb25zdGVyKEJsYXplRW1iZXJfRmFybV9OYW1lLCBCbGF6ZUVtYmVyX0Zhcm1fQ0ZyYW1lKQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KTWFpbl9TZXR0aW5nOmFkZFRvZ2dsZSgiQnlwYXNzIFRlbGVwb3J0IiwgQnlQYXNzVFAsIGZ1bmN0aW9uKFZhbHVlKQ0KQnlQYXNzVFAgPSBWYWx1ZQ0KZW5kKQ0KDQpsb2NhbCBBdXRvU2V0U3Bhd24gPSB0cnVlDQpNYWluX1NldHRpbmc6YWRkVG9nZ2xlKCdTZXQgU3Bhd24gUG9pbnQnLCBBdXRvU2V0U3Bhd24sIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b1NldFNwYXduID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIEF1dG9TZXRTcGF3biB0aGVuDQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlNldFNwYXduUG9pbnQiKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCg0KTWFpbl9TZXR0aW5nOmFkZEJ1dHRvbignUmVzZXQgQ2hhcmFjdGVyJywgZnVuY3Rpb24oKQ0KbG9jYWwgcGxheWVyYyA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXINCmZvciBpLHYgaW4gcGFpcnMocGxheWVyYzpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgIGlmIHY6SXNBKCdCYXNlUGFydCcpIHRoZW4NCiAgICAgICAgdjpEZXN0cm95KCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIFNFVFRJTkcgUklHSFQNCmxvY2FsIFNldHRpbmdfUmlnaHQgPSBUYWIuVGFiX1NldHRpbmc6YWRkU2VjdGlvbigpDQoNCmxvY2FsIFNraWxsX1NldHRpbmcgPSBTZXR0aW5nX1JpZ2h0OmFkZE1lbnUoJyNTa2lsbCBNYXN0ZXJ5JykNCg0KU2tpbGxfU2V0dGluZzphZGRUb2dnbGUoJ1VzZSBTa2lsbCBaJywgX0cuU2tpbGxaLCBmdW5jdGlvbihWYWx1ZSkNCl9HLlNraWxsWiA9IFZhbHVlDQplbmQpDQoNClNraWxsX1NldHRpbmc6YWRkVG9nZ2xlKCdVc2UgU2tpbGwgWCcsIF9HLlNraWxsWCwgZnVuY3Rpb24oVmFsdWUpDQpfRy5Ta2lsbFggPSBWYWx1ZQ0KZW5kKQ0KDQpTa2lsbF9TZXR0aW5nOmFkZFRvZ2dsZSgnVXNlIFNraWxsIEMnLCBfRy5Ta2lsbEMsIGZ1bmN0aW9uKFZhbHVlKQ0KX0cuU2tpbGxDID0gVmFsdWUNCmVuZCkNCg0KU2tpbGxfU2V0dGluZzphZGRUb2dnbGUoJ1VzZSBTa2lsbCBWJywgX0cuU2tpbGxWLCBmdW5jdGlvbihWYWx1ZSkNCl9HLlNraWxsViA9IFZhbHVlDQplbmQpDQoNClNraWxsX1NldHRpbmc6YWRkVG9nZ2xlKCdVc2UgU2tpbGwgRicsIF9HLlNraWxsRiwgZnVuY3Rpb24oVmFsdWUpDQpfRy5Ta2lsbEYgPSBWYWx1ZQ0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmxvY2FsIEFiaWxpdHlfU2V0dGluZ3MgPSBTZXR0aW5nX1JpZ2h0OmFkZE1lbnUoJyNBYmlsaXR5IFNldHRpbmdzJykNCg0KbG9jYWwgQnVzb0hha2kgPSB0cnVlDQpBYmlsaXR5X1NldHRpbmdzOmFkZFRvZ2dsZSgiQnVzbyBIYWtpIiwgQnVzb0hha2ksIGZ1bmN0aW9uKFZhbHVlKQ0KQnVzb0hha2kgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgQnVzb0hha2kgdGhlbg0KICAgICAgICBpZiBub3QgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGFzQnVzbyIpIHRoZW4NCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1c28iKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpBYmlsaXR5X1NldHRpbmdzOmFkZFRvZ2dsZSgiS2VuIEhha2kiLCBLZW5IYWtpLCBmdW5jdGlvbihWYWx1ZSkNCktlbkhha2kgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgS2VuSGFraSB0aGVuDQogICAgICAgIGlmIG5vdCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIaWdobGlnaHQiKSB0aGVuDQogICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIksiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgIHdhaXQoLjEpDQogICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJLIiwgZmFsc2UsIGdhbWUpDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gTWlzYyBTZXR0aW5nDQpsb2NhbCBNaXNjX1NldHRpbmdzID0gU2V0dGluZ19SaWdodDphZGRNZW51KCcjTWlzYyBTZXR0aW5nJykNCk1pc2NfU2V0dGluZ3M6YWRkVG9nZ2xlKCJEaXNhYmxlIEF1ZGlvIEVmZmVjdCIsIERlbGV0ZUF1ZGlvRWZmZWN0LCBmdW5jdGlvbihWYWx1ZSkNCkRlbGV0ZUF1ZGlvRWZmZWN0ID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIERlbGV0ZUF1ZGlvRWZmZWN0IHRoZW4NCiAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXTpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgaWYgdi5OYW1lID09ICJTb3VuZHMiIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaTIsdjIgaW4gcGFpcnModjpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2MjpJc0EoIlBhcnQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB2MjpEZXN0cm95KCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAoIkN1cnZlZFJpbmciKSBvciB2Lk5hbWUgPT0gKCJTbGFzaEhpdCIpIG9yIHYuTmFtZSA9PSAoIlN3b3JkU2xhc2giKSBvciB2Lk5hbWUgPT0gKCJTbGFzaFRhaWwiKSB0aGVuDQogICAgICAgICAgICAgICAgdjpEZXN0cm95KCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpNaXNjX1NldHRpbmdzOmFkZFRvZ2dsZSgnSGlkZSBOb3RpZmljYXRpb24nLCBIaWRlTm90aWZpY2F0aW9uLCBmdW5jdGlvbihWYWx1ZSkNCkhpZGVOb3RpZmljYXRpb24gPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBIaWRlTm90aWZpY2F0aW9uIHRoZW4NCiAgICAgICAgZm9yIF8sdiBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk5vdGlmaWNhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgIHY6RGVzdHJveSgpDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk1pc2NfU2V0dGluZ3M6YWRkQnV0dG9uKCJEZXN0cm95IEVmZmVjdCBBbmltYXRpb24iLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuQXNzZXRzLk1vZGVsczpEZXN0cm95KCkNCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Bc3NldHMuR1VJOkRlc3Ryb3koKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkFzc2V0cy5TbGFzaEhpdDpEZXN0cm95KCkNCmZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuRGVhdGg6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICB2OkRlc3Ryb3koKQ0KZW5kDQpmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyLlJlc3Bhd246R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICB2OkRlc3Ryb3koKQ0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBUYWIgU2VhDQpsb2NhbCBTZWFfTGVmdCA9IFRhYi5UYWJfU2VhOmFkZFNlY3Rpb24oKQ0KLS0vLyBTRUEgRkFSTQ0KbG9jYWwgU2VhX0Zhcm0gPSBTZWFfTGVmdDphZGRNZW51KCcjU2VhIEV2ZW50JykNCg0KLS0vLyBUV0VFTiBCT0FUUw0KZnVuY3Rpb24gVFBCKEJvYXRzUG9zKQ0KbG9jYWwgRGlzdGFuY2UgPSAoQm9hdHNQb3MuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUJyaWdhZGUuVmVoaWNsZVNlYXQuUG9zaXRpb24pLk1hZ25pdHVkZQ0KaWYgRGlzdGFuY2UgPiAxIHRoZW4NCiAgICBTcGVlZCA9IFNwZWVkQm9hdFR3ZWVuDQplbmQNCmdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHMuUGlyYXRlQnJpZ2FkZS5WZWhpY2xlU2VhdCxUd2VlbkluZm8ubmV3KERpc3RhbmNlL1NwZWVkLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcikse0NGcmFtZSA9IEJvYXRzUG9zfSk6UGxheSgpDQppZiBfRy5TdG9wVHdlZW5Cb2F0IHRoZW4NCiAgICBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOkNyZWF0ZShnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUJyaWdhZGUuVmVoaWNsZVNlYXQsVHdlZW5JbmZvLm5ldyhEaXN0YW5jZS9TcGVlZCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpLHtDRnJhbWUgPSBCb2F0c1Bvc30pOkNhbmNlbCgpDQplbmQNCmVuZA0KDQotLS8vIENBTkNFTCBUV0VFTiBCT0FUUw0KZnVuY3Rpb24gU3RvcEJvYXRzKHRhcmdldCkNCmlmIG5vdCB0YXJnZXQgdGhlbg0KICAgIF9HLlN0b3BUd2VlbkJvYXQgPSB0cnVlDQogICAgd2FpdCguMSkNCiAgICBUUEIoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0cy5QaXJhdGVCcmlnYWRlLlZlaGljbGVTZWF0LkNGcmFtZSkNCiAgICB3YWl0KC4xKQ0KICAgIF9HLlN0b3BUd2VlbkJvYXQgPSBmYWxzZQ0KZW5kDQplbmQNCg0KDQotLS8vIEJvYXQgVHdlZW4gQW5jaG9yDQpzcGF3bihmdW5jdGlvbigpDQpwY2FsbChmdW5jdGlvbigpDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgRG9qb1F1ZXN0RW5hYmxlIHRoZW4NCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHM6RmluZEZpcnN0Q2hpbGQoJ1BpcmF0ZUJyaWdhZGUnKSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIF8sdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUJyaWdhZGU6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdi5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0KcGNhbGwoZnVuY3Rpb24oKQ0KICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpDQogICAgICAgIGlmIEF1dG9TZWFGYXJtIG9yIEF1dG9TYWlsIHRoZW4NCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHM6RmluZEZpcnN0Q2hpbGQoQm9hdFNlbGVjdGVkKSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgQm9hdHNUYXJnZXQgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzOkZpbmRGaXJzdENoaWxkKEJvYXRTZWxlY3RlZCkNCiAgICAgICAgICAgICAgICBmb3IgXyx2IGluIHBhaXJzKEJvYXRzVGFyZ2V0OkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCkNCmVuZCkNCmVuZCkNCg0KLS0vLyBCb2F0cyBCb2R5IFZlbG9jaXR5DQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgRG9qb1F1ZXN0RW5hYmxlIHRoZW4NCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHMuUGlyYXRlQnJpZ2FkZS5WZWhpY2xlU2VhdC5Cb2R5VmVsb2NpdHkuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygxMDAwMDAsMTAwMDAwLDEwMDAwMCkNCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHMuUGlyYXRlQnJpZ2FkZS5WZWhpY2xlU2VhdC5Cb2R5VmVsb2NpdHkuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0cy5QaXJhdGVCcmlnYWRlLlZlaGljbGVTZWF0LkJvZHlWZWxvY2l0eS5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KDEwMDAwMCwgMCwgMTAwMDAwKQ0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0cy5QaXJhdGVCcmlnYWRlLlZlaGljbGVTZWF0LkJvZHlWZWxvY2l0eS5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgQXV0b1NlYUZhcm0gb3IgQXV0b1NhaWwgdGhlbg0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0czpGaW5kRmlyc3RDaGlsZChCb2F0U2VsZWN0ZWQpLlZlaGljbGVTZWF0LkJvZHlWZWxvY2l0eS5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KDEwMDAwMDAwMDAwMCwxMDAwMDAwMDAwMDAsMTAwMDAwMDAwMDAwKQ0KICAgICAgICAgICAgLS1nYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzOkZpbmRGaXJzdENoaWxkKEJvYXRTZWxlY3RlZCkuVmVoaWNsZVNlYXQuQm9keVBvc2l0aW9uLk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMTAwMDAwMDAwLDEwMDAwMDAwMCwxMDAwMDAwMDApDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHM6RmluZEZpcnN0Q2hpbGQoQm9hdFNlbGVjdGVkKS5WZWhpY2xlU2VhdC5Cb2R5VmVsb2NpdHkuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygyNDUzNDA2OTc2LCAwLCAyNDUzNDA2OTc2KQ0KICAgICAgICAgICAgLS1nYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzOkZpbmRGaXJzdENoaWxkKEJvYXRTZWxlY3RlZCkuVmVoaWNsZVNlYXQuQm9keVBvc2l0aW9uLk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMCwgMjQ1MzQwNjk3NiwgMCkNCiAgICAgICAgICAgIC0tZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0czpGaW5kRmlyc3RDaGlsZChCb2F0U2VsZWN0ZWQpLlZlaGljbGVTZWF0LkJvZHlWZWxvY2l0eS5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQ0KDQogICAgICAgIGVuZA0KICAgIGVuZCkNCmVuZA0KZW5kKQ0KDQpmdW5jdGlvbiBQbGF5Qm9hdHNUd2VlbihUYXJnZXQpDQpsb2NhbCBEaXN0YW5jZSA9IChUYXJnZXQuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzOkZpbmRGaXJzdENoaWxkKEJvYXRTZWxlY3RlZCkuVmVoaWNsZVNlYXQuUG9zaXRpb24pLk1hZ25pdHVkZQ0KaWYgRGlzdGFuY2UgPiAxIHRoZW4NCiAgICBTcGVlZCA9IFNwZWVkQm9hdFR3ZWVuDQplbmQNCg0KZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0czpGaW5kRmlyc3RDaGlsZChCb2F0U2VsZWN0ZWQpLlZlaGljbGVTZWF0LFR3ZWVuSW5mby5uZXcoRGlzdGFuY2UvU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSx7Q0ZyYW1lID0gVGFyZ2V0fSk6UGxheSgpDQppZiBfRy5TdG9wVHdlZW5Cb2F0IHRoZW4NCiAgICBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOkNyZWF0ZShnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzOkZpbmRGaXJzdENoaWxkKEJvYXRTZWxlY3RlZCkuVmVoaWNsZVNlYXQsVHdlZW5JbmZvLm5ldyhEaXN0YW5jZS9TcGVlZCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpLHtDRnJhbWUgPSBUYXJnZXR9KTpDYW5jZWwoKQ0KZW5kDQplbmQNCg0KLS0vLyBDQU5DRUwgVFdFRU4gQk9BVFMNCmZ1bmN0aW9uIFN0b3BCb2F0c1R3ZWVuKHRhcmdldCkNCmlmIG5vdCB0YXJnZXQgdGhlbg0KICAgIF9HLlN0b3BUd2VlbkJvYXQgPSB0cnVlDQogICAgd2FpdCguMSkNCiAgICBQbGF5Qm9hdHNUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzOkZpbmRGaXJzdENoaWxkKEJvYXRTZWxlY3RlZCkuVmVoaWNsZVNlYXQuQ0ZyYW1lKQ0KICAgIHdhaXQoLjEpDQogICAgX0cuU3RvcFR3ZWVuQm9hdCA9IGZhbHNlDQplbmQNCmVuZA0KDQpmdW5jdGlvbiBDaGVja1NlYSgpDQppZiBTZWFMZXZlbFNlbGVjdGVkID09ICdMZXZlbCAxJyB0aGVuDQogICAgU2VhQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtMjAwMDUuMzc4OSwgMzMuOTMzMDQ4MiwgODg5Mi41MDc4MSwgLTAuMjU1NzkyNDA5LCAtMC4wMTY3OTk1MjQ0LCAwLjk2NjU4NTc1NSwgLTAuMDY1NTM1MjAyNiwgMC45OTc4NTAyMzksIDEuNDAzMzYyNzZlLTA5LCAtMC45NjQ1MDc4MTgsIC0wLjA2MzM0NTM5NSwgLTAuMjU2MzQzNDg0KQ0KZWxzZWlmIFNlYUxldmVsU2VsZWN0ZWQgPT0gJ0xldmVsIDInIHRoZW4NCiAgICBTZWFDRnJhbWUgPSBDRnJhbWUubmV3KC0yNDIwMy4wMjU0LCAzMy45NDEzMjIzLCA5MTk2LjM4ODY3LCAwLjAwMDI5Mjk1MjAyNywgMy4xMzY0MzVlLTA2LCAwLjk5OTk5OTk0LCAtMC4wMTA3MDU1NDM3LCAwLjk5OTk0MjcyLCAtNC40NDkyMzAyMmUtMTEsIC0wLjk5OTk0MjY2LCAtMC4wMTA3MDU1NDI4LCAwLjAwMDI5Mjk2ODgyKQ0KZWxzZWlmIFNlYUxldmVsU2VsZWN0ZWQgPT0gJ0xldmVsIDMnIHRoZW4NCiAgICBTZWFDRnJhbWUgPSBDRnJhbWUubmV3KC0yODQ2Mi40MDgyLCAzMy45NDE1MDU0LCA5MTQwLjkwNzIzLCAwLjIxMDY0NDA2NiwgLTAuMDAxNTAyNzk4NTIsIDAuOTc3NTYxNjUzLCAwLjAwNzEzNDEyMTM4LCAwLjk5OTk3NDU0OSwgLTEuMzYwOTcyMzFlLTEwLCAtMC45Nzc1MzY3OTgsIDAuMDA2OTc0MDQzNzksIDAuMjEwNjQ5NDMxKQ0KZWxzZWlmIFNlYUxldmVsU2VsZWN0ZWQgPT0gJ0xldmVsIDQnIHRoZW4NCiAgICBTZWFDRnJhbWUgPSBDRnJhbWUubmV3KC0zMzk3MC4yNjE3LCAzMy45NDEzMywgNzI0Ni4xNDA2MiwgMC4zOTM4MDA3MDYsIDAuMDAzODA2OTU0MDIsIDAuOTE5MTg3OTYzLCAtMC4wMDk2NjY3NTg1OSwgMC45OTk5NTMyNywgMS45ODI0NzkzMmUtMTAsIC0wLjkxOTE0NDk4OCwgLTAuMDA4ODg1NTY4MDEsIDAuMzkzODE5MDk0KQ0KZWxzZWlmIFNlYUxldmVsU2VsZWN0ZWQgPT0gJ0xldmVsIDUnIHRoZW4NCiAgICBTZWFDRnJhbWUgPSBDRnJhbWUubmV3KC00MDU5MC42MDE2LCAzMy45NDA1NDAzLCAtNzUzNy43NjkwNCwgLTAuNjM5MzUxMzY4LCAtMC4wMTU5NDYzMDI2LCAwLjc2ODc0OTI5NywgLTAuMDI0OTMzNjE5NCwgMC45OTk2ODkxMDIsIC0xLjI0OTI4NTA1ZS0xMSwgLTAuNzY4NTEwMzQyLCAtMC4wMTkxNjc3MDI2LCAtMC42Mzk1NTAyMDkpDQplbHNlaWYgU2VhTGV2ZWxTZWxlY3RlZCA9PSAnTGV2ZWwgNicgdGhlbg0KICAgIFNlYUNGcmFtZSA9IENGcmFtZS5uZXcoLTQ0NDIzLjE0ODQsIDMzLjk0MTY4MDksIC0zNzM3LjI0NzMxLCAtMC41NjA1MjQyODUsIC0wLjAwMjMxNDEzMzgsIDAuODI4MTM0Nzc1LCAtMC4wMDQxMjg0ODE3MywgMC45OTk5OTE0NzcsIC0yLjIzMTc1NTg5ZS0xMCwgLTAuODI4MTI3NjgyLCAtMC4wMDM0MTg5Mzk0MiwgLTAuNTYwNTI5MDUzKQ0KZW5kDQplbmQNCg0KDQpsb2NhbCBCb2F0TGlzdCA9IHsNCidEaW5naHknOyAnUGlyYXRlU2xvb3AnOyAnUGlyYXRlQnJpZ2FkZSc7ICdQaXJhdGVHcmFuZEJyaWdhZGUnOw0KfQ0KU2VhX0Zhcm06YWRkRHJvcGRvd24oIlNlbGVjdCBCb2F0IiwgQm9hdFNlbGVjdGVkLCBCb2F0TGlzdCwgZnVuY3Rpb24oVmFsdWUpDQpCb2F0U2VsZWN0ZWQgPSBWYWx1ZQ0KZW5kKQ0KDQpsb2NhbCBTZWFMZXZlbExpc3QgPSB7DQonTGV2ZWwgMSc7ICdMZXZlbCAyJzsgJ0xldmVsIDMnOyAnTGV2ZWwgNCc7ICdMZXZlbCA1JzsgJ0xldmVsIDYnOw0KfQ0KU2VhX0Zhcm06YWRkRHJvcGRvd24oIlNlbGVjdCBTZWEgTGV2ZWwiLCBTZWFMZXZlbFNlbGVjdGVkLCBTZWFMZXZlbExpc3QsIGZ1bmN0aW9uKFZhbHVlKQ0KU2VhTGV2ZWxTZWxlY3RlZCA9IFZhbHVlDQplbmQpDQoNClNlYV9GYXJtOmFkZFRvZ2dsZSgnQXV0byBTYWlsJywgQXV0b1NhaWwsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b1NhaWwgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b1NhaWwpDQpTdG9wQm9hdHNUd2VlbihBdXRvU2FpbCkNCmVuZCkNCg0KbG9jYWwgVGlraVBvc3QgPSBDRnJhbWUubmV3KC0xNjE5Mi41NzQyLCAxMS4wNTUyNTg4LCAxNzQxLjQ5MTIxLCAwLjkyNzk4OTc4MSwgMCwgLTAuMzcyNjA1NjgxLCAtMCwgMSwgMCwgMC4zNzI2MDU2ODEsIDAsIDAuOTI3OTg5NzgxKQ0KDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9TYWlsIHRoZW4NCiAgICAgICAgDQogICAgICAgIC0tbG9jYWwgUm91Z2hTZWFQb3MgPSBDRnJhbWUubmV3KC00NzA0MS42NjQxLCAxMC44MzY1NzQ2LCAtNjg1OC43NDA3MiwgMC43MDMwNzEzNTYsIC0wLjAyODY3OTk1OTUsIDAuNzEwNTQwNzEyLCAwLjA0MDc1ODQ5NDMsIDAuOTk5MTY5MDUyLCAtMi40MTM4MDQ3MWUtMDksIC0wLjcwOTk1MDI2OCwgMC4wMjg5NjA1NzA3LCAwLjcwMzY1NjA3NykNCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQ2hlY2tTZWEoKQ0KDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzOkZpbmRGaXJzdENoaWxkKEJvYXRTZWxlY3RlZCkgdGhlbg0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0czpGaW5kRmlyc3RDaGlsZChCb2F0U2VsZWN0ZWQpLk93bmVyLlZhbHVlLk5hbWUgPT0gdG9zdHJpbmcoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUpIHRoZW4NCg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKS5TaXQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0czpGaW5kRmlyc3RDaGlsZChCb2F0U2VsZWN0ZWQpLlZlaGljbGVTZWF0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwxLDApKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKS5TaXQgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLl9Xb3JsZE9yaWdpbi5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoJ1JvdWdoIFNlYScpIGFuZCBub3QgZ2FtZS5Xb3Jrc3BhY2UuX1dvcmxkT3JpZ2luLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWMgSXNsYW5kIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXlCb2F0c1R3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuX1dvcmxkT3JpZ2luLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgnUm91Z2ggU2VhJykuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLERpc1NlYUZhcm0sMCkpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZS5Xb3Jrc3BhY2UuX1dvcmxkT3JpZ2luLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWMgSXNsYW5kIikgYW5kIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuX1dvcmxkT3JpZ2luLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgnUm91Z2ggU2VhJykgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXlCb2F0c1R3ZWVuKGdhbWUuV29ya3NwYWNlLl9Xb3JsZE9yaWdpbi5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljIElzbGFuZCIpLkNGcmFtZSAqIENGcmFtZS5uZXcoMCxEaXNTZWFGYXJtLDApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWUuV29ya3NwYWNlLl9Xb3JsZE9yaWdpbi5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljIElzbGFuZCIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5fV29ybGRPcmlnaW4uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCdSb3VnaCBTZWEnKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGxheUJvYXRzVHdlZW4oZ2FtZS5Xb3Jrc3BhY2UuX1dvcmxkT3JpZ2luLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWMgSXNsYW5kIikuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLERpc1NlYUZhcm0sMCkpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuX1dvcmxkT3JpZ2luLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgnUm91Z2ggU2VhJykgb3Igbm90IGdhbWUuV29ya3NwYWNlLl9Xb3JsZE9yaWdpbi5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljIElzbGFuZCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGF5Qm9hdHNUd2VlbihTZWFDRnJhbWUgKiBDRnJhbWUubmV3KDAsRGlzU2VhRmFybSwwKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBBdHRhY2tGaXNoIG9yIEF0dGFja1RlcnJvcnNoYXJrIG9yIEF0dGFja0dob3N0c2hpcCBvciBBdXRvRmFybVNlYUJlYXN0IHRoZW4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLlNlYUJlYXN0czpGaW5kRmlyc3RDaGlsZCgnU2VhQmVhc3QxJykgb3IgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgnUGlyYXRlR3JhbmRCcmlnYWRlJykgb3IgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgnUGlyYXRlQnJpZ2FkZScpIG9yIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoJ1RlcnJvcnNoYXJrJykgb3IgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgnU2hhcmsnKSBvciBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCdQaXJhbmhhJykgb3IgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgnRmlzaCBDcmV3IE1lbWJlcicpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXlCb2F0c1R3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHM6RmluZEZpcnN0Q2hpbGQoQm9hdFNlbGVjdGVkKS5WZWhpY2xlU2VhdC5DRnJhbWUpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlNoYXJrIiBvciB2Lk5hbWUgPT0gIlBpcmFuaGEiIG9yIHYuTmFtZSA9PSAiRmlzaCBDcmV3IE1lbWJlciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlYVVzZVNraWxsID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikuU2l0ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb25TZWFGYXJtKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBIdW1Pd24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBIdW1Pd24uSGVhbHRoIDwgSHVtT3duLk1heEhlYWx0aCAqIDM1IC8gMTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLDEyMCwwKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgSHVtT3duLkhlYWx0aCA+IEh1bU93bi5NYXhIZWFsdGggKiA1MCAvIDEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCxEaXNTZWFGYXJtLDApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNDAsNDAsNDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdHRhY2tGaXNoIG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIlRlcnJvcnNoYXJrIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VhVXNlU2tpbGwgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKS5TaXQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvblNlYUZhcm0pDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBIdW1Pd24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBIdW1Pd24uSGVhbHRoIDwgSHVtT3duLk1heEhlYWx0aCAqIDM1IC8gMTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLDEyMCwwKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgSHVtT3duLkhlYWx0aCA+IEh1bU93bi5NYXhIZWFsdGggKiA1MCAvIDEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCxEaXNTZWFGYXJtLDApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDQwLDQwLDQwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXR0YWNrVGVycm9yc2hhcmsgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHYuTmFtZSA9PSAiUGlyYXRlR3JhbmRCcmlnYWRlIiBvciB2Lk5hbWUgPT0gIlBpcmF0ZUJyaWdhZGUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLlZhbHVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpLlNpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uU2VhRmFybSkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VhVXNlU2tpbGwgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIEh1bU93biA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEh1bU93bi5IZWFsdGggPCBIdW1Pd24uTWF4SGVhbHRoICogMzUgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuRW5naW5lLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwxMjAsMCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEh1bU93bi5IZWFsdGggPiBIdW1Pd24uTWF4SGVhbHRoICogNTAgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuRW5naW5lLkNGcmFtZSAqIENGcmFtZS5uZXcoMCxEaXNTZWFGYXJtLDApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkVuZ2luZS5TaXplID0gVmVjdG9yMy5uZXcoNDAsNDAsNDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkVuZ2luZS5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXR0YWNrR2hvc3RzaGlwIG9yIHYuSHVtYW5vaWQuVmFsdWUgPD0gMCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzIChnYW1lLldvcmtzcGFjZS5TZWFCZWFzdHM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiU2VhQmVhc3QxIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgnSGVhbHRoJykgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IZWFsdGguVmFsdWUgPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpLlNpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWFVc2VTa2lsbCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb25TZWFGYXJtKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgSHVtT3duID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgSHVtT3duLkhlYWx0aCA8IEh1bU93bi5NYXhIZWFsdGggKiAzNSAvIDEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwxNTAsMCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEh1bU93bi5IZWFsdGggPiBIdW1Pd24uTWF4SGVhbHRoICogNTAgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsRGlzU2VhRmFybSwwKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldygxMjAsMTIwLDEyMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvRmFybVNlYUJlYXN0IG9yIHYuSGVhbHRoLlZhbHVlIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlYVVzZVNraWxsID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0czpGaW5kRmlyc3RDaGlsZChCb2F0U2VsZWN0ZWQpLlZlaGljbGVTZWF0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwxLDApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXlCb2F0c1R3ZWVuKFNlYUNGcmFtZSAqIENGcmFtZS5uZXcoMCxEaXNTZWFGYXJtLDApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHM6RmluZEZpcnN0Q2hpbGQoQm9hdFNlbGVjdGVkKS5Pd25lci5WYWx1ZS5OYW1lIH49IHRvc3RyaW5nKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lKSB0aGVuDQoNCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikuU2l0ID0gZmFsc2UNCg0KICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBCVFAoVGlraVBvc3QpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oVGlraVBvc3QpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgICAgIGlmIChUaWtpUG9zdC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikubWFnbml0dWRlIDw9IDEwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGFyZ3MgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIkJ1eUJvYXQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9IEJvYXRTZWxlY3RlZA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgZWxzZWlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzOkZpbmRGaXJzdENoaWxkKEJvYXRTZWxlY3RlZCkgdGhlbg0KDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikuU2l0ID0gZmFsc2UNCg0KICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgQlRQKFRpa2lQb3N0KQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2VlbihUaWtpUG9zdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiAoVGlraVBvc3QuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLm1hZ25pdHVkZSA8PSAxMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGFyZ3MgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiQnV5Qm9hdCIsDQogICAgICAgICAgICAgICAgICAgICAgICBbMl0gPSBCb2F0U2VsZWN0ZWQNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCiAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KU2VhX0Zhcm06YWRkVG9nZ2xlKCdBdHRhY2sgUGlyYW5oYS9TaGFyay9DcmV3JywgQXR0YWNrRmlzaCwgZnVuY3Rpb24oVmFsdWUpDQpBdHRhY2tGaXNoID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF0dGFja0Zpc2gpDQplbmQpDQoNClNlYV9GYXJtOmFkZFRvZ2dsZSgnQXR0YWNrIFRlcnJvcnNoYXJrIChSYWlkKScsIEF0dGFja1RlcnJvcnNoYXJrLCBmdW5jdGlvbihWYWx1ZSkNCkF0dGFja1RlcnJvcnNoYXJrID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF0dGFja1RlcnJvcnNoYXJrKQ0KZW5kKQ0KDQpTZWFfRmFybTphZGRUb2dnbGUoJ0F0dGFjayBHaG9zdCBTaGlwJywgQXR0YWNrR2hvc3RzaGlwLCBmdW5jdGlvbihWYWx1ZSkNCkF0dGFja0dob3N0c2hpcCA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdHRhY2tHaG9zdHNoaXApDQplbmQpDQoNClNlYV9GYXJtOmFkZFRvZ2dsZSgnQXR0YWNrIFNlYSBCZWFzdCknLCBBdXRvRmFybVNlYUJlYXN0LCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9GYXJtU2VhQmVhc3QgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0Zhcm1TZWFCZWFzdCkNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBUYWIgU2VhDQpsb2NhbCBTZWFfUmlnaHQgPSBUYWIuVGFiX1NlYTphZGRTZWN0aW9uKCkNCg0KbG9jYWwgQ29uZmlnX1NlYSA9IFNlYV9SaWdodDphZGRNZW51KCcjQ29uZmlnJykNCg0KbG9jYWwgV2VhcG9uTGlzdCA9IHsiTWVsZWUiLCJCbG94IEZydWl0IiwiU3dvcmQiLCJHdW4ifQ0KDQpTZWxlY3RXZWFwb25TZWFGYXJtID0gJ01lbGVlJw0KQ29uZmlnX1NlYTphZGREcm9wZG93bigiU2VsZWN0IFdlYXBvbiIsIFNlbGVjdFdlYXBvblNlYUZhcm0sIFdlYXBvbkxpc3QsZnVuY3Rpb24od2VhcG9uZnVuYykNClNlbGVjdFdlYXBvblNlYUZhcm0gPSB3ZWFwb25mdW5jDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBmb3IgaSAsdiBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgaWYgdi5Ub29sVGlwID09IFNlbGVjdFdlYXBvblNlYUZhcm0gdGhlbg0KICAgICAgICAgICAgU2VsZWN0V2VhcG9uU2VhRmFybSA9IHYuTmFtZQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpEaXNTZWFGYXJtID0gMzANCkNvbmZpZ19TZWE6YWRkVGV4dGJveCgiRGlzdGFuY2UgU2VhIEZhcm0iLCBEaXNTZWFGYXJtLCBmdW5jdGlvbihWYWx1ZSkNCkRpc1NlYUZhcm0gPSBWYWx1ZQ0KZW5kKQ0KDQpTcGVlZEJvYXRUd2VlbiA9IDM1MA0KQ29uZmlnX1NlYTphZGRUZXh0Ym94KCJUd2VlbiBCb2F0IFNwZWVkIiwgU3BlZWRCb2F0VHdlZW4sIGZ1bmN0aW9uKFZhbHVlKQ0KU3BlZWRCb2F0VHdlZW4gPSBWYWx1ZQ0KZW5kKQ0KDQpTcGVlZEFsbEJvYXQgPSAxMDANCkNvbmZpZ19TZWE6YWRkVGV4dGJveCgiU3BlZWQgQm9hdCBIYWNrIiwgU3BlZWRBbGxCb2F0LCBmdW5jdGlvbihWYWx1ZSkNClNwZWVkQWxsQm9hdCA9IFZhbHVlDQppZiBTcGVlZEFsbEJvYXQgdGhlbg0KICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHMuUGlyYXRlQnJpZ2FkZS5WZWhpY2xlU2VhdC5NYXhTcGVlZCA9IFNwZWVkQWxsQm9hdA0KZW5kDQplbmQpDQoNCkNvbmZpZ19TZWE6YWRkVG9nZ2xlKCdBdXRvIFcnLCBBdXRvVG91Y2hXLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9Ub3VjaFcgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvVG91Y2hXIHRoZW4NCiAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJXIiwgZmFsc2UsIGdhbWUpDQogICAgICAgIHdhaXQoLjEpDQogICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpDb25maWdfU2VhOmFkZFRvZ2dsZSgnU2tpbGwgWicsIF9HLlNlYVNraWxsWiwgZnVuY3Rpb24oVmFsdWUpDQpfRy5TZWFTa2lsbFogPSBWYWx1ZQ0KZW5kKQ0KDQpDb25maWdfU2VhOmFkZFRvZ2dsZSgnU2tpbGwgWCcsIF9HLlNlYVNraWxsWCwgZnVuY3Rpb24oVmFsdWUpDQpfRy5TZWFTa2lsbFggPSBWYWx1ZQ0KZW5kKQ0KDQpDb25maWdfU2VhOmFkZFRvZ2dsZSgnU2tpbGwgQycsIF9HLlNlYVNraWxsQywgZnVuY3Rpb24oVmFsdWUpDQpfRy5TZWFTa2lsbEMgPSBWYWx1ZQ0KZW5kKQ0KDQpDb25maWdfU2VhOmFkZFRvZ2dsZSgnU2tpbGwgVicsIF9HLlNlYVNraWxsViwgZnVuY3Rpb24oVmFsdWUpDQpfRy5TZWFTa2lsbFYgPSBWYWx1ZQ0KZW5kKQ0KDQpDb25maWdfU2VhOmFkZFRvZ2dsZSgnU2tpbGwgRicsIF9HLlNlYVNraWxsRiwgZnVuY3Rpb24oVmFsdWUpDQpfRy5TZWFTa2lsbEYgPSBWYWx1ZQ0KZW5kKQ0KDQpzcGF3bihmdW5jdGlvbigpDQpsb2NhbCBnZyA9IGdldHJhd21ldGF0YWJsZShnYW1lKQ0KbG9jYWwgb2xkID0gZ2cuX19uYW1lY2FsbA0Kc2V0cmVhZG9ubHkoZ2csZmFsc2UpDQpnZy5fX25hbWVjYWxsID0gbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oLi4uKQ0KICAgIGxvY2FsIG1ldGhvZCA9IGdldG5hbWVjYWxsbWV0aG9kKCkNCiAgICBsb2NhbCBhcmdzID0gey4uLn0NCiAgICBpZiB0b3N0cmluZyhtZXRob2QpID09ICJGaXJlU2VydmVyIiB0aGVuDQogICAgICAgIGlmIHRvc3RyaW5nKGFyZ3NbMV0pID09ICJSZW1vdGVFdmVudCIgdGhlbg0KICAgICAgICAgICAgaWYgdG9zdHJpbmcoYXJnc1syXSkgfj0gInRydWUiIGFuZCB0b3N0cmluZyhhcmdzWzJdKSB+PSAiZmFsc2UiIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBTZWFVc2VTa2lsbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHR5cGUoYXJnc1syXSkgPT0gInZlY3RvciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1syXSA9IFNlYU1vblBvc2l0aW9uDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbMl0gPSBDRnJhbWUubmV3KFNlYU1vblBvc2l0aW9uKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9sZCh1bnBhY2soYXJncykpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIG9sZCguLi4pDQplbmQpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIFNlYVVzZVNraWxsIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlBpcmF0ZUdyYW5kQnJpZ2FkZSIgb3Igdi5OYW1lID09ICJQaXJhdGVCcmlnYWRlIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgb3IgdjpGaW5kRmlyc3RDaGlsZCgiRW5naW5lIikgb3Igdi5IdW1hbm9pZC5WYWx1ZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWFNb25Qb3NpdGlvbiA9IHYuQm9keS5QYXJ0LlBvc2l0aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKFNlbGVjdFdlYXBvblNlYUZhcm0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKFNlbGVjdFdlYXBvblNlYUZhcm0pLk1vdXNlUG9zLlZhbHVlID0gU2VhTW9uUG9zaXRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuU2VhU2tpbGxaIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudCh0cnVlLCAiWiIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudChmYWxzZSwgIloiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNlYVNraWxsWCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlgiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJYIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5TZWFTa2lsbEMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJDIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KGZhbHNlLCAiQyIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuU2VhU2tpbGxWIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudCh0cnVlLCAiViIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudChmYWxzZSwgIlYiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNlYVNraWxsRiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkYiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJGIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IFNlYVVzZVNraWxsIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLlZhbHVlIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIlNoYXJrIiBvciB2Lk5hbWUgPT0gIlBpcmFuaGEiIG9yIHYuTmFtZSA9PSAiRmlzaCBDcmV3IE1lbWJlciIgb3Igdi5OYW1lID09ICJUZXJyb3JzaGFyayIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIG9yIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBvciB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWFNb25Qb3NpdGlvbiA9IHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChTZWxlY3RXZWFwb25TZWFGYXJtKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChTZWxlY3RXZWFwb25TZWFGYXJtKS5Nb3VzZVBvcy5WYWx1ZSA9IFNlYU1vblBvc2l0aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNlYVNraWxsWiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIloiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJaIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5TZWFTa2lsbFggdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJYIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KGZhbHNlLCAiWCIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuU2VhU2tpbGxDIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudCh0cnVlLCAiQyIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudChmYWxzZSwgIkMiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNlYVNraWxsViB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlYiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJWIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5TZWFTa2lsbEYgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJGIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiRiIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBTZWFVc2VTa2lsbCBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyAoZ2FtZS5Xb3Jrc3BhY2UuU2VhQmVhc3RzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJTZWFCZWFzdDEiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiUm9vdFBhcnQiKSBvciB2LkhlYWx0aC5WYWx1ZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWFNb25Qb3NpdGlvbiA9IHYuUm9vdFBhcnQuUG9zaXRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoU2VsZWN0V2VhcG9uU2VhRmFybSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoU2VsZWN0V2VhcG9uU2VhRmFybSkuTW91c2VQb3MuVmFsdWUgPSBTZWFNb25Qb3NpdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5TZWFTa2lsbFogdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJaIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KGZhbHNlLCAiWiIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuU2VhU2tpbGxYIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudCh0cnVlLCAiWCIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudChmYWxzZSwgIlgiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNlYVNraWxsQyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkMiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJDIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5TZWFTa2lsbFYgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJWIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KGZhbHNlLCAiViIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuU2VhU2tpbGxGIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRiIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkYiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgU2VhVXNlU2tpbGwgb3Igbm90IHYuUGFyZW50IG9yIHYuSGVhbHRoLlZhbHVlIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kIA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIFJhY2V2NCBMZWZ0DQpsb2NhbCBSYWNlX1Y0X0xlZnQgPSBUYWIuVGFiX1JhY2VWNDphZGRTZWN0aW9uKCkNCg0KbG9jYWwgSXNsYW5kSW5mbyA9IFJhY2VfVjRfTGVmdDphZGRNZW51KCIjSXNsYW5kIFN0YXR1cyIpDQoNCmxvY2FsIE1pcmFnZUNoZWNrID0gSXNsYW5kSW5mbzphZGRMYWJlbCgiIikNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuX1dvcmxkT3JpZ2luLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiTWlyYWdlIElzbGFuZCIpIHRoZW4NCiAgICAgICAgTWlyYWdlQ2hlY2s6UmVmcmVzaCgiTWlyYWdlIElzbGFuZCA6IFNwYXduIMOixZPigKYiKQ0KICAgIGVsc2UNCiAgICAgICAgTWlyYWdlQ2hlY2s6UmVmcmVzaCgiTWlyYWdlIElzbGFuZCA6IE5vdCBTcGF3biDDosKdxZIiKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCmxvY2FsIEtpdHN1bmVDaGVjayA9IElzbGFuZEluZm86YWRkTGFiZWwoIiIpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIGdhbWUuV29ya3NwYWNlLl9Xb3JsZE9yaWdpbi5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIktpdHN1bmUgSXNsYW5kIikgdGhlbg0KICAgICAgICBLaXRzdW5lQ2hlY2s6UmVmcmVzaCgiS2l0c3VuZSBJc2xhbmQgOiBTcGF3biDDosWT4oCmIikNCiAgICBlbHNlDQogICAgICAgIEtpdHN1bmVDaGVjazpSZWZyZXNoKCJLaXRzdW5lIElzbGFuZCA6IE5vdCBTcGF3biDDosKdxZIiKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCmxvY2FsIE1vb25DaGVjayA9IElzbGFuZEluZm86YWRkTGFiZWwoIiIpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIikuU2t5Lk1vb25UZXh0dXJlSWQgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE0OTQzMSIgdGhlbg0KICAgICAgICBNb29uQ2hlY2s6UmVmcmVzaCgiTW9vbiBTdGF0dXMgOiDDsMW4xZLigJggMTAwJSIpDQogICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKS5Ta3kuTW9vblRleHR1cmVJZCA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQ5MDUyIiB0aGVuDQogICAgICAgIE1vb25DaGVjazpSZWZyZXNoKCJNb29uIFN0YXR1cyA6IMOwxbjFkuKAmSA3NSUiKQ0KICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIikuU2t5Lk1vb25UZXh0dXJlSWQgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE0MzczMyIgdGhlbg0KICAgICAgICBNb29uQ2hlY2s6UmVmcmVzaCgiTW9vbiBTdGF0dXMgOiDDsMW4xZLigJwgNTAlIikNCiAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpLlNreS5Nb29uVGV4dHVyZUlkID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNTA0MDEiIHRoZW4NCiAgICAgICAgTW9vbkNoZWNrOlJlZnJlc2goIk1vb24gU3RhdHVzIDogw7DFuMWS4oCUIDI1JSIpDQogICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKS5Ta3kuTW9vblRleHR1cmVJZCA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQ5NjgwIiB0aGVuDQogICAgICAgIE1vb25DaGVjazpSZWZyZXNoKCJNb29uIFN0YXR1cyA6IMOwxbjFkuKAkyAxNSUiKQ0KICAgIGVsc2UNCiAgICAgICAgTW9vbkNoZWNrOlJlZnJlc2goIk1vb24gU3RhdHVzIDogw7DFuMWSxaEgMCUiKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gTWlyYWdlIElzbGFuZA0KbG9jYWwgTWlyYWdlX0lzbGFuZCA9IFJhY2VfVjRfTGVmdDphZGRNZW51KCcjTWlyYWdlIElzbGFuZCcpDQoNCk1pcmFnZV9Jc2xhbmQ6YWRkVG9nZ2xlKCJNaXJhZ2UgRVNQIiwgTWlyYWdlSXNsYW5kRXNwLCBmdW5jdGlvbihWYWx1ZSkNCk1pcmFnZUlzbGFuZEVzcCA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBNaXJhZ2VJc2xhbmRFc3AgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiTWlyYWdlIElzbGFuZCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjpGaW5kRmlyc3RDaGlsZCgiTWlyYWdlRVNQSXNsYW5kIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgQmlsbGJvYXJkR3VpID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgVGV4dExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuUGFyZW50ID0gdg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuQWN0aXZlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLk5hbWUgPSAiTWlyYWdlRVNQSXNsYW5kIg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkFsd2F5c09uVG9wID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkxpZ2h0SW5mbHVlbmNlID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5QYXJlbnQgPSBCaWxsYm9hcmRHdWkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMTAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnRTaXplID0gIlNpemUxNCINCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBEaXMgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAxMCkNCiAgICAgICAgICAgICAgICAgICAgdi5NaXJhZ2VFU1BJc2xhbmQuVGV4dExhYmVsLlRleHQgPSB2Lk5hbWUuLiJcbiIuLiJbIi4uRGlzLi4iXSINCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZWxzZQ0KICAgICAgICBmb3IgaSx2IGluIHBhaXJzIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiTWlyYWdlIElzbGFuZCIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIk1pcmFnZUVTUElzbGFuZCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdi5NaXJhZ2VFU1BJc2xhbmQ6RGVzdHJveSgpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZCkNCg0KTWlyYWdlX0lzbGFuZDphZGRUb2dnbGUoIkdlYXIgRVNQIiwgR2VhckVTUCwgZnVuY3Rpb24oVmFsdWUpDQpHZWFyRVNQID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIEdlYXJFU1AgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbyANCiAgICAgICAgICAgICAgICBpZiB2OklzQSgiTWVzaFBhcnQiKXRoZW4gDQogICAgICAgICAgICAgICAgICAgIGlmIHYuTWF0ZXJpYWwgPT0gIEVudW0uTWF0ZXJpYWwuTmVvbiB0aGVuICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCJHZWFyRVNQTWlyYWdlIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIEJpbGxib2FyZEd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBUZXh0TGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuUGFyZW50ID0gdg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5BY3RpdmUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLk5hbWUgPSAiR2VhckVTUE1pcmFnZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuQWx3YXlzT25Ub3AgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkxpZ2h0SW5mbHVlbmNlID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5QYXJlbnQgPSBCaWxsYm9hcmRHdWkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAxMDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnRTaXplID0gIlNpemUxNCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBEaXMgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUpDQogICAgICAgICAgICAgICAgICAgICAgICB2LkdlYXJFU1BNaXJhZ2UuVGV4dExhYmVsLlRleHQgPSB2Lk5hbWUuLiIgLSBbIi4uRGlzLi4iIE1dIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZWxzZQ0KICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbyANCiAgICAgICAgICAgIGlmIHY6SXNBKCJNZXNoUGFydCIpdGhlbiANCiAgICAgICAgICAgICAgICBpZiB2Lk1hdGVyaWFsID09ICBFbnVtLk1hdGVyaWFsLk5lb24gdGhlbiAgDQogICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkdlYXJFU1BNaXJhZ2UiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB2OkZpbmRGaXJzdENoaWxkKCJHZWFyRVNQTWlyYWdlIik6RGVzdHJveSgpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk1pcmFnZV9Jc2xhbmQ6YWRkVG9nZ2xlKCJGcnVpdCBEZWFsZXIgRVNQIiwgQWZkRVNQLCBmdW5jdGlvbihWYWx1ZSkNCkFmZEVTUCA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBBZmRFU1AgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQWR2YW5jZWQgRnJ1aXQgRGVhbGVyIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCJGcnVpdERlYWxlckVTUCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIEJpbGxib2FyZEd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIFRleHRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlBhcmVudCA9IHYNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkFjdGl2ZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5OYW1lID0gIkZydWl0RGVhbGVyRVNQIg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkFsd2F5c09uVG9wID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkxpZ2h0SW5mbHVlbmNlID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5QYXJlbnQgPSBCaWxsYm9hcmRHdWkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMjU1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnRTaXplID0gIlNpemUxNCINCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBEaXMgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSkNCiAgICAgICAgICAgICAgICAgICAgdi5GcnVpdERlYWxlckVTUC5UZXh0TGFiZWwuVGV4dCA9IHYuTmFtZS4uIiAtIFsiLi5EaXMuLiIgTV0iDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVsc2UNCiAgICAgICAgZm9yIGksdiBpbiBwYWlycyAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkFkdmFuY2VkIEZydWl0IERlYWxlciIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkZydWl0RGVhbGVyRVNQIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICB2LkZydWl0RGVhbGVyRVNQOkRlc3Ryb3koKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk1pcmFnZV9Jc2xhbmQ6YWRkVG9nZ2xlKCJUZWxlcG9ydCB0byBNaXJhZ2UiLCBUZWxlcG9ydHRvTWlyYWdlLCBmdW5jdGlvbihWYWx1ZSkNClRlbGVwb3J0dG9NaXJhZ2UgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oVGVsZXBvcnR0b01pcmFnZSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgVGVsZXBvcnR0b01pcmFnZSB0aGVuDQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJNeXN0aWNJc2xhbmQiKSB0aGVuDQogICAgICAgICAgICBfRy5DZW50ZXJNSSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZC5DZW50ZXIuUG9zaXRpb24NCiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoX0cuQ2VudGVyTUkpKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpNaXJhZ2VfSXNsYW5kOmFkZFRvZ2dsZSgiVGVsZXBvcnQgdG8gR2VhciIsIFRlbGVwb3J0dG9HZWFyLCBmdW5jdGlvbihWYWx1ZSkNClRlbGVwb3J0dG9HZWFyID0gVmFsdWUNCkNhbmNlbFR3ZWVuKFRlbGVwb3J0dG9HZWFyKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBUZWxlcG9ydHRvR2VhciB0aGVuDQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJNeXN0aWNJc2xhbmQiKSB0aGVuDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbyANCiAgICAgICAgICAgICAgICBpZiB2OklzQSgiTWVzaFBhcnQiKXRoZW4gDQogICAgICAgICAgICAgICAgICAgIGlmIHYuTWF0ZXJpYWwgPT0gIEVudW0uTWF0ZXJpYWwuTmVvbiB0aGVuICANCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpNaXJhZ2VfSXNsYW5kOmFkZFRvZ2dsZSgiVGVsZXBvcnQgdG8gQWR2YW5jZSBGcnVpdCBEZWFsZXIiLCBUZWxlcG9ydHRvRnJ1aXREZWFsZXIsIGZ1bmN0aW9uKFZhbHVlKQ0KVGVsZXBvcnR0b0ZydWl0RGVhbGVyID0gVmFsdWUNCkNhbmNlbFR3ZWVuKFRlbGVwb3J0dG9GcnVpdERlYWxlcikNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIFRlbGVwb3J0dG9GcnVpdERlYWxlciB0aGVuDQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpGaW5kRmlyc3RDaGlsZCgiQWR2YW5jZWQgRnJ1aXQgRGVhbGVyIikgdGhlbg0KICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3NbIkFkdmFuY2VkIEZydWl0IERlYWxlciJdLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKSkNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBLaXRzdW5lIElzbGFuZA0KbG9jYWwgS2l0c3VuZV9Jc2xhbmQgPSBSYWNlX1Y0X0xlZnQ6YWRkTWVudSgnI0tpdHN1bmUgSXNsYW5kJykNCg0KS2l0c3VuZV9Jc2xhbmQ6YWRkVG9nZ2xlKCJLaXRzdW5lIEVTUCIsIEtpdHN1bmVJc2xhbmRFc3AsIGZ1bmN0aW9uKFZhbHVlKQ0KS2l0c3VuZUlzbGFuZEVzcCA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBLaXRzdW5lSXNsYW5kRXNwIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIktpdHN1bmUgSXNsYW5kIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCJLaXRzdW5lRVNQSXNsYW5kIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgQmlsbGJvYXJkR3VpID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgVGV4dExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuUGFyZW50ID0gdg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuQWN0aXZlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLk5hbWUgPSAiS2l0c3VuZUVTUElzbGFuZCINCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5BbHdheXNPblRvcCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5MaWdodEluZmx1ZW5jZSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuUGFyZW50ID0gQmlsbGJvYXJkR3VpDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZA0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDEwMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5Gb250U2l6ZSA9ICJTaXplMTQiDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgRGlzID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdi5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMTApDQogICAgICAgICAgICAgICAgICAgIHYuS2l0c3VuZUVTUElzbGFuZC5UZXh0TGFiZWwuVGV4dCA9IHYuTmFtZS4uIlxuIi4uIlsiLi5EaXMuLiJdIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbHNlDQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgaWYgdi5OYW1lID09ICJLaXRzdW5lIElzbGFuZCIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIktpdHN1bmVFU1BJc2xhbmQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHYuS2l0c3VuZUVTUElzbGFuZDpEZXN0cm95KCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpLaXRzdW5lX0lzbGFuZDphZGRUb2dnbGUoIlRlbGVwb3J0IHRvIEtpdHN1bmUiLCBUZWxlcG9ydHRvS2l0c3VuZSwgZnVuY3Rpb24oVmFsdWUpDQpUZWxlcG9ydHRvS2l0c3VuZSA9IFZhbHVlDQpDYW5jZWxUd2VlbihUZWxlcG9ydHRvS2l0c3VuZSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgVGVsZXBvcnR0b0tpdHN1bmUgdGhlbg0KICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiS2l0c3VuZUlzbGFuZCIpIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGtpdHN1bmVpc2xhbmRzID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIktpdHN1bmVJc2xhbmQiKQ0KICAgICAgICAgICAgaWYga2l0c3VuZWlzbGFuZHM6RmluZEZpcnN0Q2hpbGQoIlNocmluZUFjdGl2ZSIpIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhraXRzdW5laXNsYW5kczpGaW5kRmlyc3RDaGlsZCgiU2hyaW5lQWN0aXZlIik6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIk5lb25TaHJpbmVQYXJ0IikgdGhlbiAtLXYuTmFtZTpmaW5kKCJOZW9uU2hyaW5lUGFydCIpDQogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIC0tZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuS2l0c3VuZUlzbGFuZC5TaHJpbmVEaWFsb2dQYXJ0Mg0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpLaXRzdW5lX0lzbGFuZDphZGRUb2dnbGUoIkF1dG8gQ29sbGVjdCBBenVyZSIsIEF1dG9Db2xsZWN0QXp1cmVBbWJlciwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvQ29sbGVjdEF6dXJlQW1iZXIgPSBWYWx1ZQ0KLS1DYW5jZWxUd2VlbihDb2xsZWN0QXp1cmVBbWJlcikNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b0NvbGxlY3RBenVyZUFtYmVyIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgLS1bW2lmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkF0dGFjaGVkQXp1cmVFbWJlciIpIHRoZW4NCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOldhaXRGb3JDaGlsZCgiRW1iZXJUZW1wbGF0ZSIpOkZpbmRGaXJzdENoaWxkKCJQYXJ0IikuQ0ZyYW1lKQ0KICAgICAgICAgICAgZW5kXV0NCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gJ0VtYmVyVGVtcGxhdGUnIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdi5QYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBSYWNldjQgUmlnaHQNCmxvY2FsIFJhY2VfVjRfUmlnaHQgPSBUYWIuVGFiX1JhY2VWNDphZGRTZWN0aW9uKCkNCg0KbG9jYWwgUmFjZVY0ID0gUmFjZV9WNF9SaWdodDphZGRNZW51KCcjVXBncmFkZSBSYWNlJykNCg0KUmFjZVY0OmFkZFRvZ2dsZSgiUmFjZSBEb29yIiwgUmFjZURvb3JzLCBmdW5jdGlvbihWYWx1ZSkNClJhY2VEb29ycyA9IFZhbHVlDQpDYW5jZWxUd2VlbihSYWNlRG9vcnMpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoLjEpIGRvDQogICAgaWYgUmFjZURvb3JzIHRoZW4NCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSkNCiAgICAgICAgd2FpdCguNSkNCiAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJIdW1hbiIgdGhlbg0KICAgICAgICAgICAgVFAyKENGcmFtZS5uZXcoMjkyMjEuODIyMjY1NjI1LCAxNDg5MC45NzU1ODU5Mzc1LCAtMjA1Ljk5MTE0OTkwMjM0Mzc1KSkNCiAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiU2t5cGllYSIgdGhlbg0KICAgICAgICAgICAgVFAyKENGcmFtZS5uZXcoMjg5NjAuMTU4MjAzMTI1LCAxNDkxOS42MjQwMjM0Mzc1LCAyMzUuMDM5NDg5NzQ2MDkzNzUpKQ0KICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJGaXNobWFuIiB0aGVuDQogICAgICAgICAgICBUUDIoQ0ZyYW1lLm5ldygyODIzMS4xNzU3ODEyNSwgMTQ4OTAuOTc1NTg1OTM3NSwgLTIxMS42NDE3Mzg4OTE2MDE1NikpDQogICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkN5Ym9yZyIgdGhlbg0KICAgICAgICAgICAgVFAyKENGcmFtZS5uZXcoMjg1MDIuNjgxNjQwNjI1LCAxNDg5NS45NzU1ODU5Mzc1LCAtNDIzLjcyNzkzNTc5MTAxNTYpKQ0KICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJHaG91bCIgdGhlbg0KICAgICAgICAgICAgVFAyKENGcmFtZS5uZXcoMjg2NzQuMjQ0MTQwNjI1LCAxNDg5MC42NzY3NTc4MTI1LCA0NDUuNDMxMDYwNzkxMDE1NikpDQogICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIk1pbmsiIHRoZW4NCiAgICAgICAgICAgIFRQMihDRnJhbWUubmV3KDI5MDEyLjM0MTc5Njg3NSwgMTQ4OTAuOTc1NTg1OTM3NSwgLTM4MC4xNDkyNjE0NzQ2MDk0KSkNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZCkNCg0KUmFjZVY0OmFkZFRvZ2dsZSgiQXV0byBUcmlhbCIsIEF1dG9Db21wbGV0ZVJhY2UsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0NvbXBsZXRlUmFjZSA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9Db21wbGV0ZVJhY2UgdGhlbg0KICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkh1bWFuIiB0aGVuDQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5IZWFsdGggPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIsIlNpbXVsYXRpb25SYWRpdXMiLG1hdGguaHVnZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b0NvbXBsZXRlUmFjZSBvciBub3Qgdi5QYXJlbnQgb3Igbm90IGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJTa3lwaWVhIiB0aGVuDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLlNreVRyaWFsLk1vZGVsOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICAic25vd2lzbGFuZF9DeWxpbmRlci4wODEiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVFAyKHYuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLDAsMCkpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiRmlzaG1hbiIgdGhlbg0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLlNlYUJlYXN0cy5TZWFCZWFzdDE6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gICJIdW1hbm9pZFJvb3RQYXJ0IiB0aGVuDQogICAgICAgICAgICAgICAgICAgIFRQMih2LkNGcmFtZSAqIENGcmFtZS5uZXcoMjAsNDUwLDApKQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIlRvb2wiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5Ub29sVGlwID09ICJNZWxlZSIgdGhlbiAtLSAiQmxveCBGcnVpdCIgLCAiU3dvcmQiICwgIldlYXIiICwgIkFnaWxpdHkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLDEyMixmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwxMjIsZmFsc2UsZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KC4yKQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwxMjAsZmFsc2UsZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsMTIwLGZhbHNlLGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCkNCiAgICAgICAgICAgICAgICAgICAgd2FpdCguMikNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsOTksZmFsc2UsZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsOTksZmFsc2UsZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIlRvb2wiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5Ub29sVGlwID09ICJCbG94IEZydWl0IiB0aGVuIC0tICJCbG94IEZydWl0IiAsICJTd29yZCIgLCAiV2VhciIgLCAiQWdpbGl0eSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsMTIyLGZhbHNlLGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCkNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLDEyMixmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIHdhaXQoLjIpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLDEyMCxmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwxMjAsZmFsc2UsZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KC4yKQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSw5OSxmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSw5OSxmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpDQogICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2LlRvb2xUaXAgPT0gIlN3b3JkIiB0aGVuIC0tICJCbG94IEZydWl0IiAsICJTd29yZCIgLCAiV2VhciIgLCAiQWdpbGl0eSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsMTIyLGZhbHNlLGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCkNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLDEyMixmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIHdhaXQoLjIpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLDEyMCxmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwxMjAsZmFsc2UsZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KC4yKQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSw5OSxmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSw5OSxmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIlRvb2wiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5Ub29sVGlwID09ICJHdW4iIHRoZW4gLS0gIkJsb3ggRnJ1aXQiICwgIlN3b3JkIiAsICJXZWFyIiAsICJBZ2lsaXR5Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwxMjIsZmFsc2UsZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsMTIyLGZhbHNlLGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCkNCiAgICAgICAgICAgICAgICAgICAgd2FpdCguMikNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsMTIwLGZhbHNlLGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCkNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLDEyMCxmYWxzZSxnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgIHdhaXQoLjIpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLDk5LGZhbHNlLGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCkNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLDk5LGZhbHNlLGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJDeWJvcmciIHRoZW4NCiAgICAgICAgICAgIFRQMihDRnJhbWUubmV3KDI4NjU0LCAxNDg5OC43ODMyLCAtMzAsIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDEpKQ0KICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJHaG91bCIgdGhlbg0KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuSGVhbHRoID0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLCJTaW11bGF0aW9uUmFkaXVzIixtYXRoLmh1Z2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9Db21wbGV0ZVJhY2Ugb3Igbm90IHYuUGFyZW50IG9yIG5vdCBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiTWluayIgdGhlbg0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJTdGFydFBvaW50IiB0aGVuDQogICAgICAgICAgICAgICAgICAgIFRQMih2LkNGcmFtZSogQ0ZyYW1lLm5ldygwLDEwLDApKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNClJhY2VWNDphZGRUb2dnbGUoIkF1dG8gVHJhaW4iLCBBdXRvVHJhaW4sIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b1RyYWluID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b1RyYWluIHRoZW4NCiAgICAgICAgbG9jYWwgQW5jaWVudENGcmFtZSA9IENGcmFtZS5uZXcoMjE2LjIxMTE4MTY0MDYyNSwgMTI2LjkzNTIwMzU1MjI0NjEsIC0xMjU5OS4wNzMyNDIxODc1KQ0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwiWSIsZmFsc2UsZ2FtZSkNCiAgICAgICAgd2FpdCgwLjEpDQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwiWSIsZmFsc2UsZ2FtZSkNCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDb2NvYSBXYXJyaW9yIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlN3ZWV0IFRoaWVmIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYW5keSBSZWJlbCIpIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkNvY29hIFdhcnJpb3IiIG9yIHYuTmFtZSA9PSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIiBvciB2Lk5hbWUgPT0gIlN3ZWV0IFRoaWVmIiBvciB2Lk5hbWUgPT0gIkNhbmR5IFJlYmVsIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbmNpZW50X0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbmNpZW50X0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvVHJhaW4gb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgVHdlZW4oQW5jaWVudENGcmFtZSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vL0FyZWENCmxvY2FsIFJhY2VWNF9BcmVhID0gUmFjZV9WNF9SaWdodDphZGRNZW51KCcjQXJlYScpDQoNClJhY2VWNF9BcmVhOmFkZEJ1dHRvbigiVGltcGxlIG9mIFRpbWUiLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKQ0Kd2FpdCgxKQ0KVFAyKENGcmFtZS5uZXcoMjgyODYuMzU1NDY4NzUsIDE0ODk1LjMwMTc1NzgxMjUsIDEwMi42MjQ2OTQ4MjQyMTg3NSkpDQplbmQpDQoNClJhY2VWNF9BcmVhOmFkZEJ1dHRvbigiTGV2ZXIgUHVsbCIsIGZ1bmN0aW9uKCkNCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsVmVjdG9yMy5uZXcoMjg1NzUuMTgxNjQwNjI1LCAxNDkzNi42Mjc5Mjk2ODc1LCA3Mi4zMTYzNjgxMDMwMjczNCkpDQp3YWl0KDEpDQpUUDIoQ0ZyYW1lLm5ldygyODU3NS4xODE2NDA2MjUsIDE0OTM2LjYyNzkyOTY4NzUsIDcyLjMxNjM2ODEwMzAyNzM0KSkNCmVuZCkNCg0KUmFjZVY0X0FyZWE6YWRkQnV0dG9uKCJBbmNpZW50IE9uZSIsIGZ1bmN0aW9uKCkNCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsVmVjdG9yMy5uZXcoMjg5ODEuNTUyNzM0Mzc1LCAxNDg4OC40MjY3NTc4MTI1LCAtMTIwLjI0NTg0OTYwOTM3NSkpDQp3YWl0KDEpDQpUUDIoQ0ZyYW1lLm5ldygyODk4MS41NTI3MzQzNzUsIDE0ODg4LjQyNjc1NzgxMjUsIC0xMjAuMjQ1ODQ5NjA5Mzc1KSkNCmVuZCkNCg0KUmFjZVY0X0FyZWE6YWRkQnV0dG9uKCJTYWZlIFpvbmUiLCBmdW5jdGlvbigpDQpUUDIoQ0ZyYW1lLm5ldygyODI3My4wODU5Mzc1LCAxNDg5Ni41MDc4MTI1LCAxNTcuNDIwNjM5MDM4MDg1OTQpKQ0KZW5kKQ0KDQpSYWNlVjRfQXJlYTphZGRCdXR0b24oIlBWUCBab25lIiwgZnVuY3Rpb24oKQ0KVFAyKENGcmFtZS5uZXcoMjg3NjYuNjgxNjQwNjI1LCAxNDk2Ny4xNDU1MDc4MTI1LCAtMTY0LjEzMjkwNDA1MjczNDM4KSkNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBGQVJNIExFRlQNCmxvY2FsIEZhcm1fTGVmdCA9IFRhYi5UYWJfMjphZGRTZWN0aW9uKCkNCg0KLS0vLyBMRVZFTCBGQVJNDQpsb2NhbCBMZXZlbF9GYXJtID0gRmFybV9MZWZ0OmFkZE1lbnUoJyNMZXZlbCBGYXJtJykNCg0KTGV2ZWxfRmFybTphZGRUb2dnbGUoJ0xldmVsIEZhcm0gUXVlc3QnLCBMZXZlbEZhcm1RdWVzdCwgZnVuY3Rpb24oVmFsdWUpDQpMZXZlbEZhcm1RdWVzdCA9IFZhbHVlDQpfRy5TZWxlY3RNb25zdGVyICA9IG5pbA0KQ2FuY2VsVHdlZW4oTGV2ZWxGYXJtUXVlc3QpDQplbmQpDQoNCkxldmVsX0Zhcm06YWRkVG9nZ2xlKCdMZXZlbCBGYXJtIE5vIFF1ZXN0JywgTGV2ZWxGYXJtTm9RdWVzdCwgZnVuY3Rpb24oVmFsdWUpDQpMZXZlbEZhcm1Ob1F1ZXN0ID0gVmFsdWUNCl9HLlNlbGVjdE1vbnN0ZXIgID0gbmlsDQpDYW5jZWxUd2VlbihMZXZlbEZhcm1Ob1F1ZXN0KQ0KZW5kKQ0KDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIExldmVsRmFybVF1ZXN0IHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQ2hlY2tMZXZlbCgpDQogICAgICAgICAgICBpZiBub3Qgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0IikNCiAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEJUUChDRnJhbWVRKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWVRKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIChDRnJhbWVRLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsIE5hbWVRdWVzdCwgUXVlc3RMdikNCiAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKE1zKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09IE1zIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZXZlbF9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExldmVsX0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IExldmVsRmFybVF1ZXN0IG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lTW9uKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBMZXZlbEZhcm1Ob1F1ZXN0IHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQ2hlY2tMZXZlbCgpDQogICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKE1zKSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyAoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gTXMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGV2ZWxfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExldmVsX0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBMZXZlbEZhcm1Ob1F1ZXN0IG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgQlRQKENGcmFtZU1vbikNCiAgICAgICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lTW9uKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIE9USEVSIEZBUk0NCmxvY2FsIE90aGVyX0Zhcm0gPSBGYXJtX0xlZnQ6YWRkTWVudSgnI090aGVyIEZhcm0nKQ0KT3RoZXJfRmFybTphZGRUb2dnbGUoIkJ1eSBSYW5kb20gQm9uZSIsIEF1dG9fVHJhZGVfQm9uZSwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvX1RyYWRlX0JvbmUgPSBWYWx1ZQ0KDQp3aGlsZSBBdXRvX1RyYWRlX0JvbmUgZG8gd2FpdCgpDQogICAgbG9jYWwgYXJncyA9IHsgICANCiAgICAgICAgWzFdID0gIkJvbmVzIiwgICANCiAgICAgICAgWzJdID0gIkJ1eSIsDQogICAgICAgIFszXSA9IDEsDQogICAgICAgIFs0XSA9IDENCiAgICB9DQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQNCmVuZCkNCg0KT3RoZXJfRmFybTphZGRUb2dnbGUoJ0JvbmVzIEZhcm0gKFRoaXJkIFNlYSknLCBGYXJtX0JvbmUsIGZ1bmN0aW9uKFZhbHVlKQ0KRmFybV9Cb25lID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEZhcm1fQm9uZSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgRmFybV9Cb25lIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgYm9uZWZyYW1lID0gQ0ZyYW1lLm5ldygtOTUwOC41NjczODI4MTI1LCAxNDIuMTM5ODQ2ODAxNzU3OCwgNTczNy4zNjAzNTE1NjI1KQ0KICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgIEJUUChib25lZnJhbWUpDQogICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBUd2Vlbihib25lZnJhbWUpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJSZWJvcm4gU2tlbGV0b24iIG9yIHYuTmFtZSA9PSAiTGl2aW5nIFpvbWJpZSIgb3Igdi5OYW1lID09IkRlbW9uaWMgU291bCIgb3Igdi5OYW1lID09ICJQb3Nlc3NlZCBNdW1teSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCb25lX0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJvbmVfRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBGYXJtX0JvbmUgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlJlYm9ybiBTa2VsZXRvbiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJEZW1vbmljIFNvdWwiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJQb3Nlc3NlZCBNdW1teSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpPdGhlcl9GYXJtOmFkZFRvZ2dsZSgnRWN0b3BsYXNtIEZhcm0gKFNlY29uZCBTZWEpJywgRmFybV9FY3RvcGxhc20sIGZ1bmN0aW9uKFZhbHVlKQ0KRmFybV9FY3RvcGxhc20gPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oRmFybV9FY3RvcGxhc20pDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEZhcm1fRWN0b3BsYXNtIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgRWN0b01vYiA9IENGcmFtZS5uZXcoOTA0LjQwNzIyNjU2MjUsIDE4MS4wNTc2NzgyMjI2NiwgMzMzNDEuMzg2NzE4NzUpDQogICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgQlRQKEVjdG9Nb2IpDQogICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBUd2VlbihFY3RvTW9iKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBEaXN0YW5jZSA9IChWZWN0b3IzLm5ldyg5MDQuNDA3MjI2NTYyNSwgMTgxLjA1NzY3ODIyMjY2LCAzMzM0MS4zODY3MTg3NSkgLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQ0KICAgICAgICAgICAgaWYgRGlzdGFuY2UgPiAyMDAwMCB0aGVuDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlNoaXAgU3Rld2FyZCIgb3Igdi5OYW1lID09ICJTaGlwIEVuZ2luZWVyIiBvciB2Lk5hbWUgPT0gIlNoaXAgRGVja2hhbmQiIG9yIHYuTmFtZSA9PSAiU2hpcCBPZmZpY2VyIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVjdG9fRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRWN0b19GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEZhcm1fRWN0b3BsYXNtIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlNoaXAgU3Rld2FyZCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIlNoaXAgRW5naW5lZXIiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJTaGlwIERlY2toYW5kIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgZWxzZWlmIHYuTmFtZSA9PSAiU2hpcCBPZmZpY2VyIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk90aGVyX0Zhcm06YWRkVG9nZ2xlKCdOZWFyZXN0IEZhcm0nLCBOZWFyZXN0X0Zhcm0sIGZ1bmN0aW9uKFZhbHVlKQ0KTmVhcmVzdF9GYXJtID0gVmFsdWUNCkNhbmNlbFR3ZWVuKE5lYXJlc3RfRmFybSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgTmVhcmVzdF9GYXJtIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyAoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5lYXJlc3RfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5lYXJlc3RfRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IE5lYXJlc3RfRmFybSBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gU0VMRUNUIE1PTlNURVINCmxvY2FsIFNlbGVjdE1vbnN0ZXJfRmFybSA9IEZhcm1fTGVmdDphZGRNZW51KCcjU2VsZWN0IE1vbnN0ZXIgRmFybScpDQoNClNlbGVjdE1vbnN0ZXJfRmFybTphZGREcm9wZG93bigiU2VsZWN0IE1vbnN0ZXIiLCBfRy5TZWxlY3RNb25zdGVyLCB0YWJsZU1vbiwgZnVuY3Rpb24oVmFsdWUpDQpfRy5TZWxlY3RNb25zdGVyID0gVmFsdWUNCmVuZCkNCg0KU2VsZWN0TW9uc3Rlcl9GYXJtOmFkZFRvZ2dsZSgnQXV0byBGYXJtIFNlbGVjdCBNb25zdGVyIChRdWVzdCknLCBTZWxlY3RNb25zdGVyX1F1ZXN0X0Zhcm0sIGZ1bmN0aW9uKFZhbHVlKQ0KU2VsZWN0TW9uc3Rlcl9RdWVzdF9GYXJtID0gVmFsdWUNCkNhbmNlbFR3ZWVuKFNlbGVjdE1vbnN0ZXJfUXVlc3RfRmFybSkNCmVuZCkNCg0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBTZWxlY3RNb25zdGVyX1F1ZXN0X0Zhcm0gdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBDaGVja0xldmVsKF9HLlNlbGVjdE1vbnN0ZXIpDQogICAgICAgICAgICBpZiBub3Qgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0IikNCiAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEJUUChDRnJhbWVRKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWVRKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIChDRnJhbWVRLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsTmFtZVF1ZXN0LFF1ZXN0THYpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoTXMpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gTXMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdE1vbnN0ZXJfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RNb25zdGVyX0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IFNlbGVjdE1vbnN0ZXJfUXVlc3RfRmFybSBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZU1vbikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KU2VsZWN0TW9uc3Rlcl9GYXJtOmFkZFRvZ2dsZSgnQXV0byBGYXJtIFNlbGVjdCBNb25zdGVyIChObyBRdWVzdCknLCBTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSwgZnVuY3Rpb24oVmFsdWUpDQpTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSA9IFZhbHVlDQpDYW5jZWxUd2VlbihTZWxlY3RNb25zdGVyX05vUXVlc3RfRmFybSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgU2VsZWN0TW9uc3Rlcl9Ob1F1ZXN0X0Zhcm0gdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBDaGVja0xldmVsKF9HLlNlbGVjdE1vbnN0ZXIpDQogICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgQlRQKENGcmFtZVEpDQogICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWVRKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoTXMpIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gTXMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0TW9uc3Rlcl9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0TW9uc3Rlcl9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgU2VsZWN0TW9uc3Rlcl9Ob1F1ZXN0X0Zhcm0gb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lTW9uKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIEZBUk0gUklHSFQNCmxvY2FsIEZhcm1fUmlnaHQgPSBUYWIuVGFiXzI6YWRkU2VjdGlvbigpDQoNCmxvY2FsIE1hc3RlcnlfRmFybSA9IEZhcm1fUmlnaHQ6YWRkTWVudSgnI01hc3RlcnkgRmFybScpDQpLaWxsUGVyY2VudCA9IDI1DQpNYXN0ZXJ5X0Zhcm06YWRkVGV4dGJveCgnU2tpbGwgUGVyY2VudGFjZSAlJywgS2lsbFBlcmNlbnQsIGZ1bmN0aW9uKFZhbHVlKQ0KS2lsbFBlcmNlbnQgPSBWYWx1ZQ0KZW5kKQ0KDQpsb2NhbCBNYXN0ZXJ5VHlwZSA9IHsnUXVlc3QnLCAnTm8gUXVlc3QnLCAnTmVhcmVzdCcsICdCb25lJywgJ0VjdG8nLCAnQ2FrZSBQcmluY2UnfQ0KU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID0gIlF1ZXN0Ig0KTWFzdGVyeV9GYXJtOmFkZERyb3Bkb3duKCdTZWxlY3QgTWV0aG9kJywgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5LCBNYXN0ZXJ5VHlwZSwgZnVuY3Rpb24oVmFsdWUpDQpTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPSBWYWx1ZQ0KZW5kKQ0KDQpNYXN0ZXJ5X0Zhcm06YWRkVG9nZ2xlKCdBdXRvIEZhcm0gRGV2aWwgTWFzdGVyeScsIERldmlsTWFzdGVyeV9GYXJtLCBmdW5jdGlvbihWYWx1ZSkNCkRldmlsTWFzdGVyeV9GYXJtID0gVmFsdWUNCkNhbmNlbFR3ZWVuKERldmlsTWFzdGVyeV9GYXJtKQ0KZW5kKQ0KDQpzcGF3bihmdW5jdGlvbigpDQpwY2FsbChmdW5jdGlvbigpDQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICAgICAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICBpZiB2LlRvb2xUaXAgPT0gIkJsb3ggRnJ1aXQiIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcodi5OYW1lKSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICBDdXJyZW50RXF1aXBEZXZpbEZydWl0ID0gdi5OYW1lDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQpDQplbmQpDQotLS8vIFVzZSBEZXZpbCBNYXN0ZXJ5DQpzcGF3bihmdW5jdGlvbigpDQpsb2NhbCBnZyA9IGdldHJhd21ldGF0YWJsZShnYW1lKQ0KbG9jYWwgb2xkID0gZ2cuX19uYW1lY2FsbA0Kc2V0cmVhZG9ubHkoZ2csZmFsc2UpDQpnZy5fX25hbWVjYWxsID0gbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oLi4uKQ0KICAgIGxvY2FsIG1ldGhvZCA9IGdldG5hbWVjYWxsbWV0aG9kKCkNCiAgICBsb2NhbCBhcmdzID0gey4uLn0NCiAgICBpZiB0b3N0cmluZyhtZXRob2QpID09ICJGaXJlU2VydmVyIiB0aGVuDQogICAgICAgIGlmIHRvc3RyaW5nKGFyZ3NbMV0pID09ICJSZW1vdGVFdmVudCIgdGhlbg0KICAgICAgICAgICAgaWYgdG9zdHJpbmcoYXJnc1syXSkgfj0gInRydWUiIGFuZCB0b3N0cmluZyhhcmdzWzJdKSB+PSAiZmFsc2UiIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBVc2VTa2lsbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHR5cGUoYXJnc1syXSkgPT0gInZlY3RvciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1syXSA9IFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdA0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzJdID0gQ0ZyYW1lLm5ldyhQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkKHVucGFjayhhcmdzKSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBVc2VHdW5NYXN0ZXJ5IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdHlwZShhcmdzWzJdKSA9PSAidmVjdG9yIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzJdID0gUG9zaXRpb25Ta2lsbE1hc3RlcnlHdW4NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1syXSA9IENGcmFtZS5uZXcoUG9zaXRpb25Ta2lsbE1hc3RlcnlHdW4pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkKHVucGFjayhhcmdzKSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gb2xkKC4uLikNCmVuZCkNCmVuZCkNCg0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBVc2VTa2lsbCA9PSB0cnVlIHRoZW4NCiAgICAgICAgbG9jYWwgcGxyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gTWFzdGVyeV9GYXJtX05hbWUgdGhlbiANCiAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA8PSB2Lkh1bWFub2lkLk1heEhlYWx0aCAqIEtpbGxQZXJjZW50IC8gMTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHBsci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKEN1cnJlbnRFcXVpcERldmlsRnJ1aXQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdCA9IHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoQ3VycmVudEVxdWlwRGV2aWxGcnVpdCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKEN1cnJlbnRFcXVpcERldmlsRnJ1aXQpLk1vdXNlUG9zLlZhbHVlID0gUG9zaXRpb25Ta2lsbE1hc3RlcnlEZXZpbEZydWl0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBEZXZpbEZydWl0TWFzdGVyeSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChDdXJyZW50RXF1aXBEZXZpbEZydWl0KS5MZXZlbC5WYWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcGxyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsWiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJaIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJaIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsWCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJYIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJYIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsQyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJDIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJDIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsViB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJWIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJWIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsRiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJGIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJGIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgVXNlU2tpbGwgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBEZXZpbE1hc3RlcnlfRmFybSBhbmQgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICJRdWVzdCIgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBDaGVja0xldmVsKCkNCiAgICAgICAgICAgIGlmIG5vdCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKQ0KICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgQlRQKENGcmFtZVEpDQogICAgICAgICAgICAgICAgZWxzZWlmIG5vdCBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZVEpDQogICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lUS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLE5hbWVRdWVzdCxRdWVzdEx2KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKE1zKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSBNcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkLkhlYWx0aCA8PSB2Lkh1bWFub2lkLk1heEhlYWx0aCAqIEtpbGxQZXJjZW50IC8gMTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VTa2lsbCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZVNraWxsID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5X0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IERldmlsTWFzdGVyeV9GYXJtIG9yIG5vdCBTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPT0gIlF1ZXN0IiBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPT0gMCBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lTW9uKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCg0KICAgIGVsc2VpZiBEZXZpbE1hc3RlcnlfRmFybSBhbmQgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICJObyBRdWVzdCIgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBDaGVja0xldmVsKCkNCiAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBCVFAoQ0ZyYW1lUSkNCiAgICAgICAgICAgIGVsc2VpZiBub3QgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZVEpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMgKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gTXMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkLkhlYWx0aCA8PSB2Lkh1bWFub2lkLk1heEhlYWx0aCAqIEtpbGxQZXJjZW50IC8gMTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlU2tpbGwgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VTa2lsbCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBEZXZpbE1hc3RlcnlfRmFybSBvciBub3QgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICJRdWVzdCIgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoID09IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbHNlaWYgRGV2aWxNYXN0ZXJ5X0Zhcm0gYW5kIFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAiTmVhcmVzdCIgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzIChnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5OYW1lIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMjAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQuSGVhbHRoIDw9IHYuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VTa2lsbCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZVNraWxsID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5X0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5X0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IERldmlsTWFzdGVyeV9GYXJtIG9yIG5vdCBTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPT0gJ05lYXJlc3QnIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA9PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZWxzZWlmIERldmlsTWFzdGVyeV9GYXJtIGFuZCBTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPT0gIkJvbmUiIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgYm9uZWZyYW1lID0gQ0ZyYW1lLm5ldygtOTUwOC41NjczODI4MTI1LCAxNDIuMTM5ODQ2ODAxNzU3OCwgNTczNy4zNjAzNTE1NjI1KQ0KICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgIEJUUChib25lZnJhbWUpDQogICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBUd2Vlbihib25lZnJhbWUpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIiBvciB2Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiIG9yIHYuTmFtZSA9PSJEZW1vbmljIFNvdWwiIG9yIHYuTmFtZSA9PSAiUG9zZXNzZWQgTXVtbXkiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZC5IZWFsdGggPD0gdi5IdW1hbm9pZC5NYXhIZWFsdGggKiBLaWxsUGVyY2VudCAvIDEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZVNraWxsID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlU2tpbGwgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgRGV2aWxNYXN0ZXJ5X0Zhcm0gb3Igbm90IFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAnQm9uZScgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoID09IDAgb3Igbm90IGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlJlYm9ybiBTa2VsZXRvbiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJEZW1vbmljIFNvdWwiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJQb3Nlc3NlZCBNdW1teSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCg0KICAgIGVsc2VpZiBEZXZpbE1hc3RlcnlfRmFybSBhbmQgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICJFY3RvIiB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGxvY2FsIEVjdG9Nb2IgPSBDRnJhbWUubmV3KDkwNC40MDcyMjY1NjI1LCAxODEuMDU3Njc4MjIyNjYsIDMzMzQxLjM4NjcxODc1KQ0KICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgIEJUUChFY3RvTW9iKQ0KICAgICAgICAgICAgZWxzZWlmIG5vdCBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgVHdlZW4oRWN0b01vYikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgRGlzdGFuY2UgPSAoVmVjdG9yMy5uZXcoOTA0LjQwNzIyNjU2MjUsIDE4MS4wNTc2NzgyMjI2NiwgMzMzNDEuMzg2NzE4NzUpIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUNCiAgICAgICAgICAgIGlmIERpc3RhbmNlID4gMjAwMDAgdGhlbg0KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiU2hpcCBTdGV3YXJkIiBvciB2Lk5hbWUgPT0gIlNoaXAgRW5naW5lZXIiIG9yIHYuTmFtZSA9PSAiU2hpcCBEZWNraGFuZCIgb3Igdi5OYW1lID09ICJTaGlwIE9mZmljZXIiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZC5IZWFsdGggPD0gdi5IdW1hbm9pZC5NYXhIZWFsdGggKiBLaWxsUGVyY2VudCAvIDEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZVNraWxsID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlU2tpbGwgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgRGV2aWxNYXN0ZXJ5X0Zhcm0gb3Igbm90IFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAnRWN0bycgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoID09IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiU2hpcCBTdGV3YXJkIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgZWxzZWlmIHYuTmFtZSA9PSAiU2hpcCBFbmdpbmVlciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIlNoaXAgRGVja2hhbmQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJTaGlwIE9mZmljZXIiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlaWYgRGV2aWxNYXN0ZXJ5X0Zhcm0gYW5kIFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAiQ2FrZSBQcmluY2UiIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikNCiAgICAgICAgICAgIGlmIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQ2FrZSBQcmluY2UiIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQuSGVhbHRoIDw9IHYuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlU2tpbGwgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VTa2lsbCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5X0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBEZXZpbE1hc3RlcnlfRmFybSBvciBub3QgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICdDYWtlIFByaW5jZScgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoID09IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DYWtlTG9hZi5CaWdNaXJyb3IuT3RoZXIuVHJhbnNwYXJlbmN5ID09IDAgYW5kIChDRnJhbWUubmV3KC0xOTkwLjY3MjYwNzQyMTg3NSwgNDUzMi45OTk1MTE3MTg3NSwgLTE0OTczLjY3NDgwNDY4NzUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPj0gMjAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0yMTUxLjgyMTUzLCAxNDkuMzE1NzA0LCAtMTI0MDQuOTA1MykpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29va2llIENyYWZ0ZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgR3VhcmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJha2luZyBTdGFmZiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVhZCBCYWtlciIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lk5hbWUgPT0gIkNvb2tpZSBDcmFmdGVyIiBvciB2Lk5hbWUgPT0gIkNha2UgR3VhcmQiIG9yIHYuTmFtZSA9PSAiQmFraW5nIFN0YWZmIiBvciB2Lk5hbWUgPT0gIkhlYWQgQmFrZXIiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZC5IZWFsdGggPD0gdi5IdW1hbm9pZC5NYXhIZWFsdGggKiBLaWxsUGVyY2VudCAvIDEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlU2tpbGwgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VTa2lsbCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBEZXZpbE1hc3RlcnlfRmFybSBvciBub3QgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICdDYWtlIFByaW5jZScgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoID09IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjYWtlcG9zID0gQ0ZyYW1lLm5ldygtMjA3NywgMjUyLCAtMTIzNzMpDQogICAgICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIEJUUChjYWtlcG9zKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihjYWtlcG9zKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlDQogICAgICAgIFVzZVNraWxsID0gZmFsc2UNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpNYXN0ZXJ5X0Zhcm06YWRkVG9nZ2xlKCdBdXRvIEZhcm0gR3VuIE1hc3RlcnknLCBHdW5NYXN0ZXJ5X0Zhcm0sIGZ1bmN0aW9uKFZhbHVlKQ0KR3VuTWFzdGVyeV9GYXJtID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEd1bk1hc3RlcnlfRmFybSkNCmVuZCkNCi0tLy8gVXNlIEd1biBNYXN0ZXJ5DQpzcGF3bihmdW5jdGlvbigpDQpwY2FsbChmdW5jdGlvbigpDQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICAgICAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICBpZiB2LlRvb2xUaXAgPT0gIkd1biIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2Lk5hbWUpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIEN1cnJlbnRFcXVpcEd1biA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBVc2VHdW5NYXN0ZXJ5ID09IHRydWUgdGhlbg0KICAgICAgICBsb2NhbCBwbHIgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSBNYXN0ZXJ5X0Zhcm1fTmFtZSB0aGVuIA0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoIDw9IHYuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gcGxyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woQ3VycmVudEVxdWlwR3VuKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NpdGlvblNraWxsTWFzdGVyeUd1biA9IHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoQ3VycmVudEVxdWlwR3VuKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoQ3VycmVudEVxdWlwR3VuKS5Nb3VzZVBvcy5WYWx1ZSA9IFBvc2l0aW9uU2tpbGxNYXN0ZXJ5R3VuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXJbQ3VycmVudEVxdWlwR3VuXS5Db29sZG93bi5WYWx1ZSA9IDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcltDdXJyZW50RXF1aXBHdW5dLlJlbW90ZUZ1bmN0aW9uU2hvb3Q6SW52b2tlU2VydmVyKFBvc2l0aW9uU2tpbGxNYXN0ZXJ5R3VuLCB2Lkh1bWFub2lkUm9vdFBhcnQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBHdW5NYXN0ZXJ5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKEN1cnJlbnRFcXVpcEd1bikuTGV2ZWwuVmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsWiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJaIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJaIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsWCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJYIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJYIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsQyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJDIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJDIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsViB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJWIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJWIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlNraWxsRiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJGIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJGIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgVXNlR3VuTWFzdGVyeSBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgR3VuTWFzdGVyeV9GYXJtIGFuZCBTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPT0gIlF1ZXN0IiB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIENoZWNrTGV2ZWwoKQ0KICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgIFVzZUd1bk1hc3RlcnkgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpDQogICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBCVFAoQ0ZyYW1lUSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lUSkNCiAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgIGlmIChDRnJhbWVRLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsTmFtZVF1ZXN0LFF1ZXN0THYpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoTXMpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09IE1zIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQuSGVhbHRoIDw9IHYuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZUd1bk1hc3RlcnkgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZUd1bk1hc3RlcnkgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5X0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgR3VuTWFzdGVyeV9GYXJtIG9yIG5vdCBTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPT0gIlF1ZXN0IiBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPT0gMCBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lTW9uKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCg0KICAgIGVsc2VpZiBHdW5NYXN0ZXJ5X0Zhcm0gYW5kIFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAiTm8gUXVlc3QiIHRoZW4NCiAgICAgICAgVXNlR3VuTWFzdGVyeSA9IGZhbHNlDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIENoZWNrTGV2ZWwoKQ0KICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgIEJUUChDRnJhbWVRKQ0KICAgICAgICAgICAgZWxzZWlmIG5vdCBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lUSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyAoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSBNcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQuSGVhbHRoIDw9IHYuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VHdW5NYXN0ZXJ5ID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlR3VuTWFzdGVyeSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBHdW5NYXN0ZXJ5X0Zhcm0gb3Igbm90IFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAiUXVlc3QiIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA9PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQoNCiAgICBlbHNlaWYgR3VuTWFzdGVyeV9GYXJtIGFuZCBTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPT0gIk5lYXJlc3QiIHRoZW4NCiAgICAgICAgVXNlR3VuTWFzdGVyeSA9IGZhbHNlDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMgKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAyMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZC5IZWFsdGggPD0gdi5IdW1hbm9pZC5NYXhIZWFsdGggKiBLaWxsUGVyY2VudCAvIDEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZUd1bk1hc3RlcnkgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VHdW5NYXN0ZXJ5ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5X0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5X0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEd1bk1hc3RlcnlfRmFybSBvciBub3QgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICdOZWFyZXN0JyBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPT0gMCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KDQogICAgZWxzZWlmIEd1bk1hc3RlcnlfRmFybSBhbmQgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICJCb25lIiB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGxvY2FsIGJvbmVmcmFtZSA9IENGcmFtZS5uZXcoLTk1MDguNTY3MzgyODEyNSwgMTQyLjEzOTg0NjgwMTc1NzgsIDU3MzcuMzYwMzUxNTYyNSkNCiAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBCVFAoYm9uZWZyYW1lKQ0KICAgICAgICAgICAgZWxzZWlmIG5vdCBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgVHdlZW4oYm9uZWZyYW1lKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlJlYm9ybiBTa2VsZXRvbiIgb3Igdi5OYW1lID09ICJMaXZpbmcgWm9tYmllIiBvciB2Lk5hbWUgPT0iRGVtb25pYyBTb3VsIiBvciB2Lk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQuSGVhbHRoIDw9IHYuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VHdW5NYXN0ZXJ5ID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlR3VuTWFzdGVyeSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBHdW5NYXN0ZXJ5X0Zhcm0gb3Igbm90IFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAnQm9uZScgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoID09IDAgb3Igbm90IGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlJlYm9ybiBTa2VsZXRvbiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJEZW1vbmljIFNvdWwiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJQb3Nlc3NlZCBNdW1teSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICANCiAgICBlbHNlaWYgR3VuTWFzdGVyeV9GYXJtIGFuZCBTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPT0gIkVjdG8iIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgRWN0b01vYiA9IENGcmFtZS5uZXcoOTA0LjQwNzIyNjU2MjUsIDE4MS4wNTc2NzgyMjI2NiwgMzMzNDEuMzg2NzE4NzUpDQogICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgQlRQKEVjdG9Nb2IpDQogICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBUd2VlbihFY3RvTW9iKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBEaXN0YW5jZSA9IChWZWN0b3IzLm5ldyg5MDQuNDA3MjI2NTYyNSwgMTgxLjA1NzY3ODIyMjY2LCAzMzM0MS4zODY3MTg3NSkgLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQ0KICAgICAgICAgICAgaWYgRGlzdGFuY2UgPiAyMDAwMCB0aGVuDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJTaGlwIFN0ZXdhcmQiIG9yIHYuTmFtZSA9PSAiU2hpcCBFbmdpbmVlciIgb3Igdi5OYW1lID09ICJTaGlwIERlY2toYW5kIiBvciB2Lk5hbWUgPT0gIlNoaXAgT2ZmaWNlciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkLkhlYWx0aCA8PSB2Lkh1bWFub2lkLk1heEhlYWx0aCAqIEtpbGxQZXJjZW50IC8gMTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlR3VuTWFzdGVyeSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZUd1bk1hc3RlcnkgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgR3VuTWFzdGVyeV9GYXJtIG9yIG5vdCBTZWxlY3RlZE1ldGhvZE1hc3RlcnkgPT0gJ0VjdG8nIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA9PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlNoaXAgU3Rld2FyZCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIlNoaXAgRW5naW5lZXIiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJTaGlwIERlY2toYW5kIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgZWxzZWlmIHYuTmFtZSA9PSAiU2hpcCBPZmZpY2VyIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIA0KICAgIGVsc2VpZiBHdW5NYXN0ZXJ5X0Zhcm0gYW5kIFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAiQ2FrZSBQcmluY2UiIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikNCiAgICAgICAgICAgIGlmIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQ2FrZSBQcmluY2UiIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQuSGVhbHRoIDw9IHYuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQgLyAxMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlR3VuTWFzdGVyeSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VHdW5NYXN0ZXJ5ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5X0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEd1bk1hc3RlcnlfRmFybSBvciBub3QgU2VsZWN0ZWRNZXRob2RNYXN0ZXJ5ID09ICdDYWtlIFByaW5jZScgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoID09IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DYWtlTG9hZi5CaWdNaXJyb3IuT3RoZXIuVHJhbnNwYXJlbmN5ID09IDAgYW5kIChDRnJhbWUubmV3KC0xOTkwLjY3MjYwNzQyMTg3NSwgNDUzMi45OTk1MTE3MTg3NSwgLTE0OTczLjY3NDgwNDY4NzUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPj0gMjAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0yMTUxLjgyMTUzLCAxNDkuMzE1NzA0LCAtMTI0MDQuOTA1MykpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29va2llIENyYWZ0ZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgR3VhcmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJha2luZyBTdGFmZiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVhZCBCYWtlciIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lk5hbWUgPT0gIkNvb2tpZSBDcmFmdGVyIiBvciB2Lk5hbWUgPT0gIkNha2UgR3VhcmQiIG9yIHYuTmFtZSA9PSAiQmFraW5nIFN0YWZmIiBvciB2Lk5hbWUgPT0gIkhlYWQgQmFrZXIiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZC5IZWFsdGggPD0gdi5IdW1hbm9pZC5NYXhIZWFsdGggKiBLaWxsUGVyY2VudCAvIDEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlR3VuTWFzdGVyeSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlR3VuTWFzdGVyeSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hc3RlcnlfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFzdGVyeV9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBHdW5NYXN0ZXJ5X0Zhcm0gb3Igbm90IFNlbGVjdGVkTWV0aG9kTWFzdGVyeSA9PSAnQ2FrZSBQcmluY2UnIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA9PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2FrZXBvcyA9IENGcmFtZS5uZXcoLTIwNzcsIDI1MiwgLTEyMzczKQ0KICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBCVFAoY2FrZXBvcykNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oY2FrZXBvcykNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVsc2UNCiAgICAgICAgVXNlR3VuTWFzdGVyeSA9IGZhbHNlDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBCT1NTIEZBUk0NCmxvY2FsIEJvc3NfRmFybSA9IEZhcm1fUmlnaHQ6YWRkTWVudSgnI0Jvc3MgRmFybScpDQpsb2NhbCBCb3NzTmFtZVN0b3JhZ2UgPSB7DQoiVGhlIEdvcnJpbGEgS2luZyIsICJCb2JieSIsICJUaGUgU2F3IiwgIllldGkiLCAiTW9iIExlYWRlciIsICJWaWNlIEFkbWlyYWwiLCAiU2FiZXIgRXhwZXJ0IiwgIldhcmRlbiIsICJDaGllZiBXYXJkZW4iLCAiU3dhbiIsICJNYWdtYSBBZG1pcmFsIiwgIkZpc2htYW4gTG9yZCIsICJXeXNwZXIiLCAiVGh1bmRlciBHb2QiLCAiQ3lib3JnIiwgIkljZSBBZG1pcmFsIiwgIkdyZXliZWFyZCIsDQoiRGlhbW9uZCIsICJKZXJlbXkiLCAiRmFqaXRhIiwgIkRvbiBTd2FuIiwgIlNtb2tlIEFkbWlyYWwiLCAiQXdha2VuZWQgSWNlIEFkbWlyYWwiLCAiVGlkZSBLZWVwZXIiLCAiRGFya2JlYXJkIiwgIkN1cnNlZCBDYXB0YWluIiwgIk9yZGVyIiwNCiJTdG9uZSIsICJJc2xhbmQgRW1wcmVzcyIsICJLaWxvIEFkbWlyYWwiLCAiQ2FwdGFpbiBFbGVwaGFudCIsICJCZWF1dGlmdWwgUGlyYXRlIiwgIkNha2UgUXVlZW4iLCAiTG9uZ21hIiwgIlNvdWwgUmVhcGVyIiwgInJpcF9pbmRyYSBUcnVlIEZvcm0iDQp9DQpsb2NhbCBCb3NzTGlzdCA9IHt9DQpmb3IgaSx2IGluIHBhaXJzKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6R2V0Q2hpbGRyZW4oKSkgZG8NCmlmIHRhYmxlLmZpbmQoQm9zc05hbWVTdG9yYWdlLCB2Lk5hbWUpIHRoZW4NCiAgICB0YWJsZS5pbnNlcnQoQm9zc0xpc3QsIHYuTmFtZSkNCmVuZA0KZW5kDQoNCmxvY2FsIFJlZnJlc2hfQm9zcyA9IEJvc3NfRmFybTphZGREcm9wZG93bignU2VsZWN0IEJvc3MnLCBTZWxlY3RCb3NzLCBCb3NzTGlzdCwgZnVuY3Rpb24oVmFsdWUpDQpTZWxlY3RCb3NzID0gVmFsdWUNCmVuZCkNCg0KQm9zc19GYXJtOmFkZEJ1dHRvbignUmVmcmVzaCBCb3NzJywgZnVuY3Rpb24oKQ0KbG9jYWwgTmV3Qm9zc0xpc3QgPSB7fQ0KZm9yIGksdiBpbiBwYWlycyhnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkdldENoaWxkcmVuKCkpIGRvDQogICAgaWYgdGFibGUuZmluZChCb3NzTmFtZVN0b3JhZ2UsIHYuTmFtZSkgdGhlbg0KICAgICAgICB0YWJsZS5pbnNlcnQoTmV3Qm9zc0xpc3QsIHYuTmFtZSkNCiAgICBlbmQNCmVuZA0KUmVmcmVzaF9Cb3NzOkNsZWFyKCkNClJlZnJlc2hfQm9zczpSZWZyZXNoKE5ld0Jvc3NMaXN0KQ0KZW5kKQ0KDQpCb3NzX0Zhcm06YWRkVG9nZ2xlKCdBdXRvIEZhcm0gQm9zcyAoUXVlc3QpJywgQXV0b0Zhcm1Cb3NzUXVlc3QsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0Zhcm1Cb3NzUXVlc3QgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0Zhcm1Cb3NzUXVlc3QpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9GYXJtQm9zc1F1ZXN0IHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgQ2hlY2tCb3NzUXVlc3QoU2VsZWN0Qm9zcykNCiAgICAgICAgICAgIGlmIG5vdCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lQm9zcykgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0IikNCiAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEJUUChDRnJhbWVRQm9zcykNCiAgICAgICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lUUJvc3MpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgKENGcmFtZVFCb3NzLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsTmFtZVF1ZXN0Qm9zcyxRdWVzdEx2Qm9zcykNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lQm9zcykgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoU2VsZWN0Qm9zcykgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSBTZWxlY3RCb3NzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvRmFybUJvc3NRdWVzdCBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZUJvc3MpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCkJvc3NfRmFybTphZGRUb2dnbGUoJ0F1dG8gRmFybSBCb3NzIChObyBRdWVzdCknLCBBdXRvRmFybUJvc3NOb1F1ZXN0LCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9GYXJtQm9zc05vUXVlc3QgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0Zhcm1Cb3NzTm9RdWVzdCkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b0Zhcm1Cb3NzTm9RdWVzdCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIENoZWNrQm9zc1F1ZXN0KFNlbGVjdEJvc3MpDQogICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgQlRQKENGcmFtZUJvc3MpDQogICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWVCb3NzKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09IFNlbGVjdEJvc3MgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvRmFybUJvc3NOb1F1ZXN0IG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBTVUJTIEZBUk0gTEVGVA0KbG9jYWwgU3Vic19GYXJtX0xlZnQgPSBUYWIuVGFiX1N1YkZhcm06YWRkU2VjdGlvbigpDQoNCmxvY2FsIERvam9RdWVzdCA9IFN1YnNfRmFybV9MZWZ0OmFkZE1lbnUoIiNEcmFnb24gSHVudGVyIikNCg0KZnVuY3Rpb24gZ2V0QWNjKEJlbHROYW1lKQ0KZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJnZXRJbnZlbnRvcnkiKSkgZG8NCiAgICBpZiB0eXBlKHYpID09ICJ0YWJsZSIgdGhlbg0KICAgICAgICBpZiB2LlR5cGUgPT0gIldlYXIiIHRoZW4NCiAgICAgICAgICAgIGlmIHYuTmFtZSA9PSBCZWx0TmFtZSB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KcmV0dXJuIGZhbHNlDQplbmQNCmxvY2FsIERvam9RdWVzdE5wYyA9IENGcmFtZS5uZXcoNTg1NS4xOTYyOSwgMTIwOC4zMjE3OCwgODcyLjcxMzUwMSwgMC42MDY5OTQ3NDgsIC0xLjgxMDU4ODIzZS0wOSwgLTAuNzk0NzA1ODY4LCA1LjcyNzEyNzIyZS0wOSwgMSwgMi4wOTYwNTU3N2UtMDksIDAuNzk0NzA1ODY4LCAtNS44MjM2NzYyMWUtMDksIDAuNjA2OTk0NzQ4KQ0KDQpsb2NhbCBEb2pvUHJvZ2Vzc0NoZWNrID0gRG9qb1F1ZXN0OmFkZExhYmVsKCdHZXQgcXVlc3QgZmlyc3QnKQ0KbG9jYWwgRG9qb0luZm9DaGVjayA9IERvam9RdWVzdDphZGRMYWJlbCgnJykNCg0KLS1bW3Rhc2suc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoT3JhbmdlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUHVycGxlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUmVkKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmxhY2spIikgPT0gZmFsc2UgdGhlbg0KICAgICAgICBEb2pvUHJvZ2Vzc0NoZWNrOlJlZnJlc2goIkRvam8gUHJvZ3Jlc3MgOiBHZXQgRG9qbyBCZWx0IChXaGl0ZSkiKQ0KICAgICAgICBEb2pvSW5mb0NoZWNrOlJlZnJlc2goIktpbGwgMjAgTlBDIG9uIFF1ZXN0IikNCg0KICAgIGVsc2VpZiBnZXRBY2MoIkRvam8gQmVsdCAoV2hpdGUpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFllbGxvdykiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKE9yYW5nZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmx1ZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgRG9qb1Byb2dlc3NDaGVjazpSZWZyZXNoKCJEb2pvIFByb2dyZXNzIDogR2V0IERvam8gQmVsdCAoWWVsbG93KSIpDQogICAgICAgIERvam9JbmZvQ2hlY2s6UmVmcmVzaCgiS2lsbCA1IFNoYXJrL1BpcmFuaGEvRmlzaGNyZXcgTWVtYmVyIikNCg0KICAgIGVsc2VpZiBnZXRBY2MoIkRvam8gQmVsdCAoV2hpdGUpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFllbGxvdykiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoT3JhbmdlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUHVycGxlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUmVkKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmxhY2spIikgPT0gZmFsc2UgdGhlbg0KICAgICAgICBEb2pvUHJvZ2Vzc0NoZWNrOlJlZnJlc2goIkRvam8gUHJvZ3Jlc3MgOiBHZXQgRG9qbyBCZWx0IChPcmFuZ2UpIikNCiAgICAgICAgRG9qb0luZm9DaGVjazpSZWZyZXNoKCJDb21wbGV0ZSAxIFRyYWRlIHdpdGggYW5vdGhlciBQbGF5ZXIiKQ0KDQogICAgZWxzZWlmIGdldEFjYygiRG9qbyBCZWx0IChXaGl0ZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChPcmFuZ2UpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmx1ZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgRG9qb1Byb2dlc3NDaGVjazpSZWZyZXNoKCJEb2pvIFByb2dyZXNzIDogR2V0IERvam8gQmVsdCAoR3JlZW4pIikNCiAgICAgICAgRG9qb0luZm9DaGVjazpSZWZyZXNoKCJUcmF2ZWwgdG8gU2VhIERhbmdlciBMZXZlbCA0LTYgXG4gYW5kIHN0YXkgdGhlcmUgZm9yIDUgbWludXRlcy4iKQ0KDQogICAgZWxzZWlmIGdldEFjYygiRG9qbyBCZWx0IChXaGl0ZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAodHJ1ZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKE9yYW5nZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsdWUpIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChQdXJwbGUpIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChSZWQpIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbGFjaykiKSA9PSBmYWxzZSB0aGVuDQogICAgICAgIERvam9Qcm9nZXNzQ2hlY2s6UmVmcmVzaCgiRG9qbyBQcm9ncmVzcyA6IEdldCBEb2pvIEJlbHQgKEJsdWUpIikNCiAgICAgICAgRG9qb0luZm9DaGVjazpSZWZyZXNoKCJDb2xsZWN0IGEgZnJ1aXQgZHJvcHBlZCBieSBhbm90aGVyIHBsYXllciIpDQoNCiAgICBlbHNlaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChZZWxsb3cpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKE9yYW5nZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsdWUpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgRG9qb1Byb2dlc3NDaGVjazpSZWZyZXNoKCJEb2pvIFByb2dyZXNzIDogR2V0IERvam8gQmVsdCAoUHVycGxlKSIpDQogICAgICAgIERvam9JbmZvQ2hlY2s6UmVmcmVzaCgiS2lsbCAzIEVsaXRlIFBpcmF0ZXMiKQ0KDQogICAgZWxzZWlmIGdldEFjYygiRG9qbyBCZWx0IChXaGl0ZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChPcmFuZ2UpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChQdXJwbGUpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgRG9qb1Byb2dlc3NDaGVjazpSZWZyZXNoKCJEb2pvIFByb2dyZXNzIDogR2V0IERvam8gQmVsdCAoUmVkKSIpDQogICAgICAgIERvam9JbmZvQ2hlY2s6UmVmcmVzaCgiRGVmZWF0IGEgVGVycm9yc2hhcmsgb3IgUnVtYmxpbmcgV2F0ZXJzIFNlYSBFdmVudC4iKQ0KDQogICAgZWxzZWlmIGdldEFjYygiRG9qbyBCZWx0IChXaGl0ZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChPcmFuZ2UpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChQdXJwbGUpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmxhY2spIikgPT0gZmFsc2UgdGhlbg0KICAgICAgICBEb2pvUHJvZ2Vzc0NoZWNrOlJlZnJlc2goIkRvam8gUHJvZ3Jlc3MgOiBHZXQgRG9qbyBCZWx0IChCbGFjaykiKQ0KICAgICAgICBEb2pvSW5mb0NoZWNrOlJlZnJlc2goIkNvbXBsZXRlIFByZWhpc3RvcmljIElzbGFuZCBldmVudCBcbiBhbmQgY29sbGVjdCAzIERpbm9zYXVyIGJvbmVzIikNCg0KICAgIGVuZA0KZW5kDQplbmQpXV0NCg0KRG9qb1F1ZXN0OmFkZFRvZ2dsZSgnUmVxdWVzdCBRdWVzdCBEb2pvIFRyYWluZXInLCBEb2pvUmVxdWVzdFF1ZXN0LCBmdW5jdGlvbihWYWx1ZSkNCkRvam9SZXF1ZXN0UXVlc3QgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oRG9qb1JlcXVlc3RRdWVzdCkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgRG9qb1JlcXVlc3RRdWVzdCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBCVFAoRG9qb1F1ZXN0TnBjKQ0KICAgICAgICAgICAgZWxzZWlmIG5vdCBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgVHdlZW4oRG9qb1F1ZXN0TnBjKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIA0KICAgICAgICAgICAgaWYgKERvam9RdWVzdE5wYy5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG9oVGFibGUxID0gew0KICAgICAgICAgICAgICAgICAgICBbIk5QQyJdID0gIkRvam8gVHJhaW5lciIsDQogICAgICAgICAgICAgICAgICAgIFsiQ29tbWFuZCJdID0gIlJlcXVlc3RRdWVzdCINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0WyJSRi9JbnRlcmFjdERyYWdvblF1ZXN0Il06SW52b2tlU2VydmVyKG9oVGFibGUxKQ0KDQogICAgICAgICAgICAgICAgd2FpdCgxKQ0KDQogICAgICAgICAgICAgICAgaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoT3JhbmdlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUHVycGxlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUmVkKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmxhY2spIikgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICBEb2pvUHJvZ2Vzc0NoZWNrOlJlZnJlc2goIkRvam8gUHJvZ3Jlc3MgOiBHZXQgRG9qbyBCZWx0IChXaGl0ZSkiKQ0KICAgICAgICAgICAgICAgICAgICBEb2pvSW5mb0NoZWNrOlJlZnJlc2goIktpbGwgMjAgTlBDIG9uIFF1ZXN0IikNCiAgICAgICAgDQogICAgICAgICAgICAgICAgZWxzZWlmIGdldEFjYygiRG9qbyBCZWx0IChXaGl0ZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoT3JhbmdlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUHVycGxlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUmVkKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmxhY2spIikgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICBEb2pvUHJvZ2Vzc0NoZWNrOlJlZnJlc2goIkRvam8gUHJvZ3Jlc3MgOiBHZXQgRG9qbyBCZWx0IChZZWxsb3cpIikNCiAgICAgICAgICAgICAgICAgICAgRG9qb0luZm9DaGVjazpSZWZyZXNoKCJLaWxsIDUgU2hhcmsvUGlyYW5oYS9GaXNoY3JldyBNZW1iZXIiKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChZZWxsb3cpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKE9yYW5nZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmx1ZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgRG9qb1Byb2dlc3NDaGVjazpSZWZyZXNoKCJEb2pvIFByb2dyZXNzIDogR2V0IERvam8gQmVsdCAoT3JhbmdlKSIpDQogICAgICAgICAgICAgICAgICAgIERvam9JbmZvQ2hlY2s6UmVmcmVzaCgiQ29tcGxldGUgMSBUcmFkZSB3aXRoIGFub3RoZXIgUGxheWVyIikNCiAgICAgICAgDQogICAgICAgICAgICAgICAgZWxzZWlmIGdldEFjYygiRG9qbyBCZWx0IChXaGl0ZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChPcmFuZ2UpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmx1ZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgRG9qb1Byb2dlc3NDaGVjazpSZWZyZXNoKCJEb2pvIFByb2dyZXNzIDogR2V0IERvam8gQmVsdCAoR3JlZW4pIikNCiAgICAgICAgICAgICAgICAgICAgRG9qb0luZm9DaGVjazpSZWZyZXNoKCJUcmF2ZWwgdG8gU2VhIERhbmdlciBMZXZlbCA0LTYgXG4gYW5kIHN0YXkgdGhlcmUgZm9yIDUgbWludXRlcy4iKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0ICh0cnVlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoT3JhbmdlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChHcmVlbikiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmx1ZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgRG9qb1Byb2dlc3NDaGVjazpSZWZyZXNoKCJEb2pvIFByb2dyZXNzIDogR2V0IERvam8gQmVsdCAoQmx1ZSkiKQ0KICAgICAgICAgICAgICAgICAgICBEb2pvSW5mb0NoZWNrOlJlZnJlc2goIkNvbGxlY3QgYSBmcnVpdCBkcm9wcGVkIGJ5IGFub3RoZXIgcGxheWVyIikNCiAgICAgICAgDQogICAgICAgICAgICAgICAgZWxzZWlmIGdldEFjYygiRG9qbyBCZWx0IChXaGl0ZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChPcmFuZ2UpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChQdXJwbGUpIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChSZWQpIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbGFjaykiKSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIERvam9Qcm9nZXNzQ2hlY2s6UmVmcmVzaCgiRG9qbyBQcm9ncmVzcyA6IEdldCBEb2pvIEJlbHQgKFB1cnBsZSkiKQ0KICAgICAgICAgICAgICAgICAgICBEb2pvSW5mb0NoZWNrOlJlZnJlc2goIktpbGwgMyBFbGl0ZSBQaXJhdGVzIikNCiAgICAgICAgDQogICAgICAgICAgICAgICAgZWxzZWlmIGdldEFjYygiRG9qbyBCZWx0IChXaGl0ZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChPcmFuZ2UpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChQdXJwbGUpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgRG9qb1Byb2dlc3NDaGVjazpSZWZyZXNoKCJEb2pvIFByb2dyZXNzIDogR2V0IERvam8gQmVsdCAoUmVkKSIpDQogICAgICAgICAgICAgICAgICAgIERvam9JbmZvQ2hlY2s6UmVmcmVzaCgiRGVmZWF0IGEgVGVycm9yc2hhcmsgb3IgUnVtYmxpbmcgV2F0ZXJzIFNlYSBFdmVudC4iKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChZZWxsb3cpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKE9yYW5nZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsdWUpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUmVkKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbGFjaykiKSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIERvam9Qcm9nZXNzQ2hlY2s6UmVmcmVzaCgiRG9qbyBQcm9ncmVzcyA6IEdldCBEb2pvIEJlbHQgKEJsYWNrKSIpDQogICAgICAgICAgICAgICAgICAgIERvam9JbmZvQ2hlY2s6UmVmcmVzaCgiQ29tcGxldGUgUHJlaGlzdG9yaWMgSXNsYW5kIGV2ZW50IFxuIGFuZCBjb2xsZWN0IDMgRGlub3NhdXIgYm9uZXMiKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KRG9qb1F1ZXN0OmFkZFRvZ2dsZSgnQ2xhaW0gUXVlc3QgRG9qbyBUcmFpbmVyJywgRG9qb0NsYWltUXVlc3QsIGZ1bmN0aW9uKFZhbHVlKQ0KRG9qb0NsYWltUXVlc3QgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oRG9qb0NsYWltUXVlc3QpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIERvam9DbGFpbVF1ZXN0IHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgIEJUUChEb2pvUXVlc3ROcGMpDQogICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICBUd2VlbihEb2pvUXVlc3ROcGMpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgDQogICAgICAgICAgICBpZiAoRG9qb1F1ZXN0TnBjLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgb2hUYWJsZTEgPSB7DQogICAgICAgICAgICAgICAgICAgIFsiTlBDIl0gPSAiRG9qbyBUcmFpbmVyIiwNCiAgICAgICAgICAgICAgICAgICAgWyJDb21tYW5kIl0gPSAiQ2xhaW1RdWVzdCINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0WyJSRi9JbnRlcmFjdERyYWdvblF1ZXN0Il06SW52b2tlU2VydmVyKG9oVGFibGUxKQ0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCg0KRG9qb1F1ZXN0OmFkZFRvZ2dsZSgiUnVuIERvam8gVHJhaW5lciBRdWVzdCIsIERvam9RdWVzdEVuYWJsZSwgZnVuY3Rpb24oVmFsdWUpDQpEb2pvUXVlc3RFbmFibGUgPSBWYWx1ZQ0KU3RvcEJvYXRzKERvam9RdWVzdEVuYWJsZSkNCkNhbmNlbFR3ZWVuKERvam9RdWVzdEVuYWJsZSkNCmVuZCkNCg0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBEb2pvUXVlc3RFbmFibGUgdGhlbg0KICAgICAgICAgDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoWWVsbG93KSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoT3JhbmdlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gZmFsc2UgYW5kIGdldEFjYygiRG9qbyBCZWx0IChCbHVlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUHVycGxlKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoUmVkKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmxhY2spIikgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIENoZWNrTGV2ZWwoKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0IikNCiAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgQlRQKENGcmFtZVEpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lUSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIChDRnJhbWVRLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IiwgTmFtZVF1ZXN0LCBRdWVzdEx2KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoTXMpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gTXMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2pvX0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvam9fRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgRG9qb1F1ZXN0RW5hYmxlIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWVNb24pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBlbHNlaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChZZWxsb3cpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKE9yYW5nZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEdyZWVuKSIpID09IGZhbHNlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoQmx1ZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCg0KICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTEyNTc1Ljc2NjYsIDMzNi45NTU3MTksIC03NTU2LjgwMDI5LCAwLjA1Mjg3NjYwNjYsIC03Ljk2NDQyMDIzZS0wOCwgLTAuOTk4NjAxMDc5LCAyLjExNzY4NzE4ZS0wOCwgMSwgLTcuODYzNDQ1MDFlLTA4LCAwLjk5ODYwMTA3OSwgLTEuNjk4OTMyMzdlLTA4LCAwLjA1Mjg3NjYwNjYpKQ0KDQogICAgICAgICAgICBlbHNlaWYgZ2V0QWNjKCJEb2pvIEJlbHQgKFdoaXRlKSIpID09IHRydWUgYW5kIGdldEFjYygiRG9qbyBCZWx0IChZZWxsb3cpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKE9yYW5nZSkiKSA9PSB0cnVlIGFuZCBnZXRBY2MoIkRvam8gQmVsdCAoR3JlZW4pIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsdWUpIikgPT0gdHJ1ZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFB1cnBsZSkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKFJlZCkiKSA9PSBmYWxzZSBhbmQgZ2V0QWNjKCJEb2pvIEJlbHQgKEJsYWNrKSIpID09IGZhbHNlIHRoZW4NCg0KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkRpYWJsbyIgb3Igdi5OYW1lID09ICJEZWFuZHJlIiBvciB2Lk5hbWUgPT0gIlVyYmFuIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBEb2pvUXVlc3RFbmFibGUgPT0gZmFsc2Ugb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3Qgdi5QYXJlbnQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCkRvam9RdWVzdDphZGRUb2dnbGUoIktpbGwgR2hvc3QvSHlkcmEvVmVub21vdXMiLCBCbGF6ZUVtYmVyRmFybSwgZnVuY3Rpb24oVmFsdWUpDQpCbGF6ZUVtYmVyRmFybSA9IFZhbHVlDQpDYW5jZWxUd2VlbihCbGF6ZUVtYmVyRmFybSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQmxhemVFbWJlckZhcm0gdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoJ1dvcmtzcGFjZScpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoJ0dob3N0Jykgb3IgZ2FtZTpHZXRTZXJ2aWNlKCdXb3Jrc3BhY2UnKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCdIeWRyYSBFbmZvcmNlcicpIG9yIGdhbWU6R2V0U2VydmljZSgnV29ya3NwYWNlJykuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgnVmVub21vdXMgQXNzYWlsYW50JykgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCdXb3Jrc3BhY2UnKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAnR2hvc3QnIG9yIHYuTmFtZSA9PSAnSHlkcmEgRW5mb3JjZXInIG9yIHYuTmFtZSA9PSAnVmVub21vdXMgQXNzYWlsYW50JyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZCcpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmxhemVFbWJlcl9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmxhemVFbWJlcl9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQmxhemVFbWJlckZhcm0gb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1Mzk0LjM2NDc1LCAxMDgyLjcxMDU3LCA1NjEuOTkzOTU4LCAtMC42MjQ1MzcxMSwgMy4xNzgyNjQwNWUtMDgsIC0wLjc4MDk5NTEzMSwgNi43NzUzMDk5MWUtMDgsIDEsIC0xLjM0ODQ5NTQ1ZS0wOCwgMC43ODA5OTUxMzEsIC02LjEzMzY2OTIyZS0wOCwgLTAuNjI0NTM3MTEpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpEb2pvUXVlc3Q6YWRkVG9nZ2xlKCJBdXRvIENvbGxlY3QgQmxhemUgRW1iZXIiLCBDb2xlY3RCbGF6ZUVtYmVyLCBmdW5jdGlvbihWYWx1ZSkNCkNvbGVjdEJsYXplRW1iZXIgPSBWYWx1ZQ0KZW5kKQ0KDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIENvbGVjdEJsYXplRW1iZXIgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gJ0VtYmVyVGVtcGxhdGUnIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdi5QYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KRG9qb1F1ZXN0OmFkZEJ1dHRvbignVGVsZXBvcnQgRHJhZ29uIEh1bnRlcicsIGZ1bmN0aW9uKCkNClR3ZWVuKENGcmFtZS5uZXcoNTg2NS44MDgxMSwgMTIwOS41MDI2OSwgODExLjc0NjU4MiwgLTAuNjc1MjA3NDM2LCAtNi43NjY2NDYyN2UtMDgsIDAuNzM3NjI3OTIzLCA4LjMzNjMyMTg2ZS0wOSwgMSwgOS45MzY2MTA0N2UtMDgsIC0wLjczNzYyNzkyMywgNy4zMjQxODM1N2UtMDgsIC0wLjY3NTIwNzQzNikpDQplbmQpDQoNCkRvam9RdWVzdDphZGRCdXR0b24oJ1RlbGVwb3J0IERyYWdvbiBXaXp6YXJkJywgZnVuY3Rpb24oKQ0KVHdlZW4oQ0ZyYW1lLm5ldyg1Nzc1LjM1MDU5LCAxMjA5LjUwMjY5LCA4MDUuNjc5OTkzLCAtMC42OTY1ODg1MTYsIC03LjU3NzU2ODA4ZS0wOCwgMC43MTc0NzA4MjUsIC03LjY1NDkzMzRlLTA4LCAxLCAzLjEyOTM2NjYzZS0wOCwgLTAuNzE3NDcwODI1LCAtMy4zMTIzMTA3OGUtMDgsIC0wLjY5NjU4ODUxNikpDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmxvY2FsIEVsaXRlX0h1bnRlcl9RdWVzdCA9IFN1YnNfRmFybV9MZWZ0OmFkZE1lbnUoJyNFbGl0ZSBIdW50ZXInKQ0KDQpsb2NhbCBFbGl0ZVByb2dyZXNzID0gRWxpdGVfSHVudGVyX1F1ZXN0OmFkZExhYmVsKCIiKQ0KbG9jYWwgRWxpdGVTdGF0dXMgPSBFbGl0ZV9IdW50ZXJfUXVlc3Q6YWRkTGFiZWwoIiIpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBsb2NhbCBwcm9nZWxpdCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIiwiUHJvZ3Jlc3MiKQ0KICAgIEVsaXRlUHJvZ3Jlc3M6UmVmcmVzaCgiRWxpdGUgQm9zcyBLaWxsZWQgOiAiIC4uIHByb2dlbGl0KQ0KICAgIGlmIGdhbWU6R2V0U2VydmljZSgnUmVwbGljYXRlZFN0b3JhZ2UnKTpGaW5kRmlyc3RDaGlsZCgnRGlhYmxvJykgb3IgZ2FtZTpHZXRTZXJ2aWNlKCdSZXBsaWNhdGVkU3RvcmFnZScpOkZpbmRGaXJzdENoaWxkKCdEZWFuZHJlJykgb3IgZ2FtZTpHZXRTZXJ2aWNlKCdSZXBsaWNhdGVkU3RvcmFnZScpOkZpbmRGaXJzdENoaWxkKCdVcmJhbicpIHRoZW4NCiAgICAgICAgRWxpdGVTdGF0dXM6UmVmcmVzaCgiQm9zcyBTdGF0dXMgOiBCb3NzIGlzIFNwYXduZWQuIikNCiAgICBlbHNlaWYgbm90IGdhbWU6R2V0U2VydmljZSgnUmVwbGljYXRlZFN0b3JhZ2UnKTpGaW5kRmlyc3RDaGlsZCgnRGlhYmxvJykgb3Igbm90IGdhbWU6R2V0U2VydmljZSgnUmVwbGljYXRlZFN0b3JhZ2UnKTpGaW5kRmlyc3RDaGlsZCgnRGVhbmRyZScpIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoJ1JlcGxpY2F0ZWRTdG9yYWdlJyk6RmluZEZpcnN0Q2hpbGQoJ1VyYmFuJykgdGhlbg0KICAgICAgICBFbGl0ZVN0YXR1czpSZWZyZXNoKCJCb3NzIFN0YXR1cyA6IEJvc3MgaXMgbm90IFNwYXduZWQuIikNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpFbGl0ZV9IdW50ZXJfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIEVsaXRlIEh1bnRlcicsIEF1dG9FbGl0ZUh1bnRlciwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvRWxpdGVIdW50ZXIgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0VsaXRlSHVudGVyKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvRWxpdGVIdW50ZXIgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIkRpYWJsbyIpIG9yIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIkRlYW5kcmUiKSBvciBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCJVcmJhbiIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiRGlhYmxvIiBvciB2Lk5hbWUgPT0gIkRlYW5kcmUiIG9yIHYuTmFtZSA9PSAiVXJiYW4iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBBdXRvRWxpdGVIdW50ZXIgPT0gZmFsc2Ugb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3Qgdi5QYXJlbnQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIENha2UgUHJpbmNlDQpsb2NhbCBDYWtlX1ByaW5jZV9RdWVzdCA9IFN1YnNfRmFybV9MZWZ0OmFkZE1lbnUoJyNDYWtlIFByaW5jZSAmIERvdWdoIEtpbmcnKQ0KbG9jYWwgQ2FrZVByaW5jZVN0YXR1cyA9IENha2VfUHJpbmNlX1F1ZXN0OmFkZExhYmVsKCIiKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4OCB0aGVuDQogICAgICAgIENha2VQcmluY2VTdGF0dXM6UmVmcmVzaCgiS2lsbGVkIExlZnQgOiAiLi5zdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksMzksNDEpLi4nIC8gNTAwJykNCiAgICBlbHNlaWYgc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4NyB0aGVuDQogICAgICAgIENha2VQcmluY2VTdGF0dXM6UmVmcmVzaCgiS2lsbGVkIExlZnQgOiAiLi5zdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksMzksNDApLi4nIC8gNTAwJykNCiAgICBlbHNlaWYgc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4NiB0aGVuDQogICAgICAgIENha2VQcmluY2VTdGF0dXM6UmVmcmVzaCgiS2lsbGVkIExlZnQgOiAiLi5zdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksMzksMzkpLi4nIC8gNTAwJykNCiAgICBlbHNlDQogICAgICAgIENha2VQcmluY2VTdGF0dXM6UmVmcmVzaCgiQ2FrZSBQcmluY2UgU3Bhd25lZC4uLiEhISIpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KQ2FrZV9QcmluY2VfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIENha2UgUHJpbmNlJywgQXV0b0Nha2VQcmluY2UsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0Nha2VQcmluY2UgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0Nha2VQcmluY2UpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9DYWtlUHJpbmNlIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikNCiAgICAgICAgICAgIGlmIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIEF1dG9DYWtlUHJpbmNlIGFuZCB2Lk5hbWUgPT0gIkNha2UgUHJpbmNlIiBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b0Nha2VQcmluY2Ugb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDANCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNha2VMb2FmLkJpZ01pcnJvci5PdGhlci5UcmFuc3BhcmVuY3kgPT0gMCBhbmQgKENGcmFtZS5uZXcoLTE5OTAuNjcyNjA3NDIxODc1LCA0NTMyLjk5OTUxMTcxODc1LCAtMTQ5NzMuNjc0ODA0Njg3NSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAyMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTIxNTEuODIxNTMsIDE0OS4zMTU3MDQsIC0xMjQwNC45MDUzKSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDb29raWUgQ3JhZnRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBHdWFyZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQmFraW5nIFN0YWZmIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIZWFkIEJha2VyIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5OYW1lID09ICJDb29raWUgQ3JhZnRlciIgb3Igdi5OYW1lID09ICJDYWtlIEd1YXJkIiBvciB2Lk5hbWUgPT0gIkJha2luZyBTdGFmZiIgb3Igdi5OYW1lID09ICJIZWFkIEJha2VyIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENha2VQcmluY2VfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYWtlUHJpbmNlX0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9DYWtlUHJpbmNlIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjYWtlcG9zID0gQ0ZyYW1lLm5ldygtMjA3NywgMjUyLCAtMTIzNzMpDQogICAgICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIEJUUChjYWtlcG9zKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihjYWtlcG9zKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KQ2FrZV9QcmluY2VfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIERvdWdoIEtpbmcgKE5lZWQgdG8gR2V0IFN3ZWV0IENoYWxpY2UpJywgX0cuQXV0b0RvdWdoS2luZywgZnVuY3Rpb24oVmFsdWUpDQpfRy5BdXRvRG91Z2hLaW5nID0gVmFsdWUNCkNhbmNlbFR3ZWVuKF9HLkF1dG9Eb3VnaEtpbmcpDQplbmQpDQoNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCguMSkgZG8NCiAgICBpZiBfRy5BdXRvRG91Z2hLaW5nIHRoZW4NCiAgICAgICAgbG9jYWwgUGxhY2VfMSA9IENGcmFtZS5uZXcoLTI2ODEuOTc5OTgsIDY0LjM5MjE1ODUsIC0xMjg1My43MzYzLCAwLjE0OTAwNzc4MiwgLTEuODc5MDIxOTJlLTA4LCAwLjk4ODgzNjA1LCAzLjYwNjE5NTg4ZS0wOCwgMSwgMS4zNTY4MTgxMmUtMDgsIC0wLjk4ODgzNjA1LCAzLjM2Mzc2MDExZS0wOCwgMC4xNDkwMDc3ODIpDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNha2VMb2FmOkZpbmRGaXJzdENoaWxkKCJSZWREb29yIikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJlZCBLZXkiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJlZCBLZXkiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VTY2llbnRpc3QiLCAiQ2hlY2siKQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlJhaWRzTnBjIiwgIkNoZWNrIikNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oUGxhY2VfMSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKFBsYWNlXzEuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLm1hZ25pdHVkZSA8PSA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KC0yNjgxLjk3OTk4LCA2NC4zOTIxNTg1LCAtMTI4NTMuNzM2MywgMC4xNDkwMDc3ODIsIC0xLjg3OTAyMTkyZS0wOCwgMC45ODg4MzYwNSwgMy42MDYxOTU4OGUtMDgsIDEsIDEuMzU2ODE4MTJlLTA4LCAtMC45ODg4MzYwNSwgMy4zNjM3NjAxMWUtMDgsIDAuMTQ5MDA3NzgyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpDQogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIlJlZCBLZXkiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lLldvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRW5lbWllcyIpOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBLaW5nIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBLaW5nIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEtpbmciKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkRvdWdoIEtpbmciIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvRG91Z2hLaW5nIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNha2VMb2FmLkJpZ01pcnJvci5PdGhlci5UcmFuc3BhcmVuY3kgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgQmlnTWlycm9yUGxhY2UgPSBDRnJhbWUubmV3KC0yMTUxLjgyMTUzLCAxNDkuMzE1NzA0LCAtMTI0MDQuOTA1MykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihCaWdNaXJyb3JQbGFjZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQmlnTWlycm9yUGxhY2UuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLm1hZ25pdHVkZSA8PSAzMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtMjE1MS44MjE1MywgMTQ5LjMxNTcwNCwgLTEyNDA0LjkwNTMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCANCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlN3ZWV0IENoYWxpY2UiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlN3ZWV0IENoYWxpY2UiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29va2llIENyYWZ0ZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgR3VhcmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJha2luZyBTdGFmZiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVhZCBCYWtlciIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQ29va2llIENyYWZ0ZXIiIG9yIHYuTmFtZSA9PSAiQ2FrZSBHdWFyZCIgb3Igdi5OYW1lID09ICJCYWtpbmcgU3RhZmYiIG9yIHYuTmFtZSA9PSAiSGVhZCBCYWtlciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb3VnaEtpbmdfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG91Z2hLaW5nX0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiLCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvRG91Z2hLaW5nIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTIwNzcsIDI1MiwgLTEyMzczKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDRnJhbWUubmV3KC0yMDc3LCAyNTIsIC0xMjM3MykuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLm1hZ25pdHVkZSA8PSAzMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KC0yMDc3LCAyNTIsIC0xMjM3MykNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJHb2QncyBDaGFsaWNlIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiR29kJ3MgQ2hhbGljZSIpKSBhbmQgR2V0TWF0ZXJpYWwoIkNvbmp1cmVkIENvY29hIikgPj0gMTAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3dlZXRDaGFsaWNlTnBjIikNCiAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpDQogICAgICAgICAgICAgICAgZWxzZWlmIG5vdCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkdvZCdzIENoYWxpY2UiKSBhbmQgbm90IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkdvZCdzIENoYWxpY2UiKSBhbmQgKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIG9yIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpIG9yIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIG9yIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJEaWFibG8iKSBvciBzdHJpbmcuZmluZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIlVyYmFuIikgb3Igc3RyaW5nLmZpbmQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJEZWFuZHJlIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkRpYWJsbyIgb3Igdi5OYW1lID09ICJVcmJhbiIgb3Igdi5OYW1lID09ICJEZWFuZHJlIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9Eb3VnaEtpbmcgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FuZHkgUmViZWwiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlN3ZWV0IFRoaWVmIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNvY29hIFdhcnJpb3IiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5OYW1lID09ICJDYW5keSBSZWJlbCIgb3Igdi5OYW1lID09ICJTd2VldCBUaGllZiIgb3Igdi5OYW1lID09ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiIG9yIHYuTmFtZSA9PSAiQ29jb2EgV2FycmlvciIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb3VnaEtpbmdfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb3VnaEtpbmdfRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0RvdWdoS2luZyBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNjIwLjYzNDQ2MDQ0OTIxODgsIDc4LjkzNjQ0NzE0MzU1NDY5LCAtMTI1ODEuMzY5MTQwNjI1KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDRnJhbWUubmV3KDYyMC42MzQ0NjA0NDkyMTg4LCA3OC45MzY0NDcxNDM1NTQ2OSwgLTEyNTgxLjM2OTE0MDYyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLm1hZ25pdHVkZSA8PSAxNTAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KDYyMC42MzQ0NjA0NDkyMTg4LCA3OC45MzY0NDcxNDM1NTQ2OSwgLTEyNTgxLjM2OTE0MDYyNSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBDYWtlIFByaW5jZQ0KbG9jYWwgT3RoZXJfU3Vic19GYXJtID0gU3Vic19GYXJtX0xlZnQ6YWRkTWVudSgnI1JhaWQgRmFybScpDQoNCk90aGVyX1N1YnNfRmFybTphZGRUb2dnbGUoJ0F1dG8gUmFpZCBGYWN0b3J5JywgQXV0b0ZhY3RvcnksIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0ZhY3RvcnkgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0ZhY3RvcnkpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9GYWN0b3J5IHRoZW4NCiAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29yZSIpIHRoZW4NCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQ29yZSIgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLTQ0MS4zODkyNTIpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwICBvciBBdXRvRmFjdG9yeSA9PSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJDb3JlIikgdGhlbg0KICAgICAgICAgICAgcmVwZWF0IFR3ZWVuKENGcmFtZS5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtNDQxLjM4OTI1MikpDQogICAgICAgICAgICAgICAgd2FpdCgpDQogICAgICAgICAgICB1bnRpbCBub3QgQXV0b0ZhY3Rvcnkgb3IgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbi1WZWN0b3IzLm5ldyg0NDguNDY3NTYsIDE5OS4zNTY3ODEsIC00NDEuMzg5MjUyKSkuTWFnbml0dWRlIDw9IDEwDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk90aGVyX1N1YnNfRmFybTphZGRUb2dnbGUoJ0F1dG8gUmFpZCBQaXJhdGUnLCBBdXRvUGlyYXRlQ2FzdGxlLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9QaXJhdGVDYXN0bGUgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b1BpcmF0ZUNhc3RsZSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b1BpcmF0ZUNhc3RsZSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGxvY2FsIENGcmFtZUNhc3RsZVJhaWQgPSBDRnJhbWUubmV3KC01NDk2LjE3NDMyLCAzMTMuNzY4OTIxLCAtMjg0MS41MzAyNywgMC45MjQ4OTQ1MTIsIDcuMzcwNTgwMTVlLTA5LCAwLjM4MDIyMzc1MSwgMy41ODgxMDE5ZS0wOCwgMSwgLTEuMDY2NjU0NDZlLTA3LCAtMC4zODAyMjM3NTEsIDEuMTIyOTcxMDllLTA3LCAwLjkyNDg5NDUxMikNCiAgICAgICAgICAgIGlmIChDRnJhbWUubmV3KC01NTM5LjMxMTUyMzQzNzUsIDMxMy44MDA1MzcxMDkzNzUsIC0yOTcyLjM3MjMxNDQ1MzEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaXJhdGVDYXN0bGVfTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlyYXRlQ2FzdGxlX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvUGlyYXRlQ2FzdGxlIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZUNhc3RsZVJhaWQpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIFNVQlMgRkFSTSBSaWdodA0KbG9jYWwgU3Vic19GYXJtX1JpZ2h0ID0gVGFiLlRhYl9TdWJGYXJtOmFkZFNlY3Rpb24oKQ0KDQotLS8vIE1BVEVSSUFMIEZBUk0NCmxvY2FsIE1hdGVyaWFsX0Zhcm0gPSBTdWJzX0Zhcm1fUmlnaHQ6YWRkTWVudSgnI01hdGVyaWFsIEZhcm0nKQ0KaWYgRmlyc3RfU2VhIHRoZW4NCk1hdGVyaWFsTGlzdCA9IHsiU2NyYXAgTWV0YWwiLCJMZWF0aGVyIiwiQW5nZWwgV2luZ3MiLCJNYWdtYSBPcmUiLCJGaXNoIFRhaWwifQ0KZWxzZWlmIFNlY29uZF9TZWEgdGhlbg0KTWF0ZXJpYWxMaXN0ID0geyJTY3JhcCBNZXRhbCIsIkxlYXRoZXIiLCJSYWRpb2FjdGl2ZSBNYXRlcmlhbCIsIk15c3RpYyBEcm9wbGV0IiwiTWFnbWEgT3JlIiwiVmFtcGlyZSBGYW5nIn0NCmVsc2VpZiBUaGlyZF9TZWEgdGhlbg0KTWF0ZXJpYWxMaXN0ID0geyJTY3JhcCBNZXRhbCIsIkxlYXRoZXIiLCJEZW1vbmljIFdpc3AiLCJDb25qdXJlZCBDb2NvYSIsIkRyYWdvbiBTY2FsZSIsIkd1bnBvd2RlciIsIkZpc2ggVGFpbCIsIk1pbmkgVHVzayJ9DQplbmQNCk1hdGVyaWFsX0Zhcm06YWRkRHJvcGRvd24oJ1NlbGVjdCBNYXRlcmlhbCcsIFNlbGVjdE1hdGVyaWFsLCBNYXRlcmlhbExpc3QsIGZ1bmN0aW9uKFZhbHVlKQ0KU2VsZWN0TWF0ZXJpYWwgPSBWYWx1ZQ0KZW5kKQ0KDQpNYXRlcmlhbF9GYXJtOmFkZFRvZ2dsZSgnQXV0byBGYXJtIE1hdGVyaWFsJywgQXV0b19GYXJtX01hdGVyaWFsLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9fRmFybV9NYXRlcmlhbCA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvX0Zhcm1fTWF0ZXJpYWwpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9fRmFybV9NYXRlcmlhbCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIE1hdGVyaWFsTW9uKFNlbGVjdE1hdGVyaWFsKQ0KICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgIEJUUChNUG9zKQ0KICAgICAgICAgICAgZWxzZWlmIG5vdCBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgVHdlZW4oTVBvcykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyAoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09IE1Nb24gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0ZXJpYWxfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0ZXJpYWxfRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvX0Zhcm1fTWF0ZXJpYWwgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIENIRVNUIEZBUk0NCmxvY2FsIENoZXN0X0Zhcm0gPSBTdWJzX0Zhcm1fUmlnaHQ6YWRkTWVudSgnI0NoZXN0IEZhcm0nKQ0KDQpmdW5jdGlvbiBBdXRvR3JhYkNoZXN0KCkNCmxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXINCmZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5DaGVzdE1vZGVsczpHZXRDaGlsZHJlbigpKSBkbyANCiAgICBpZiB2Lk5hbWUgPT0gIlNpbHZlckNoZXN0IiBvciB2Lk5hbWUgPT0gIkdvbGRDaGVzdCIgb3Igdi5OYW1lID09ICJEaWFtb25kQ2hlc3QiIG9yIHYuTmFtZSA9PSAiRnJhZ21lbnRDaGVzdCIgb3Igdi5OYW1lID09ICJNaXJhZ2VDaGVzdCIgdGhlbg0KICAgICAgICBwbGF5ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2LlB1c2hCb3guQ0ZyYW1lDQogICAgICAgIHdhaXQoLjE1KQ0KICAgIGVuZA0KZW5kDQpmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkNoZXN0TW9kZWxzOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgaWYgdjpJc0EoIlRvdWNoVHJhbnNtaXR0ZXIiKSB0aGVuDQogICAgICAgIHdhaXQoLjE1KQ0KICAgICAgICBmaXJldG91Y2hpbnRlcmVzdChwbGF5ZXIuSHVtYW5vaWRSb290UGFydCwgdi5QYXJlbnQsIDApIC0tIDAgaXMgdG91Y2gNCiAgICAgICAgd2FpdCguMTUpDQogICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHBsYXllci5IdW1hbm9pZFJvb3RQYXJ0LCB2LlBhcmVudCwgMSkgLS0gMSBpcyBub3QgdG91Y2gNCiAgICBlbmQNCmVuZA0KZW5kDQoNCmZ1bmN0aW9uIENvb2xkb3duRGVhdGgodGltZXMpDQp3YWl0KHRpbWVzKQ0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkOkRlc3Ryb3koKQ0Kd2FpdCh0aW1lcykNCmVuZA0KDQpDaGVzdF9GYXJtOmFkZFRvZ2dsZSgnQXV0byBHcmFiIENoZXN0IChTdG9wIGlmIGhhdmUgaXRlbXMpJywgX0cuR3JhYkNoZXN0ZWQsIGZ1bmN0aW9uKFZhbHVlKQ0KX0cuR3JhYkNoZXN0ZWQgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBfRy5HcmFiQ2hlc3RlZCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiR29kJ3MgQ2hhbGljZSIpIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmlzdCBvZiBEYXJrbmVzcyIpIHRoZW4NCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgIEF1dG9HcmFiQ2hlc3QoKQ0KICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgX0cuR3JhYkNoZXN0ZWQgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBDb29sZG93bkRlYXRoKDEwKQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KQ2hlc3RfRmFybTphZGRUb2dnbGUoJ0F1dG8gR3JhYiBDaGVzdCArIEhvcCAoU3RvcCBpZiBoYXZlIGl0ZW1zKScsIF9HLkdyYWJDaGVzdGVkSG9wLCBmdW5jdGlvbihWYWx1ZSkNCl9HLkdyYWJDaGVzdGVkSG9wID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIF9HLkdyYWJDaGVzdGVkSG9wIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIlNpbHZlckNoZXN0Iikgb3IgZ2FtZS5Xb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmRDaGVzdCIpIG9yIGdhbWUuV29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJHb2xkQ2hlc3QiKSBvciBnYW1lLldvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRnJhZ21lbnRDaGVzdCIpIG9yIGdhbWUuV29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJNaXJhZ2VDaGVzdCIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkdvZCdzIENoYWxpY2UiKSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZpc3Qgb2YgRGFya25lc3MiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9HcmFiQ2hlc3QoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICBIb3AoKQ0KICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgX0cuR3JhYkNoZXN0ZWRIb3AgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBDb29sZG93bkRlYXRoKDEwKQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBPQlNFUlZBVElPTiBGQVJNDQpsb2NhbCBPYnNlcnZhdGlvbl9GYXJtID0gU3Vic19GYXJtX1JpZ2h0OmFkZE1lbnUoJyNPYnNlcnZhdGlvbiBGYXJtJykNCmxvY2FsIE9ic2VydmF0aW9uUmFuZ2UgPSBPYnNlcnZhdGlvbl9GYXJtOmFkZExhYmVsKCIiKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBPYnNlcnZhdGlvblJhbmdlOlJlZnJlc2goIk9ic2VydmF0aW9uIExldmVsIDogIiAuLiB0b3N0cmluZyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5WaXNpb25SYWRpdXMuVmFsdWUpKQ0KZW5kDQplbmQpDQoNCk9ic2VydmF0aW9uX0Zhcm06YWRkVG9nZ2xlKCJBdXRvIEZhcm0gT2JzZXJ2YXRpb24iLCBBdXRvRmFybUtlbiwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvRmFybUtlbiA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvRmFybUtlbikNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b0Zhcm1LZW4gdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBTZWNvbmRfU2VhIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxhdmEgUGlyYXRlIFtMdi4gMTIwMF0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5TY3JlZW5HdWk6RmluZEZpcnN0Q2hpbGQoIkltYWdlTGFiZWwiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGF2YSBQaXJhdGUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMywwLDApDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBBdXRvRmFybUtlbiA9PSBmYWxzZSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLlNjcmVlbkd1aTpGaW5kRmlyc3RDaGlsZCgiSW1hZ2VMYWJlbCIpDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJMYXZhIFBpcmF0ZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLDUwLDApKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5TY3JlZW5HdWk6RmluZEZpcnN0Q2hpbGQoIkltYWdlTGFiZWwiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnQoZ2FtZS5QbGFjZUlkLGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgQXV0b0Zhcm1LZW4gPT0gZmFsc2Ugb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLlNjcmVlbkd1aTpGaW5kRmlyc3RDaGlsZCgiSW1hZ2VMYWJlbCIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtNTQ3OC4zOTIwOSwgMTUuOTc3NTY2NywgLTUyNDYuOTEyNikpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgRmlyc3RfU2VhIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkdhbGxleSBDYXB0YWluIFtMdi4gNjUwXSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLlNjcmVlbkd1aTpGaW5kRmlyc3RDaGlsZCgiSW1hZ2VMYWJlbCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJHYWxsZXkgQ2FwdGFpbiIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygzLDAsMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIEF1dG9GYXJtS2VuID09IGZhbHNlIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuU2NyZWVuR3VpOkZpbmRGaXJzdENoaWxkKCJJbWFnZUxhYmVsIikNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkdhbGxleSBDYXB0YWluIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsNTAsMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5TY3JlZW5HdWk6RmluZEZpcnN0Q2hpbGQoIkltYWdlTGFiZWwiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnQoZ2FtZS5QbGFjZUlkLGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgQXV0b0Zhcm1LZW4gPT0gZmFsc2Ugb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLlNjcmVlbkd1aTpGaW5kRmlyc3RDaGlsZCgiSW1hZ2VMYWJlbCIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1NTMzLjI5Nzg1LCA4OC4xMDc5MTAyLCA0ODUyLjM5MTYpKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIFRoaXJkX1NlYSB0aGVuDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJHaWFudCBJc2xhbmRlciBbTHYuIDE2NTBdIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuU2NyZWVuR3VpOkZpbmRGaXJzdENoaWxkKCJJbWFnZUxhYmVsIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkdpYW50IElzbGFuZGVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDMsMCwwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgQXV0b0Zhcm1LZW4gPT0gZmFsc2Ugb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5TY3JlZW5HdWk6RmluZEZpcnN0Q2hpbGQoIkltYWdlTGFiZWwiKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiR2lhbnQgSXNsYW5kZXIiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCw1MCwwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLlNjcmVlbkd1aTpGaW5kRmlyc3RDaGlsZCgiSW1hZ2VMYWJlbCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydChnYW1lLlBsYWNlSWQsZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBBdXRvRmFybUtlbiA9PSBmYWxzZSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuU2NyZWVuR3VpOkZpbmRGaXJzdENoaWxkKCJJbWFnZUxhYmVsIikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDQ1MzAuMzU0MDAzOTA2MywgNjU2Ljc1Njk1ODAwNzgxLCAtMTMxLjYwOTUyNzU4Nzg5KSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KT2JzZXJ2YXRpb25fRmFybTphZGRUb2dnbGUoIkF1dG8gT2JzZXJ2YXRpb24gVjIiLCBBdXRvS2VuVjIsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0tlblYyID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9LZW5WMikNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b0tlblYyIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCJDaXRpemVuIikgPT0gMyB0aGVuDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJhbmFuYSIpIGFuZCAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkFwcGxlIikgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQaW5lYXBwbGUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMjQ0NC43ODUxNTYyNSwgMzMyLjQwMzk2MTE4MTY0LCAtNzY3My4xODA2NjQwNjI1KSkNCiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9LZW5WMiBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24tVmVjdG9yMy5uZXcoLTEyNDQ0Ljc4NTE1NjI1LCAzMzIuNDAzOTYxMTgxNjQsIC03NjczLjE4MDY2NDA2MjUpKS5NYWduaXR1ZGUgPD0gMTANCiAgICAgICAgICAgICAgICAgICAgd2FpdCguNSkNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCJDaXRpemVuIikNCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZydWl0IEJvd2wiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZydWl0IEJvd2wiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMDkyMC4xMjUsIDYyNC4yMDI3NTg3ODkwNiwgLTEwMjY2Ljk5NTExNzE4OCkpDQogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvS2VuVjIgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLVZlY3RvcjMubmV3KC0xMDkyMC4xMjUsIDYyNC4yMDI3NTg3ODkwNiwgLTEwMjY2Ljk5NTExNzE4OCkpLk1hZ25pdHVkZSA8PSAxMA0KICAgICAgICAgICAgICAgICAgICB3YWl0KC41KQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJLZW5UYWxrMiIsIlN0YXJ0IikNCiAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJLZW5UYWxrMiIsIkJ1eSIpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQXBwbGUiIG9yIHYuTmFtZSA9PSAiQmFuYW5hIiBvciB2Lk5hbWUgPT0gIlBpbmVhcHBsZSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSGFuZGxlLkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwxLDEwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LHYuSGFuZGxlLDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gUVVFU1QgTEVGVA0KbG9jYWwgUXVlc3RfTGVmdCA9IFRhYi5UYWJfMzphZGRTZWN0aW9uKCkNCmxvY2FsIFdvcmxkX1F1ZXN0ID0gUXVlc3RfTGVmdDphZGRNZW51KCcjV29ybGQnKQ0KV29ybGRfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIFNlY29uZCBXb3JsZCBbTHYuIDcwMF0nLCBBdXRvU2Vjb25kV29ybGQsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b1NlY29uZFdvcmxkID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9TZWNvbmRXb3JsZCkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b1NlY29uZFdvcmxkIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gNzAwIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJEcmVzc3Jvc2FRdWVzdFByb2dyZXNzIikuVXNlZEtleSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIktleSIpIG9yIG5vdCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJLZXkiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJEcmVzc3Jvc2FRdWVzdFByb2dyZXNzIiwiRGV0ZWN0aXZlIikNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiS2V5Iikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiS2V5IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2woZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrWyJLZXkiXSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC0tW1tpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKENGcmFtZS5uZXcoMTM0OS42OTcyNjU2MjUsIDM3LjM0OTI4NTEyNTczMjQyLCAtMTMyOC44MzA5MzI2MTcxODc1KSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5TaXplID0gVmVjdG9yMy5uZXcoMzAsMzAsMzApDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgbm90IEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDEzNDkuNjk3MjY1NjI1LCAzNy4zNDkyODUxMjU3MzI0MiwgLTEzMjguODMwOTMyNjE3MTg3NSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuU2l6ZSA9IFZlY3RvcjMubmV3KDMwLDMwLDMwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kXV0NCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTM0Ny42NTI3MSwgMzcuMzkwNjUxNywgLTEzMjUuMDc3MTUsIDAuNDg0ODMwNTU4LCAyLjcxMzQ4NzkyZS0wOCwgMC44NzQ2MDgwOTksIC0yLjM0NTU5OTYzZS0wOCwgMSwgLTEuODAyMjU4MDhlLTA4LCAtMC44NzQ2MDgwOTksIC0xLjE3NzY5MDU3ZS0wOCwgMC40ODQ4MzA1NTgpKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRHJlc3Nyb3NhUXVlc3RQcm9ncmVzcyIpLlVzZWRLZXkgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkRyZXNzcm9zYVF1ZXN0UHJvZ3Jlc3MiKS5LaWxsZWRJY2VCb3NzID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiSWNlIEFkbWlyYWwiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJJY2UgQWRtaXJhbCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJEcmVzc3Jvc2FRdWVzdFByb2dyZXNzIikuS2lsbGVkSWNlQm9zcyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbERyZXNzcm9zYSIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpXb3JsZF9RdWVzdDphZGRUb2dnbGUoJ0F1dG8gVGhpcmQgV29ybGQgW0x2LiAxNTAwXScsIEF1dG9UaGlyZFdvcmxkLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9UaGlyZFdvcmxkID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9UaGlyZFdvcmxkKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvVGhpcmRXb3JsZCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE1MDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJhcnRpbG9RdWVzdFByb2dyZXNzIiwiQmFydGlsbyIpID09IDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJHZXRVbmxvY2thYmxlcyIpLkZsYW1pbmdvQWNjZXNzID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlc1siQ29tbUZfIl06SW52b2tlU2VydmVyKCJaUXVlc3RQcm9ncmVzcyIsICJDaGVjayIpID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRG9uIFN3YW4iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJEb24gU3dhbiIgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCBBdXRvVGhpcmRXb3JsZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygyMjg4LjgwMiwgMTUuMTg3MDc3NSwgODYzLjAzNDYwNykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXNbIkNvbW1GXyJdOkludm9rZVNlcnZlcigiWlF1ZXN0UHJvZ3Jlc3MiLCAiQ2hlY2siKSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJyaXBfaW5kcmEiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJyaXBfaW5kcmEiIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgQXV0b1RoaXJkV29ybGQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTI2OTUyLjI4OTEsIDIxLjUyOTQ3ODEsIDMyOS4zNTE1NjIsIC0wLjQ1Mzk3MjU3OCwgMCwgLTAuODkxMDE1NjQ5LCAwLCAxLCAwLCAwLjg5MTAxNTY0OSwgMCwgLTAuNDUzOTcyNTc4KSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIFRhYmVsRGV2aWxGcnVpdFN0b3JlID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIFRhYmVsRGV2aWxGcnVpdE9wZW4gPSB7fQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlc1siQ29tbUZfIl06SW52b2tlU2VydmVyKCJnZXRJbnZlbnRvcnlGcnVpdHMiKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaTEsdjEgaW4gcGFpcnModikgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaTEgPT0gIk5hbWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChUYWJlbERldmlsRnJ1aXRTdG9yZSx2MSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gbmV4dCxnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOldhaXRGb3JDaGlsZCgiUmVtb3RlcyIpLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkdldEZydWl0cyIpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5QcmljZSA+PSAxMDAwMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KFRhYmVsRGV2aWxGcnVpdE9wZW4sdi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSxEZXZpbEZydWl0T3BlbkRvb3IgaW4gcGFpcnMoVGFiZWxEZXZpbEZydWl0T3BlbikgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaTEsRGV2aWxGcnVpdFN0b3JlIGluIHBhaXJzKFRhYmVsRGV2aWxGcnVpdFN0b3JlKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBEZXZpbEZydWl0T3BlbkRvb3IgPT0gRGV2aWxGcnVpdFN0b3JlIGFuZCBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJHZXRVbmxvY2thYmxlcyIpLkZsYW1pbmdvQWNjZXNzID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKERldmlsRnJ1aXRTdG9yZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkxvYWRGcnVpdCIsRGV2aWxGcnVpdFN0b3JlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRhbGtUcmV2b3IiLCIxIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUYWxrVHJldm9yIiwiMiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVGFsa1RyZXZvciIsIjMiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUYWxrVHJldm9yIiwiMSIpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUYWxrVHJldm9yIiwiMiIpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUYWxrVHJldm9yIiwiMyIpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJHZXRVbmxvY2thYmxlcyIpLkZsYW1pbmdvQWNjZXNzID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsWm91IikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJhcnRpbG9RdWVzdFByb2dyZXNzIiwiQmFydGlsbyIpID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIlN3YW4gUGlyYXRlcyIpIGFuZCBzdHJpbmcuZmluZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIjUwIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUgdGhlbiANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU3dhbiBQaXJhdGUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJTd2FuIFBpcmF0ZSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIG9yIG5vdCBBdXRvVGhpcmRXb3JsZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChDRnJhbWUubmV3KDEwNTcuOTI3NjEsIDEzNy42MTQzMTksIDEyNDIuMDgwNjkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMDU3LjkyNzYxLCAxMzcuNjE0MzE5LCAxMjQyLjA4MDY5KSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IiwiQmFydGlsb1F1ZXN0IiwxKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmFydGlsb1F1ZXN0UHJvZ3Jlc3MiLCJCYXJ0aWxvIikgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJhcnRpbG9RdWVzdFByb2dyZXNzIiwiQmFydGlsbyIpDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkplcmVteSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJKZXJlbXkiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgQXV0b1RoaXJkV29ybGQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChDRnJhbWUubmV3KDIwOTkuODgxNTksIDQ0OC45MzEsIDY0OC45OTczNzUpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMjA5OS44ODE1OSwgNDQ4LjkzMSwgNjQ4Ljk5NzM3NSkpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJhcnRpbG9RdWVzdFByb2dyZXNzIiwiQmFydGlsbyIpID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gQ0ZyYW1lVGhpcmQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDE1MDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChDRnJhbWUubmV3KC0xODM2LjE0MTIzNTM1MTU2MjUsIDEwLjQ1ODI5NDg2ODQ2OTIzOCwgMTY5Mi40OTE5NDMzNTkzNzUpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTE4MzYuMTQxMjM1MzUxNTYyNSwgMTAuNDU4Mjk0ODY4NDY5MjM4LCAxNjkyLjQ5MTk0MzM1OTM3NSkpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoLTE4NTAuNDkzMjksIDEzLjE3ODk1NTEsIDE3NTAuODk2ODUpDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtMTg1OC44NzMwNSwgMTkuMzc3NzQ2NiwgMTcxMi4wMTgwNykNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KC0xODAzLjk0MzI0LCAxNi41Nzg5MTg1LCAxNzUwLjg5Njg1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoLTE4NTguNTU4MzUsIDE2Ljg2MDQzMTcsIDE3MjQuNzk1NDEpDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtMTg2OS41NDIyNCwgMTUuOTg3ODU0LCAxNjgxLjAwNjU5KQ0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoLTE4MDAuMDk3OSwgMTYuNDk3ODAyNywgMTY4NC41MjM2OCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KC0xODE5LjI2MzQzLCAxNC43OTUxNjYsIDE3MTcuOTA2MjUpDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtMTgxMy41MTg0MywgMTQuODYwNDczNiwgMTcyNC43OTU0MSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gRklHSFRJTkcNCmxvY2FsIEZpZ2h0aW5nX1F1ZXN0ID0gUXVlc3RfTGVmdDphZGRNZW51KCIjRmlnaHRpbmciKQ0KRmlnaHRpbmdfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIERlYXRoU3RlcCcsIEF1dG9EZWF0aFN0ZXAsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0RlYXRoU3RlcCA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvRGVhdGhTdGVwKQ0KaWYgQXV0b0RlYXRoU3RlcCB0aGVuDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5QmxhY2tMZWciKQ0KZW5kDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgQXV0b0RlYXRoU3RlcCB0aGVuDQogICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmxhY2sgTGVnIikuTGV2ZWwuVmFsdWUgPj0gNDAwIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmxhY2sgTGVnIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmxhY2sgTGVnIikuTGV2ZWwuVmFsdWUgPj0gNDAwIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2VDYXN0bGUuSGFsbC5MaWJyYXJ5RG9vci5QaG9leXVEb29yLlRyYW5zcGFyZW5jeSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg2MzcyLjU3Mjc1LCAzMDIuMTk0NjExLCAtNjgzOC45NzQ2MSwgMC44Mzg1NDE1MDgsIC04LjI3NjQzNDUzZS0wNSwgMC41NDQ4Mzc2NTQsIDguMjc2NDM0NTNlLTA1LCAxLCAyLjQ1MjY1NzgzZS0wNSwgLTAuNTQ0ODM3NjU0LCAyLjQ1MjY1NzgzZS0wNSwgMC44Mzg1NDE1MDgpKQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEZWF0aFN0ZXAiKQ0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxpYnJhcnkgS2V5Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxpYnJhcnkgS2V5IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJMaWJyYXJ5IEtleSIpDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChDRnJhbWUubmV3KDYzNzEuMjAwMTk1MzEyNSwgMjk2LjYzNDMzODM3ODkwNjI1LCAtNjg0MS4xODExNTIzNDM3NSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDYzNzEuMjAwMTk1MzEyNSwgMjk2LjYzNDMzODM3ODkwNjI1LCAtNjg0MS4xODExNTIzNDM3NSkpIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKENGcmFtZS5uZXcoNjM3MS4yMDAxOTUzMTI1LCAyOTYuNjM0MzM4Mzc4OTA2MjUsIC02ODQxLjE4MTE1MjM0Mzc1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMyBvciBub3QgQXV0b0RlYXRoU3RlcA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENGcmFtZS5uZXcoNjM3MS4yMDAxOTUzMTI1LCAyOTYuNjM0MzM4Mzc4OTA2MjUsIC02ODQxLjE4MTE1MjM0Mzc1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RGVhdGhTdGVwIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkF3YWtlbmVkIEljZSBBZG1pcmFsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJBd2FrZW5lZCBJY2UgQWRtaXJhbCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkF3YWtlbmVkIEljZSBBZG1pcmFsIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQXdha2VuZWQgSWNlIEFkbWlyYWwiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIEF1dG9EZWF0aFN0ZXAgPT0gZmFsc2Ugb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMaWJyYXJ5IEtleSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMaWJyYXJ5IEtleSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJBd2FrZW5lZCBJY2UgQWRtaXJhbCBbTHYuIDE0MDBdIFtCb3NzXSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJBd2FrZW5lZCBJY2UgQWRtaXJhbCBbTHYuIDE0MDBdIFtCb3NzXSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUJsYWNrTGVnIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCmVuZCkNCg0KRmlnaHRpbmdfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIFN1cGVySHVtYW4nLCBBdXRvU3VwZXJodW1hbiwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvU3VwZXJodW1hbiA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvU3VwZXJodW1hbikNCmlmIEF1dG9TdXBlcmh1bWFuIHRoZW4NCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTdXBlcmh1bWFuIikNCmVuZA0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvU3VwZXJodW1hbiB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpGaW5kRmlyc3RDaGlsZCgiV2VhcG9uQXNzZXRDYWNoZSIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkNvbWJhdCIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkNvbWJhdCIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsiTG9jYWxQbGF5ZXIiXS5EYXRhLkJlbGkuVmFsdWUgPj0gMTUwMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5QmxhY2tMZWciKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlN1cGVyaHVtYW4iKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlN1cGVyaHVtYW4iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiU3VwZXJodW1hbiIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGaXNobWFuIEthcmF0ZSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZpc2htYW4gS2FyYXRlIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJsYWNrIExlZyIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJsYWNrIExlZyIpLkxldmVsLlZhbHVlIDw9IDI5OSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkJsYWNrIExlZyIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikuTGV2ZWwuVmFsdWUgPD0gMjk5IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiRWxlY3RybyIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZpc2htYW4gS2FyYXRlIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmlzaG1hbiBLYXJhdGUiKS5MZXZlbC5WYWx1ZSA8PSAyOTkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJGaXNobWFuIEthcmF0ZSIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY1VuRXF1aXBXZWFwb25rOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3IikuTGV2ZWwuVmFsdWUgPD0gMjk5IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiRHJhZ29uIENsYXciKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKS5MZXZlbC5WYWx1ZSA+PSAzMDAgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWyJMb2NhbFBsYXllciJdLkRhdGEuQmVsaS5WYWx1ZSA+PSAzMDAwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RybyIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmxhY2sgTGVnIikuTGV2ZWwuVmFsdWUgPj0gMzAwIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsiTG9jYWxQbGF5ZXIiXS5EYXRhLkJlbGkuVmFsdWUgPj0gMzAwMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cm8iKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpLkxldmVsLlZhbHVlID49IDMwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FsUGxheWVyIl0uRGF0YS5CZWxpLlZhbHVlID49IDc1MDAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlGaXNobWFuS2FyYXRlIikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpLkxldmVsLlZhbHVlID49IDMwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FsUGxheWVyIl0uRGF0YS5CZWxpLlZhbHVlID49IDc1MDAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlGaXNobWFuS2FyYXRlIikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmlzaG1hbiBLYXJhdGUiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGaXNobWFuIEthcmF0ZSIpLkxldmVsLlZhbHVlID49IDMwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FscGxheWVyIl0uRGF0YS5GcmFnbWVudHMuVmFsdWUgPj0gMTUwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwiRHJhZ29uQ2xhdyIsIjEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsIkRyYWdvbkNsYXciLCIyIikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZpc2htYW4gS2FyYXRlIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZpc2htYW4gS2FyYXRlIikuTGV2ZWwuVmFsdWUgPj0gMzAwIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsiTG9jYWxwbGF5ZXIiXS5EYXRhLkZyYWdtZW50cy5WYWx1ZSA+PSAxNTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCJEcmFnb25DbGF3IiwiMSIpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwiRHJhZ29uQ2xhdyIsIjIiKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBGcmFnbWVudCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWyJMb2NhbHBsYXllciJdLkRhdGEuRnJhZ21lbnRzLlZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBGcmFnbWVudCA8PSAxNDk5IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvU3VwZXJodW1hbiA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvU3VwZXJodW1hbiA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpLkxldmVsLlZhbHVlID49IDMwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FsUGxheWVyIl0uRGF0YS5CZWxpLlZhbHVlID49IDMwMDAwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U3VwZXJodW1hbiIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpLkxldmVsLlZhbHVlID49IDMwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FsUGxheWVyIl0uRGF0YS5CZWxpLlZhbHVlID49IDMwMDAwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U3VwZXJodW1hbiIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpGaWdodGluZ19RdWVzdDphZGRUb2dnbGUoJ0F1dG8gU2hhcmttYW4gS2FyYXRlJywgQXV0b1NoYXJrbWFuLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9TaGFya21hbiA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvU2hhcmttYW4pDQppZiBBdXRvU2hhcmttYW4gdGhlbg0KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVNoYXJrbWFuS2FyYXRlIikNCmVuZA0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgIGlmIEF1dG9TaGFya21hbiB0aGVuDQogICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGaXNobWFuIEthcmF0ZSIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGaXNobWFuIEthcmF0ZSIpLkxldmVsLlZhbHVlID49IDQwMCBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZpc2htYW4gS2FyYXRlIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmlzaG1hbiBLYXJhdGUiKS5MZXZlbC5WYWx1ZSA+PSA0MDAgdGhlbg0KICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTI2MDQuNjk1OCwgMjM5LjQzMjUyNiwgLTEwMzE1LjE5ODIsIDAuMDQyNTcwMTM2NSwgMCwgLTAuOTk5MDkzNDEzLCAwLCAxLCAwLCAwLjk5OTA5MzQxMywgMCwgMC4wNDI1NzAxMzY1KSkNCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTaGFya21hbkthcmF0ZSIpDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJXYXRlciBLZXkiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiV2F0ZXIgS2V5IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTI2MDQuNjk1OCwgMjM5LjQzMjUyNiwgLTEwMzE1LjE5ODIsIDAuMDQyNTcwMTM2NSwgMCwgLTAuOTk5MDkzNDEzLCAwLCAxLCAwLCAwLjk5OTA5MzQxMywgMCwgMC4wNDI1NzAxMzY1KSkgdW50aWwgKENGcmFtZS5uZXcoLTI2MDQuNjk1OCwgMjM5LjQzMjUyNiwgLTEwMzE1LjE5ODIsIDAuMDQyNTcwMTM2NSwgMCwgLTAuOTk5MDkzNDEzLCAwLCAxLCAwLCAwLjk5OTA5MzQxMywgMCwgMC4wNDI1NzAxMzY1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMyBvciBub3QgQXV0b1NoYXJrbWFuDQogICAgICAgICAgICAgICAgICAgIGlmIChDRnJhbWUubmV3KC0yNjA0LjY5NTgsIDIzOS40MzI1MjYsIC0xMDMxNS4xOTgyLCAwLjA0MjU3MDEzNjUsIDAsIC0wLjk5OTA5MzQxMywgMCwgMSwgMCwgMC45OTkwOTM0MTMsIDAsIDAuMDQyNTcwMTM2NSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjIpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTaGFya21hbkthcmF0ZSIpDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlRpZGUgS2VlcGVyIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiVGlkZSBLZWVwZXIiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBBdXRvU2hhcmttYW4gPT0gZmFsc2Ugb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMaWJyYXJ5IEtleSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMaWJyYXJ5IEtleSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaWRlIEtlZXBlciIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGlkZSBLZWVwZXIiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlGaXNobWFuS2FyYXRlIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgDQogICAgZW5kKQ0KZW5kDQplbmQpDQoNCkZpZ2h0aW5nX1F1ZXN0OmFkZFRvZ2dsZSgnQXV0byBFbGVjdHJpYyBDbGF3JywgQXV0b0VsZWN0cmljQ2xhdywgZnVuY3Rpb24oVmFsdWUpDQpBdXRvRWxlY3RyaWNDbGF3ID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9FbGVjdHJpY0NsYXcpDQppZiBBdXRvRWxlY3RyaWNDbGF3IHRoZW4NCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJvIikNCmVuZA0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KC4xKSBkbw0KICAgIGlmIEF1dG9FbGVjdHJpY0NsYXcgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikuTGV2ZWwuVmFsdWUgPj0gNDAwIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKS5MZXZlbC5WYWx1ZSA+PSA0MDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMDM3MS40NzE3LCAzMzAuNzY0NDk2LCAtMTAxMzEuNDE5OSkpDQogICAgICAgICAgICAgICAgICAgIGlmIChDRnJhbWUubmV3KC0xMDM3MS40NzE3LCAzMzAuNzY0NDk2LCAtMTAxMzEuNDE5OSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJpY0NsYXciLCJTdGFydCIpDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTEyNTUwLjUzMjIyNjU2MywgMzM2LjIyNjMxODM1OTM4LCAtNzUxMC40MjMzMzk4NDM4KSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKENGcmFtZS5uZXcoLTEyNTUwLjUzMjIyNjU2MywgMzM2LjIyNjMxODM1OTM4LCAtNzUxMC40MjMzMzk4NDM4KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTAzNzEuNDcxNywgMzMwLjc2NDQ5NiwgLTEwMTMxLjQxOTkpKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lLm5ldygtMTAzNzEuNDcxNywgMzMwLjc2NDQ5NiwgLTEwMTMxLjQxOTkpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RyaWNDbGF3IikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTAzNzEuNDcxNywgMzMwLjc2NDQ5NiwgLTEwMTMxLjQxOTkpKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lLm5ldygtMTAzNzEuNDcxNywgMzMwLjc2NDQ5NiwgLTEwMTMxLjQxOTkpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RyaWNDbGF3IiwiU3RhcnQiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMjU1MC41MzIyMjY1NjMsIDMzNi4yMjYzMTgzNTkzOCwgLTc1MTAuNDIzMzM5ODQzOCkpDQogICAgICAgICAgICAgICAgICAgIGlmIChDRnJhbWUubmV3KC0xMjU1MC41MzIyMjY1NjMsIDMzNi4yMjYzMTgzNTkzOCwgLTc1MTAuNDIzMzM5ODQzOCkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTEwMzcxLjQ3MTcsIDMzMC43NjQ0OTYsIC0xMDEzMS40MTk5KSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKENGcmFtZS5uZXcoLTEwMzcxLjQ3MTcsIDMzMC43NjQ0OTYsIC0xMDEzMS40MTk5KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cmljQ2xhdyIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkVsZWN0cmljIENsYXciKQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpGaWdodGluZ19RdWVzdDphZGRUb2dnbGUoJ0F1dG8gRHJhZ29uIFRhbG9uJywgQXV0b0RyYWdvblRhbG9uLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9EcmFnb25UYWxvbiA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvRHJhZ29uVGFsb24pDQppZiBBdXRvRHJhZ29uVGFsb24gdGhlbg0KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCJEcmFnb25DbGF3IiwiMSIpDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsIkRyYWdvbkNsYXciLCIyIikNCmVuZA0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KC4xKSBkbw0KICAgIGlmIEF1dG9EcmFnb25UYWxvbiB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpGaW5kRmlyc3RDaGlsZCgiV2VhcG9uQXNzZXRDYWNoZSIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3IikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKS5MZXZlbC5WYWx1ZSA8PSAzOTkgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiRHJhZ29uIENsYXciKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpLkxldmVsLlZhbHVlID49IDQwMCBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJEcmFnb24gQ2xhdyIpDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURyYWdvblRhbG9uIix0cnVlKSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJvbmVzIiwiQnV5IiwxLDEpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEcmFnb25UYWxvbiIsdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURyYWdvblRhbG9uIix0cnVlKSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURyYWdvblRhbG9uIikNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RHJhZ29uVGFsb24iLHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEcmFnb25UYWxvbiIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpGaWdodGluZ19RdWVzdDphZGRUb2dnbGUoJ0F1dG8gR29kIEh1bWFuJywgQXV0b0dvZGh1bWFuLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9Hb2RodW1hbiA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvR29kaHVtYW4pDQppZiBBdXRvR29kaHVtYW4gdGhlbg0KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUdvZGh1bWFuIikNCmVuZA0KZW5kKQ0KZnVuY3Rpb24gQ2hlY2tNYXRlcmlhbChpdGVtKQ0KZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJnZXRJbnZlbnRvcnkiKSkgZG8NCiAgICBpZiB0eXBlKHYpID09ICJ0YWJsZSIgdGhlbg0KICAgICAgICBpZiB2LlR5cGUgPT0gIk1hdGVyaWFsIiB0aGVuDQogICAgICAgICAgICBpZiB2Lk5hbWUgPT0gaXRlbSB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIHYuQ291bnQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoLjEpIGRvDQogICAgaWYgQXV0b0dvZGh1bWFuIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3VwZXJodW1hbiIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3VwZXJodW1hbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJsYWNrIExlZyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEZWF0aCBTdGVwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEZWF0aCBTdGVwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZpc2htYW4gS2FyYXRlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGaXNobWFuIEthcmF0ZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTaGFya21hbiBLYXJhdGUiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNoYXJrbWFuIEthcmF0ZSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cmljIENsYXciKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJpYyBDbGF3Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gVGFsb24iKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBUYWxvbiIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkdvZGh1bWFuIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJHb2RodW1hbiIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTdXBlcmh1bWFuIix0cnVlKSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTdXBlcmh1bWFuIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3VwZXJodW1hbiIpLkxldmVsLlZhbHVlID49IDQwMCBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTdXBlcmh1bWFuIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlN1cGVyaHVtYW4iKS5MZXZlbC5WYWx1ZSA+PSA0MDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RGVhdGhTdGVwIikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBnYW1lLlN0YXJ0ZXJHdWk6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIk5vdGlmaWNhdGlvbiIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dCA9ICJOb3QgSGF2ZSBTdXBlcmh1bWFuIiAsDQogICAgICAgICAgICAgICAgICAgICAgICBJY29uID0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMi41DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RGVhdGhTdGVwIix0cnVlKSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEZWF0aCBTdGVwIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRGVhdGggU3RlcCIpLkxldmVsLlZhbHVlID49IDQwMCBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEZWF0aCBTdGVwIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRlYXRoIFN0ZXAiKS5MZXZlbC5WYWx1ZSA+PSA0MDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U2hhcmttYW5LYXJhdGUiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGdhbWUuU3RhcnRlckd1aTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgew0KICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiTm90aWZpY2F0aW9uIiwgDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0ID0gIk5vdCBIYXZlIERlYXRoIFN0ZXAiICwNCiAgICAgICAgICAgICAgICAgICAgICAgIEljb24gPSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyLjUNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTaGFya21hbkthcmF0ZSIsdHJ1ZSkgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2hhcmttYW4gS2FyYXRlIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2hhcmttYW4gS2FyYXRlIikuTGV2ZWwuVmFsdWUgPj0gNDAwIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNoYXJrbWFuIEthcmF0ZSIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTaGFya21hbiBLYXJhdGUiKS5MZXZlbC5WYWx1ZSA+PSA0MDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RyaWNDbGF3IikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBnYW1lLlN0YXJ0ZXJHdWk6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIk5vdGlmaWNhdGlvbiIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dCA9ICJOb3QgSGF2ZSBTaGFya01hbiBLYXJhdGUiICwNCiAgICAgICAgICAgICAgICAgICAgICAgIEljb24gPSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyLjUNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJpY0NsYXciLHRydWUpID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cmljIENsYXciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJpYyBDbGF3IikuTGV2ZWwuVmFsdWUgPj0gNDAwIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cmljIENsYXciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRWxlY3RyaWMgQ2xhdyIpLkxldmVsLlZhbHVlID49IDQwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEcmFnb25UYWxvbiIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5TdGFydGVyR3VpOlNldENvcmUoIlNlbmROb3RpZmljYXRpb24iLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJOb3RpZmljYXRpb24iLCANCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQgPSAiTm90IEhhdmUgRWxlY3RyaWMgQ2xhdyIgLA0KICAgICAgICAgICAgICAgICAgICAgICAgSWNvbiA9ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPSIsDQogICAgICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDIuNQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURyYWdvblRhbG9uIix0cnVlKSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gVGFsb24iKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gVGFsb24iKS5MZXZlbC5WYWx1ZSA+PSA0MDAgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIFRhbG9uIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBUYWxvbiIpLkxldmVsLlZhbHVlID49IDQwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlHb2RodW1hbiIsdHJ1ZSksICJCcmluZyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlN0YXJ0ZXJHdWk6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiTm90aWZpY2F0aW9uIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQgPSAiTm90IEhhdmUgRW5vdWdoIE1hdGVyaWFsIiAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEljb24gPSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDIuNQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5R29kaHVtYW4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5TdGFydGVyR3VpOlNldENvcmUoIlNlbmROb3RpZmljYXRpb24iLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJOb3RpZmljYXRpb24iLCANCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQgPSAiTm90IEhhdmUgRHJhZ29uIFRhbG9uIiAsDQogICAgICAgICAgICAgICAgICAgICAgICBJY29uID0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMi41DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U3VwZXJodW1hbiIpDQoNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBTV09SRCBRVUVTVA0KbG9jYWwgU3dvcmRfV3Vlc3QgPSBRdWVzdF9MZWZ0OmFkZE1lbnUoJyNTd29yZCcpDQpTd29yZF9XdWVzdDphZGRUb2dnbGUoJ0F1dG8gU2FiZXInLCBBdXRvU2FiZXIsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b1NhYmVyID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9TYWJlcikNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b1NhYmVyIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAyMDAgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2FiZXIiKSBhbmQgbm90IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNhYmVyIikgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuRmluYWwuUGFydC5UcmFuc3BhcmVuY3kgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLkRvb3IuVHJhbnNwYXJlbmN5ID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lLm5ldygtMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTUxZS0wOSwgLTAuOTI4NjY3NzI0LCAzLjk3MDk5NDkxZS0wOCwgMSwgMS45MTY3OTM0OGUtMDgsIDAuOTI4NjY3NzI0LCAtNC4zOTg2OTc5NGUtMDgsIDAuMzcwOTEyNzkpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUxLkJ1dHRvbi5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUyLkJ1dHRvbi5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUzLkJ1dHRvbi5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGU0LkJ1dHRvbi5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGU1LkJ1dHRvbi5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTUxZS0wOSwgLTAuOTI4NjY3NzI0LCAzLjk3MDk5NDkxZS0wOCwgMSwgMS45MTY3OTM0OGUtMDgsIDAuOTI4NjY3NzI0LCAtNC4zOTg2OTc5NGUtMDgsIDAuMzcwOTEyNzkpKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRlc2VydC5CdXJuLlBhcnQuVHJhbnNwYXJlbmN5ID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlRvcmNoIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVG9yY2giKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJUb3JjaCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMTE0LjYxNDc1LCA1LjA0Njc5NzI4LCA0MzUwLjIyODAzLCAtMC42NDg0NjY1ODcsIC0xLjI4Nzk5MDk0ZS0wOSwgMC43NjEyNDMxMDUsIC01LjcwNjUyOTE0ZS0xMCwgMSwgMS4yMDU4NDU0MmUtMDksIC0wLjc2MTI0MzEwNSwgMy40NzU0NDg4MmUtMTAsIC0wLjY0ODQ2NjU4NykpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTYxMC4wMDc1NywgMTEuNTA0OTg1OCwgMTY0LjAwMTU4NywgMC45ODQ4MDc1NTEsIC0wLjE2NzcyMjI4NSwgLTAuMDQ0OTgxODE0OSwgMC4xNzM2NDk0MywgMC45NTEyNDQyMzUsIDAuMjU0OTEyMTk4LCAzLjQyMzcyODA1ZS0wNSwgLTAuMjU4ODUwNTE1LCAwLjk2NTkxNzQwOCkpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIlNpY2tNYW4iKSB+PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwiR2V0Q3VwIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkN1cCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIkZpbGxDdXAiLGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5DdXApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCJTaWNrTWFuIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwiUmljaFNvbiIpID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCJSaWNoU29uIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIlJpY2hTb24iKSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJNb2IgTGVhZGVyIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIk1vYiBMZWFkZXIiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIEF1dG9TYWJlciA9PSBmYWxzZSBvciBub3Qgdi5QYXJlbnQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJNb2IgTGVhZGVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwiUmljaFNvbiIpID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwiUmljaFNvbiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIlJlbGljIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTE0MDQuOTE1MDQsIDI5Ljk3NzMyNzMsIDMuODA1OTgxMTYsIDAuODc2NTE0NDk0LCA1LjY2OTA2ODc3ZS0wOSwgMC40ODEzNzU0NTYsIDIuNTM4NTE5OTdlLTA4LCAxLCAtNS43OTk5NTYwN2UtMDgsIC0wLjQ4MTM3NTQ1NiwgNi4zMDU3MjY0M2UtMDgsIDAuODc2NTE0NDk0KSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNhYmVyIEV4cGVydCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlNhYmVyIEV4cGVydCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBBdXRvU2FiZXIgPT0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZC5IZWFsdGggPD0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwiUGxhY2VSZWxpYyIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJTYWJlciBFeHBlcnQiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KU3dvcmRfV3Vlc3Q6YWRkVG9nZ2xlKCdBdXRvIExlZ2VuZGFyeSBTd29yZCcsIEF1dG9MZWdlbmRhcnlTd29yZCwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvTGVnZW5kYXJ5U3dvcmQgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvTGVnZW5kYXJ5U3dvcmQgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJMZWdlbmRhcnlTd29ybGREZWFsZXIiLCIxIikNCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkxlZ2VuZGFyeVN3b3JsZERlYWxlciIsIjIiKQ0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiTGVnZW5kYXJ5U3dvcmxkRGVhbGVyIiwiMiIpDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpTd29yZF9XdWVzdDphZGRUb2dnbGUoJ0F1dG8gUmVuZ29rdScsIEF1dG9SZW5nb2t1LCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9SZW5nb2t1ID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9SZW5nb2t1KQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvUmVuZ29rdSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5IikgdGhlbg0KICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiSGlkZGVuIEtleSIpDQogICAgICAgICAgICAgICAgbG9jMSA9IENGcmFtZS5uZXcoNjU3MS4xMjAxMTcxODc1LCAyOTkuMjMwMjg1NjQ0NTMsIC02OTY3Ljg0MTc5Njg3NSkNCiAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEJUUChsb2MxKQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4obG9jMSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNub3cgTHVya2VyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJBcmN0aWMgV2FycmlvciIpIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlNub3cgTHVya2VyIiBvciB2Lk5hbWUgPT0gIkFyY3RpYyBXYXJyaW9yIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZW5nb2t1X0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZW5nb2t1X0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5Iikgb3IgQXV0b1Jlbmdva3UgPT0gZmFsc2Ugb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDANCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDU0MzkuNzE2Nzk2ODc1LCA4NC40MjA5NDQyMTM4NjcsIC02NzE1LjE2MzU3NDIxODgpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpTd29yZF9XdWVzdDphZGRUb2dnbGUoJ0F1dG8gQnVkZHkgU3dvcmQnLCBBdXRvQnVkZHlTd29yZCwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvQnVkZHlTd29yZCA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvQnVkZHlTd29yZCkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b0J1ZGR5U3dvcmQgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4gW0x2LiAyMTc1XSBbQm9zc10iKSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJDYWtlIFF1ZWVuIFtMdi4gMjE3NV0gW0Jvc3NdIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvQnVkZHlTd29yZCBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiBbTHYuIDIxNzVdIFtCb3NzXSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpTd29yZF9XdWVzdDphZGRUb2dnbGUoJ0F1dG8gUG9sZScsIEF1dG9Qb2xlLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9Qb2xlID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9Qb2xlKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvUG9sZSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGh1bmRlciBHb2QiKSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJUaHVuZGVyIEdvZCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b1BvbGUgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDANCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEJUUChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRodW5kZXIgR29kIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRodW5kZXIgR29kIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNClN3b3JkX1d1ZXN0OmFkZFRvZ2dsZSgnQXV0byBDYXZhbmRlcicsIEF1dG9DYXZhbmRlciwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvQ2F2YW5kZXIgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0NhdmFuZGVyKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvQ2F2YW5kZXIgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJCZWF1dGlmdWwgUGlyYXRlIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvQ2F2YW5kZXIgb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDANCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEJUUChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KU3dvcmRfV3Vlc3Q6YWRkVG9nZ2xlKCdBdXRvIFlhbWEnLCBBdXRvWWFtYSwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvWWFtYSA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvWWFtYSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b1lhbWEgdGhlbg0KICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIsIlByb2dyZXNzIikgPj0gMzAgdGhlbg0KICAgICAgICAgICAgcmVwZWF0IHRhc2sud2FpdCgpDQogICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuV2F0ZXJmYWxsLlNlYWxlZEthdGFuYS5IYW5kbGUuQ2xpY2tEZXRlY3RvcikNCiAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgb3Igbm90IEF1dG9ZYW1hDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNClN3b3JkX1d1ZXN0OmFkZFRvZ2dsZSgnQXV0byBUdXNoaXRhJywgQXV0b1R1c2hpdGEsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b1R1c2hpdGEgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b1R1c2hpdGEpDQplbmQpDQoNCmZ1bmN0aW9uIGF1dG9UdXNoaXRhKCkNCmlmIG5vdCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkdvZCdzIENoYWxpY2UiKSBhbmQgbm90IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkdvZCdzIENoYWxpY2UiKSB0aGVuDQogICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIG9yIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgb3IgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIG9yIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgdGhlbg0KICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIikNCiAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICBpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCJEaWFibG8iKSBvciBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCJEZWFuZHJlIikgb3Igc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwiVXJiYW4iKSB0aGVuDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiRGlhYmxvIiBvciB2Lk5hbWUgPT0gIkRlYW5kcmUiIG9yIHYuTmFtZSA9PSAiVXJiYW4iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIEF1dG9UdXNoaXRhID09IGZhbHNlIG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IHYuUGFyZW50DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTI1NTQuOTQ0MywgMzM3LjE5NDA5MiwgLTc1MDEuNDQ3MjcpKQ0KICAgIGVuZA0KZWxzZWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiR29kJ3MgQ2hhbGljZSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkdvZCdzIENoYWxpY2UiKSB0aGVuDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiYWN0aXZhdGVDb2xvciIsIldpbnRlciBTa3kiKQ0KICAgIHdhaXQoMC41KQ0KICAgIFR3ZWVuKENGcmFtZS5uZXcoLTU0MjAuMTY2MDIsIDEwODQuOTY1NywgLTI2NjYuODIwOCkpDQogICAgd2FpdCgwLjUpDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiYWN0aXZhdGVDb2xvciIsIlB1cmUgUmVkIikNCiAgICB3YWl0KDAuNSkNCiAgICBUd2VlbihDRnJhbWUubmV3KC01NDE0LjQxMzU3LCAzMDkuODY1NzUzLCAtMjIxMi40NTc3NikpDQogICAgd2FpdCgwLjUpDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiYWN0aXZhdGVDb2xvciIsIlNub3cgV2hpdGUiKQ0KICAgIHdhaXQoMC41KQ0KICAgIFR3ZWVuKENGcmFtZS5uZXcoLTQ5NzEuNDc1NTksIDMzMS41NjU3NjUsIC0zNzIwLjAyOTU0KSkNCiAgICB3YWl0KDAuNSkNCiAgICBFcXVpcFRvb2woIkdvZCdzIENoYWxpY2UiKQ0KICAgIHdhaXQoMC41KQ0KICAgIFR3ZWVuKENGcmFtZS5uZXcoLTU1NjAuMjcyOTUsIDMxMy45MTU0NjYsIC0yNjYzLjg5Nzk1KSkNCiAgICB3YWl0KDAuNSkNCiAgICBUd2VlbihDRnJhbWUubmV3KC01NTYxLjM3NDUxLCAzMTMuMzQyNTI5LCAtMjY2My40OTQ4KSkNCiAgICB3YWl0KDEpDQogICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MTU0LjE3Njc2LCAxNDEuNzg2NDIzLCA5MTEuMDQ2MzI2KSkNCiAgICB3YWl0KDAuMikNCiAgICBUd2VlbihDRnJhbWUubmV3KDUxNDguMDM2MTMsIDE2Mi4zNTI0OTMsIDkxMC41NDgyMTgpKQ0KICAgIHdhaXQoMSkNCiAgICBFcXVpcFRvb2woIkhvbHkgVG9yY2giKQ0KICAgIHdhaXQoMSkNCiAgICB3YWl0KDAuNCkNCiAgICBUd2VlbihDRnJhbWUubmV3KC0xMDc1Mi43Njk1LCA0MTIuMjI5NTIzLCAtOTM2Ni4zNjMyOCkpDQogICAgd2FpdCgwLjQpDQogICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTE2NzMuNDExMSwgMzMxLjc0OTAyMywgLTk0NzQuMzQ2NjgpKQ0KICAgIHdhaXQoMC40KQ0KICAgIFR3ZWVuKENGcmFtZS5uZXcoLTEyMTMzLjMzODksIDUxOS40NzUyMiwgLTEwNjUzLjE5MDQpKQ0KICAgIHdhaXQoMC40KQ0KICAgIFR3ZWVuKENGcmFtZS5uZXcoLTEzMzM2LjUsIDQ4NS4yODAzOTYsIC02OTgzLjM1MjU0KSkNCiAgICB3YWl0KDAuNCkNCiAgICBUd2VlbihDRnJhbWUubmV3KC0xMzQ4Ny40MTMxLCAzMzQuODQ4NDUsIC03OTI2LjM0ODYzKSkNCiAgICB3YWl0KDEpDQogICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTG9uZ21hIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiTG9uZ21hIikgdGhlbg0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMDE3MS43MDUxLCA0MDYuOTgxOTk1LCAtOTU1Mi4zMTczOCkpDQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgaWYgdi5OYW1lID09ICJMb25nbWEiIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZWxzZWlmIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoInJpcF9pbmRyYSBUcnVlIEZvcm0iKSAgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgicmlwX2luZHJhIFRydWUgRm9ybSIpIHRoZW4NCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtNTMzMi4zMDM3MSwgNDIzLjk4NTQxMywgLTI2NzMuNDgyMTgpKQ0KICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAicmlwX2luZHJhIFRydWUgRm9ybSIgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9UdXNoaXRhIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgYXV0b1R1c2hpdGEoKQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBRVUVTVCBSSUdIVA0KbG9jYWwgUXVlc3RfUmlnaHQgPSBUYWIuVGFiXzM6YWRkU2VjdGlvbigpDQoNCmxvY2FsIENES19RdWVzdF9QdXp6bGUgPSBRdWVzdF9SaWdodDphZGRNZW51KCcjQ0RLIFB1enpsZScpDQoNCmxvY2FsIFR1c2hpdGFTd29yZCA9IENES19RdWVzdF9QdXp6bGU6YWRkTGFiZWwoIiIpDQpsb2NhbCBZYW1hU3dvcmQgPSBDREtfUXVlc3RfUHV6emxlOmFkZExhYmVsKCIiKQ0KDQpmdW5jdGlvbiBHZXRXZWFwb25JbnZlbnRvcnkoU3dvcmQpDQpmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdldEludmVudG9yeSIpKSBkbw0KICAgIGlmIHR5cGUodikgPT0gInRhYmxlIiB0aGVuDQogICAgICAgIGlmIHYuVHlwZSA9PSAiU3dvcmQiIHRoZW4NCiAgICAgICAgICAgIGlmIHYuTmFtZSA9PSBTd29yZCB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KcmV0dXJuIGZhbHNlDQplbmQNCg0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBHZXRXZWFwb25JbnZlbnRvcnkoIlR1c2hpdGEiKSA9PSB0cnVlIHRoZW4NCiAgICAgICAgVHVzaGl0YVN3b3JkOlJlZnJlc2goIlR1c2hpdGEgU3dvcmQgOiBIYXZlIMOixZPigKYiKQ0KICAgIGVsc2VpZiBHZXRXZWFwb25JbnZlbnRvcnkoIlR1c2hpdGEiKSA9PSBmYWxzZSB0aGVuDQogICAgICAgIFR1c2hpdGFTd29yZDpSZWZyZXNoKCJUdXNoaXRhIFN3b3JkIDogTm90IEhhdmUgw6LCncWSIikNCiAgICBlbmQNCg0KICAgIGlmIEdldFdlYXBvbkludmVudG9yeSgiWWFtYSIpID09IHRydWUgdGhlbg0KICAgICAgICBZYW1hU3dvcmQ6UmVmcmVzaCgiWWFtYSBTd29yZCA6IEhhdmUgw6LFk+KApiIpDQogICAgZWxzZWlmIEdldFdlYXBvbkludmVudG9yeSgiWWFtYSIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgWWFtYVN3b3JkOlJlZnJlc2goIllhbWEgU3dvcmQgOiBOb3QgSGF2ZSDDosKdxZIiKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCkNES19RdWVzdF9QdXp6bGU6YWRkTGFiZWwoIldpbGwgUmVsZWFzZWQgU29vbiIpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gT3RoZXIgUXVlc3QNCmxvY2FsIE90aGVyX1F1ZXN0ID0gUXVlc3RfUmlnaHQ6YWRkTWVudSgnI090aGVyJykNCk90aGVyX1F1ZXN0OmFkZFRvZ2dsZSgnQXV0byBEYXJrIERhZ2dlcicsIEF1dG9EYXJrRGFnZ2VyLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9EYXJrRGFnZ2VyID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9EYXJrRGFnZ2VyKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvRGFya0RhZ2dlciB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgicmlwX2luZHJhIFRydWUgRm9ybSIpIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gInJpcF9pbmRyYSBUcnVlIEZvcm0iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvRGFya0RhZ2dlciBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgicmlwX2luZHJhIFRydWUgRm9ybSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpPdGhlcl9RdWVzdDphZGRUb2dnbGUoJ0F1dG8gSGFsbG93IFN5Y3RoZScsIEF1dG9IYWxsb3dTeWN0aGUsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0hhbGxvd1N5Y3RoZSA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvSGFsbG93U3ljdGhlKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvSGFsbG93U3ljdGhlIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlNvdWwgUmVhcGVyIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IEF1dG9IYWxsb3dTeWN0aGUgb3Igbm90IHYuUGFyZW50DQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgbG9jMyA9IENGcmFtZS5uZXcoLTg5MzIuMzIyMjY1NjI1LCAxNDYuODMxNTQyOTY4NzUsIDYwNjIuNTUwNzgxMjUpDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkhhbGxvdyBFc3NlbmNlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIYWxsb3cgRXNzZW5jZSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0IHRhc2sud2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbihsb2MzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpDQogICAgICAgICAgICAgICAgICAgIHVudGlsIChsb2MzLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gOA0KICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkhhbGxvdyBFc3NlbmNlIikNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KT3RoZXJfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIENpdGl6ZW4nLCBBdXRvQ2l0aXplbiwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvQ2l0aXplbiA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvQ2l0aXplbikNCmlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTXVza2V0ZWVyIEhhdCIpIHRoZW4NCiAgICBDVENIID0gdHJ1ZQ0KZWxzZWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIk11c2tldGVlciBIYXQiKSB0aGVuDQogICAgQ1RDSCA9IHRydWUNCmVuZA0KaWYgQ1RDSCBhbmQgQ2hlY2tDaXRpemVuIHRoZW4NCiAgICBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIix7DQogICAgICAgIFRpdGxlID0gIkF1dG8gUXVlc3QgQ2l0aXplbiIsDQogICAgICAgIFRleHQgPSAiTXVza2V0ZWVyIEhhdCBTdWNjZXNzZnVsbHkiLA0KICAgICAgICBEdXJhdGlvbiA9IDMNCiAgICB9KQ0KZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIiwiQ2l0aXplbiIpID09IDMgYW5kIENoZWNrQ2l0aXplbiB0aGVuDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsew0KICAgICAgICBUaXRsZSA9ICJBdXRvIFF1ZXN0IENpdGl6ZW4iLA0KICAgICAgICBUZXh0ID0gIkNpdGl6ZW4gUXVlc3QgQ29tcGxldGVkIiwNCiAgICAgICAgRHVyYXRpb24gPSAzDQogICAgfSkNCmVuZA0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvQ2l0aXplbiB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE4MDAgYW5kIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIikuS2lsbGVkQmFuZGl0cyA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkZvcmVzdCBQaXJhdGUiKSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIjUwIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkZvcmVzdCBQaXJhdGUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiRm9yZXN0IFBpcmF0ZSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2l0aXplbl9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENpdGl6ZW5fRmFybV9DRnJhbWUgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBBdXRvQ2l0aXplbiA9PSBmYWxzZSBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKENGcmFtZS5uZXcoLTEzNDU5LjA2NTQyOTY4OCwgNDEyLjY4OTI3MDAxOTUzLCAtNzc4My4xODYwMzUxNTYzKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMzQ1OS4wNjU0Mjk2ODgsIDQxMi42ODkyNzAwMTk1MywgLTc3ODMuMTg2MDM1MTU2MykpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC03Njc1LjQ4OTI1NzgxMjUpKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoVmVjdG9yMy5uZXcoLTEyNDQzLjg2NzE4NzUsIDMzMi40MDM5NjExODE2NCwgLTc2NzUuNDg5MjU3ODEyNSkgLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCAiQ2l0aXplblF1ZXN0IiwgMSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTgwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiKS5LaWxsZWRCb3NzID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkNhcHRhaW4gRWxlcGhhbnQiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJDYXB0YWluIEVsZXBoYW50IiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBBdXRvQ2l0aXplbiA9PSBmYWxzZSBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCB2LlBhcmVudCBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSBvciBub3QgZ2FtcjpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKENGcmFtZS5uZXcoLTEzNDU5LjA2NTQyOTY4OCwgNDEyLjY4OTI3MDAxOTUzLCAtNzc4My4xODYwMzUxNTYzKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMzQ1OS4wNjU0Mjk2ODgsIDQxMi42ODkyNzAwMTk1MywgLTc3ODMuMTg2MDM1MTU2MykpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC03Njc1LjQ4OTI1NzgxMjUpKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lLm5ldygtMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtNzY3NS40ODkyNTc4MTI1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpDQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsIkNpdGl6ZW4iKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAwIGFuZCBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsIkNpdGl6ZW4iKSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMjUxMi4xMzg2NzE4NzUsIDM0MC4zOTI3OTE3NDgwNSwgLTk4NzIuODIwMzEyNSkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk90aGVyX1F1ZXN0OmFkZFRvZ2dsZSgnQXV0byBFdm8gUmFjZSBWMicsIEF1dG9Fdm9SYWNlLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9Fdm9SYWNlID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9Fdm9SYWNlKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvRXZvUmFjZSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2U6RmluZEZpcnN0Q2hpbGQoIkV2b2x2ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwiMSIpID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0yNzc5LjgzNTIxLCA3Mi45NjYxNDA3LCAtMzU3NC4wMjAwMiwgLTAuNzMwNDg0OTAzLCA2LjM5MDE0MTA0ZS0wOCwgLTAuNjgyOTI4ODYsIDMuNTk5NjMyMjRlLTA4LCAxLCA1LjUwNjY3MDMyZS0wOCwgMC42ODI5Mjg4NiwgMS41NjQyNDY2OWUtMDgsIC0wLjczMDQ4NDkwMykpDQogICAgICAgICAgICAgICAgICAgIGlmIChWZWN0b3IzLm5ldygtMjc3OS44MzUyMSwgNzIuOTY2MTQwNywgLTM1NzQuMDIwMDIpIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsIjIiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwiMSIpID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAxIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAxIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5Xb3Jrc3BhY2UuRmxvd2VyMS5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAyIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAyIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5Xb3Jrc3BhY2UuRmxvd2VyMi5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJab21iaWUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJab21iaWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2b1YyX0Zhcm1fTmFtZSA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2b1YyX0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDMiKSBvciBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBBdXRvRXZvUmFjZSA9PSBmYWxzZSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtNTg1NC4zOTAxNCwgMTQ1LjA5Mzg1NywgLTY4Ni45NDIwMTcsIDAuMzc5MjMzMjExLCAtMS40MTk3NTg0NGUtMDgsIC0wLjkyNTMwMTEzNSwgLTMuNzcyNjU3MTllLTEwLCAxLCAtMS41NDk4MzY3ZS0wOCwgMC45MjUzMDExMzUsIDYuMjI2NTc5N2UtMDksIDAuMzc5MjMzMjExKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTU4NTQuMzkwMTQsIDE0NS4wOTM4NTcsIC02ODYuOTQyMDE3LCAwLjM3OTIzMzIxMSwgLTEuNDE5NzU4NDRlLTA4LCAtMC45MjUzMDExMzUsIC0zLjc3MjY1NzE5ZS0xMCwgMSwgLTEuNTQ5ODM2N2UtMDgsIDAuOTI1MzAxMTM1LCA2LjIyNjU3OTdlLTA5LCAwLjM3OTIzMzIxMSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsIjEiKSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwiMyIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk90aGVyX1F1ZXN0OmFkZFRvZ2dsZSgnQXV0byBCYXJ0aWxvJywgQXV0b0JhcnRpbG8sIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0JhcnRpbG8gPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0JhcnRpbG8pDQppZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIldhcnJpb3IgSGVsbWV0IikgdGhlbg0KICAgIFN1Y2Nlc3MgPSB0cnVlDQplbHNlaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiV2FycmlvciBIZWxtZXQiKSB0aGVuDQogICAgU3VjY2VzcyA9IHRydWUNCmVuZA0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvQmFydGlsbyB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDg1MCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmFydGlsb1F1ZXN0UHJvZ3Jlc3MiLCJCYXJ0aWxvIikgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJTd2FuIFBpcmF0ZXMiKSBhbmQgc3RyaW5nLmZpbmQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICI1MCIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlIHRoZW4gDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU3dhbiBQaXJhdGUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiU3dhbiBQaXJhdGUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJhcnRpbG9fRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYXJ0aWxvX0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3IgQXV0b0JhcnRpbG8gPT0gZmFsc2Ugb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2Ugb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChDRnJhbWUubmV3KDEwNTcuOTI3NjEsIDEzNy42MTQzMTksIDEyNDIuMDgwNjkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTA1Ny45Mjc2MSwgMTM3LjYxNDMxOSwgMTI0Mi4wODA2OSkpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC00NTYuMjg5NTIsIDczLjAyMDA5NTgsIDI5OS44OTU5NjYpKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoVmVjdG9yMy5uZXcoLTQ1Ni4yODk1MiwgNzMuMDIwMDk1OCwgMjk5Ljg5NTk2NikgLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCJCYXJ0aWxvUXVlc3QiLDEpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDg1MCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmFydGlsb1F1ZXN0UHJvZ3Jlc3MiLCJCYXJ0aWxvIikgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgaWYgUXVlc3RCYXJ0aWxvID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTQ1Ni4yODk1MiwgNzMuMDIwMDk1OCwgMjk5Ljg5NTk2NikpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgKFZlY3RvcjMubmV3KC00NTYuMjg5NTIsIDczLjAyMDA5NTgsIDI5OS44OTU5NjYpIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzAgdGhlbg0KICAgICAgICAgICAgICAgICAgICB3YWl0KDEuMSkNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmFydGlsb1F1ZXN0UHJvZ3Jlc3MiLCJCYXJ0aWxvIikNCiAgICAgICAgICAgICAgICAgICAgUXVlc3RCYXJ0aWxvID0gMQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkplcmVteSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkplcmVteSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3Qgdi5QYXJlbnQgb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBBdXRvQmFydGlsbyA9PSBmYWxzZSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTkzMS41OTMxMzk2NDg0LCA0MDIuNjczOTE5Njc3NzMsIDk1Ni41MjIxNTU3NjE3MikpDQogICAgICAgICAgICAgICAgICAgIGlmIFF1ZXN0QmFydGlsbyA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTkzMS41OTMxMzk2NDg0LCA0MDIuNjczOTE5Njc3NzMsIDk1Ni41MjIxNTU3NjE3MikpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDg1MCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmFydGlsb1F1ZXN0UHJvZ3Jlc3MiLCJCYXJ0aWxvIikgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuRHJlc3Nyb3NhLkJhcnRpbG9QbGF0ZXMuUGxhdGUxLkNGcmFtZSkNCiAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRyZXNzcm9zYS5CYXJ0aWxvUGxhdGVzLlBsYXRlMi5DRnJhbWUNCiAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRyZXNzcm9zYS5CYXJ0aWxvUGxhdGVzLlBsYXRlMy5DRnJhbWUNCiAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRyZXNzcm9zYS5CYXJ0aWxvUGxhdGVzLlBsYXRlNC5DRnJhbWUNCiAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRyZXNzcm9zYS5CYXJ0aWxvUGxhdGVzLlBsYXRlNS5DRnJhbWUNCiAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRyZXNzcm9zYS5CYXJ0aWxvUGxhdGVzLlBsYXRlNi5DRnJhbWUNCiAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRyZXNzcm9zYS5CYXJ0aWxvUGxhdGVzLlBsYXRlNy5DRnJhbWUNCiAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRyZXNzcm9zYS5CYXJ0aWxvUGxhdGVzLlBsYXRlOC5DRnJhbWUNCiAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZCANCmVuZA0KZW5kKQ0KDQpPdGhlcl9RdWVzdDphZGRUb2dnbGUoJ0F1dG8gRG9uIFN3YW4nLCBfRy5Td2FuR2xhc3NlcywgZnVuY3Rpb24oVmFsdWUpDQpfRy5Td2FuR2xhc3NlcyA9IFZhbHVlDQpDYW5jZWxUd2VlbihfRy5Td2FuR2xhc3NlcykNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgX0cuU3dhbkdsYXNzZXMgdGhlbg0KICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRvbiBTd2FuIikgdGhlbg0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiRG9uIFN3YW4iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBfRy5Td2FuR2xhc3NlcyA9PSBmYWxzZSBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCB2LlBhcmVudA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgQlRQKENGcmFtZS5uZXcoMjE5MS4xNjc0ODA0Njg4LCAxNS4xNzc4NDIxNDAxOTgsIDY5NC42OTg3MzA0Njg3NSkpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygyMTkxLjE2NzQ4MDQ2ODgsIDE1LjE3Nzg0MjE0MDE5OCwgNjk0LjY5ODczMDQ2ODc1KSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpPdGhlcl9RdWVzdDphZGRUb2dnbGUoJ0F1dG8gUklQIEluZHJhJywgUmlwSW5kcmEsIGZ1bmN0aW9uKFZhbHVlKQ0KUmlwSW5kcmEgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oUmlwSW5kcmEpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIFJpcEluZHJhIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJyaXBfaW5kcmEgVHJ1ZSBGb3JtIikgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAicmlwX2luZHJhIFRydWUgRm9ybSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3QgUmlwSW5kcmEgb3Igbm90IHYuUGFyZW50DQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgbG9jMTEgPSBDRnJhbWUubmV3KC01NTI0LjUzMjcxLCAzMTMuODAwNTM3LCAtMjkxOC4wNzQyMiwgMC45NjQxOTQwNTksIDAsIDAuMjY1MTk3Njk0LCAwLCAxLCAwLCAtMC4yNjUxOTc2OTQsIDAsIDAuOTY0MTk0MDU5KQ0KICAgICAgICAgICAgICAgIFR3ZWVuKGxvYzExKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpPdGhlcl9RdWVzdDphZGRUb2dnbGUoJ0F1dG8gUmFpbmJvdycsIEF1dG9SYWluYm93SGFraSwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvUmFpbmJvd0hha2kgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b1JhaW5ib3dIYWtpKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBBdXRvUmFpbmJvd0hha2kgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICBsb2MxMiA9IENGcmFtZS5uZXcoLTExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLTg3NjAuMTU5MTc5Njg3NSkNCiAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEJUUChsb2MxMikNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGxvYzEyKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIChWZWN0b3IzLm5ldygtMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtODc2MC4xNTkxNzk2ODc1KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzAgdGhlbg0KICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSkNCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSG9ybmVkTWFuIiwiQmV0IikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIlN0b25lIikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU3RvbmUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJTdG9uZSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgQXV0b1JhaW5ib3dIYWtpID09IGZhbHNlIG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IHYuUGFyZW50IG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiU3RvbmUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiU3RvbmUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlN0b25lIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlIGFuZCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCJJc2xhbmQgRW1wcmVzcyIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCBFbXByZXNzIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiSXNsYW5kIEVtcHJlc3MiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIEF1dG9SYWluYm93SGFraSA9PSBmYWxzZSBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCB2LlBhcmVudCBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCBFbXByZXNzIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgQnlQYXNzVFAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJUUChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCBFbXByZXNzIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgRW1wcmVzcyIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIktpbG8gQWRtaXJhbCIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIktpbG8gQWRtaXJhbCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIktpbG8gQWRtaXJhbCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBGYXJtX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgQXV0b1JhaW5ib3dIYWtpID09IGZhbHNlIG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IHYuUGFyZW50IG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiS2lsbyBBZG1pcmFsIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiS2lsbyBBZG1pcmFsIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJLaWxvIEFkbWlyYWwiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCJDYXB0YWluIEVsZXBoYW50IikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkNhcHRhaW4gRWxlcGhhbnQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIEF1dG9SYWluYm93SGFraSA9PSBmYWxzZSBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCB2LlBhcmVudCBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYXB0YWluIEVsZXBoYW50IikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYXB0YWluIEVsZXBoYW50IikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJCZWF1dGlmdWwgUGlyYXRlIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIEZhcm1fTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBBdXRvUmFpbmJvd0hha2kgPT0gZmFsc2Ugb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3Qgdi5QYXJlbnQgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGxvYzE3ID0gQ0ZyYW1lLm5ldygtMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtODc2MC4xNTkxNzk2ODc1KQ0KICAgICAgICAgICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgQlRQKGxvYzE3KQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgVHdlZW4obG9jMTcpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgKFZlY3RvcjMubmV3KC0xMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC04NzYwLjE1OTE3OTY4NzUpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KQ0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJIb3JuZWRNYW4iLCJCZXQiKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpPdGhlcl9RdWVzdDphZGRUb2dnbGUoJ0F1dG8gSG9seXRvcmNoJywgQXV0b1RvcmNoLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9Ub3JjaCA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvVG9yY2gpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBBdXRvVG9yY2ggdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICByZXBlYXQgVHdlZW4oQ0ZyYW1lLm5ldygtMTA3NTIsIDQxNywgLTkzNjYpKSB3YWl0KCkgdW50aWwgbm90IEF1dG9Ub3JjaCBvciAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLVZlY3RvcjMubmV3KC0xMDc1MiwgNDE3LCAtOTM2NikpLk1hZ25pdHVkZSA8PSAxMA0KICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgcmVwZWF0IFR3ZWVuKENGcmFtZS5uZXcoLTExNjcyLCAzMzQsIC05NDc0KSkgd2FpdCgpIHVudGlsIG5vdCBBdXRvVG9yY2ggb3IgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbi1WZWN0b3IzLm5ldygtMTE2NzIsIDMzNCwgLTk0NzQpKS5NYWduaXR1ZGUgPD0gMTANCiAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgIHJlcGVhdCBUd2VlbihDRnJhbWUubmV3KC0xMjEzMiwgNTIxLCAtMTA2NTUpKSB3YWl0KCkgdW50aWwgbm90IEF1dG9Ub3JjaCBvciAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLVZlY3RvcjMubmV3KC0xMjEzMiwgNTIxLCAtMTA2NTUpKS5NYWduaXR1ZGUgPD0gMTANCiAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgIHJlcGVhdCBUd2VlbihDRnJhbWUubmV3KC0xMzMzNiwgNDg2LCAtNjk4NSkpIHdhaXQoKSB1bnRpbCBub3QgQXV0b1RvcmNoIG9yIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24tVmVjdG9yMy5uZXcoLTEzMzM2LCA0ODYsIC02OTg1KSkuTWFnbml0dWRlIDw9IDEwDQogICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICByZXBlYXQgVHdlZW4oQ0ZyYW1lLm5ldygtMTM0ODksIDMzMiwgLTc5MjUpKSB3YWl0KCkgdW50aWwgbm90IEF1dG9Ub3JjaCBvciAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLVZlY3RvcjMubmV3KC0xMzQ4OSwgMzMyLCAtNzkyNSkpLk1hZ25pdHVkZSA8PSAxMA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KT3RoZXJfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIFNvdWwgR3VpdGFyJywgQXV0b1NvdWxHdWl0YXIsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b1NvdWxHdWl0YXIgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b1NvdWxHdWl0YXIpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9Tb3VsR3VpdGFyIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgR2V0V2VhcG9uSW52ZW50b3J5KCJTb3VsIEd1aXRhciIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lLm5ldygtOTY4MS40NTg5ODQzNzUsIDYuMTM5ODgwNjU3MTk2MDQ1LCA2MzQxLjM3MjA3MDMxMjUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkZpbmRGaXJzdENoaWxkKCJTa2VsZXRvbiBNYWNoaW5lIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigic291bEd1aXRhckJ1eSIsdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uQ2FuZGxlMS5UcmFuc3BhcmVuY3kgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDEuTGVmdC5QYXJ0LlRyYW5zcGFyZW5jeSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3QyID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC04NzYyLjY5MTQwNjI1LCAxNzYuODQ3ODM5MzU1NDY4NzUsIDYxNzEuMzA3NjE3MTg3NSkpIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoQ0ZyYW1lLm5ldygtODc2Mi42OTE0MDYyNSwgMTc2Ljg0NzgzOTM1NTQ2ODc1LCA2MTcxLjMwNzYxNzE4NzUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzIG9yIG5vdCBBdXRvU291bEd1aXRhcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ3LkxlZnQuQ2xpY2tEZXRlY3RvcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNi5MZWZ0LkNsaWNrRGV0ZWN0b3IpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDUuTGVmdC5DbGlja0RldGVjdG9yKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ0LlJpZ2h0LkNsaWNrRGV0ZWN0b3IpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDMuTGVmdC5DbGlja0RldGVjdG9yKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQyLlJpZ2h0LkNsaWNrRGV0ZWN0b3IpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDEuUmlnaHQuQ2xpY2tEZXRlY3RvcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5UYWJsZXQuU2VnbWVudDE6RmluZEZpcnN0Q2hpbGQoIkNsaWNrRGV0ZWN0b3IiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTpGaW5kRmlyc3RDaGlsZCgiQ2xpY2tEZXRlY3RvciIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0NCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC05NTUzLjU5ODYzMjgxMjUsIDY1LjYyMzM4MjU2ODM1OTM4LCA2MDQxLjU4ODM3ODkwNjI1KSkgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoQ0ZyYW1lLm5ldygtOTU1My41OTg2MzI4MTI1LCA2NS42MjMzODI1NjgzNTkzOCwgNjA0MS41ODgzNzg5MDYyNSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMgb3Igbm90IEF1dG9Tb3VsR3VpdGFyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDMuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQzLkNsaWNrRGV0ZWN0b3IpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNsaWNrRGV0ZWN0b3IpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ2xpY2tEZXRlY3RvcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DbGlja0RldGVjdG9yKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ2LkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0Ni5DbGlja0RldGVjdG9yKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ2LkNsaWNrRGV0ZWN0b3IpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDguQ0ZyYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ4LkNsaWNrRGV0ZWN0b3IpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDEwLkNGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ2xpY2tEZXRlY3RvcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ2xpY2tEZXRlY3RvcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ2xpY2tEZXRlY3RvcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3QzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1Ob3QgV29yayBZZXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6RmluZEZpcnN0Q2hpbGQoIkdob3N0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYXJncyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiR3VpdGFyUHV6emxlUHJvZ3Jlc3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9ICJHaG9zdCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJMaXZpbmcgWm9tYmllIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLDYwLDYwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNvdWxHdWl0YXJfRmFybV9OYW1lID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU291bEd1aXRhcl9GYXJtX0NGcmFtZSA9IHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3Qgdi5QYXJlbnQgb3Igbm90IEF1dG9Tb3VsR3VpdGFyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTEwMTYwLjc4NzEwOTM3NSwgMTM4LjY2MTY5NzM4NzY5NTMsIDU5NTUuMDMwNzYxNzE4NzUpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ3JhdmVzdG9uZUV2ZW50IiwyKSwgIkVycm9yIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiR28gdG8gR3JhdmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC04NjUzLjIwNjA1NDY4NzUsIDE0MC45ODQ4Nzg1NDAwMzkwNiwgNjE2MC4wMzMyMDMxMjUpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJncmF2ZXN0b25lRXZlbnQiLDIpLCAiTm90aGluZyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIldhaXQgTmV4dCBOaWdodCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJncmF2ZXN0b25lRXZlbnQiLDIsdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTk2ODEuNDU4OTg0Mzc1LCA2LjEzOTg4MDY1NzE5NjA0NSwgNjM0MS4zNzIwNzAzMTI1KSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KT3RoZXJfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIFRyeWx1Y2sgR3JhdmVzdG9uZScsIEF1dG9UcnlMdWNrLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9UcnlMdWNrID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9UcnlMdWNrKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCguMSkgZG8NCiAgICBpZiBBdXRvVHJ5THVjayB0aGVuDQogICAgICAgIGlmIEJ5UGFzc1RQIHRoZW4NCiAgICAgICAgICAgIEJUUChDRnJhbWUubmV3KC04NjUyLjk5NzA3LCAxNDMuNDUwMTE5LCA2MTcwLjUwODc5LCAtMC45ODMwNjQxMTUsIC0yLjQ4MDA1NTMzZS0xMCwgMC4xODMyNjIwNSwgLTEuNzg5MTAzODdlLTA5LCAxLCAtOC4yNDM5MjI4OGUtMDksIC0wLjE4MzI2MjA1LCAtOC40MzIxODAyOWUtMDksIC0wLjk4MzA2NDExNSkpDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTg2NTIuOTk3MDcsIDE0My40NTAxMTksIDYxNzAuNTA4NzksIC0wLjk4MzA2NDExNSwgLTIuNDgwMDU1MzNlLTEwLCAwLjE4MzI2MjA1LCAtMS43ODkxMDM4N2UtMDksIDEsIC04LjI0MzkyMjg4ZS0wOSwgLTAuMTgzMjYyMDUsIC04LjQzMjE4MDI5ZS0wOSwgLTAuOTgzMDY0MTE1KSkNCiAgICAgICAgZW5kDQogICAgICAgIHdhaXQoMikNCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ3JhdmVzdG9uZUV2ZW50IiwxKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk90aGVyX1F1ZXN0OmFkZFRvZ2dsZSgnQXV0byBQcmF5IEdyYXZlc3RvbmUnLCBBdXRvUHJheSwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvUHJheSA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvUHJheSkNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoLjEpIGRvDQogICAgaWYgQXV0b1ByYXkgdGhlbg0KICAgICAgICBpZiBCeVBhc3NUUCB0aGVuDQogICAgICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtODY1Mi45OTcwNywgMTQzLjQ1MDExOSwgNjE3MC41MDg3OSwgLTAuOTgzMDY0MTE1LCAtMi40ODAwNTUzM2UtMTAsIDAuMTgzMjYyMDUsIC0xLjc4OTEwMzg3ZS0wOSwgMSwgLTguMjQzOTIyODhlLTA5LCAtMC4xODMyNjIwNSwgLTguNDMyMTgwMjllLTA5LCAtMC45ODMwNjQxMTUpKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC04NjUyLjk5NzA3LCAxNDMuNDUwMTE5LCA2MTcwLjUwODc5LCAtMC45ODMwNjQxMTUsIC0yLjQ4MDA1NTMzZS0xMCwgMC4xODMyNjIwNSwgLTEuNzg5MTAzODdlLTA5LCAxLCAtOC4yNDM5MjI4OGUtMDksIC0wLjE4MzI2MjA1LCAtOC40MzIxODAyOWUtMDksIC0wLjk4MzA2NDExNSkpDQogICAgICAgIGVuZA0KICAgICAgICB3YWl0KDIpDQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdyYXZlc3RvbmVFdmVudCIsMikNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpPdGhlcl9RdWVzdDphZGRUb2dnbGUoJ0F1dG8gQWR2YW5jZWQgRHVuZ2VvbicsIEF1dG9BZHZhbmNlRHVuZ2VvbiwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvQWR2YW5jZUR1bmdlb24gPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b0FkdmFuY2VEdW5nZW9uKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgQXV0b0FkdmFuY2VEdW5nZW9uIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCaXJkLUJpcmQ6IFBob2VuaXgiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmlyZC1CaXJkOiBQaG9lbml4IikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKS5MZXZlbC5WYWx1ZSA+PSA0MDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMjgxMi43NjcwODk4NDM3NSwgMjU0LjgwMzQ2Njc5Njg3NSwgLTEyNTk1LjU2MDU0Njg3NSkpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lLm5ldygtMjgxMi43NjcwODk4NDM3NSwgMjU0LjgwMzQ2Njc5Njg3NSwgLTEyNTk1LjU2MDU0Njg3NSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2lja1NjaWVudGlzdCIsIkNoZWNrIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTaWNrU2NpZW50aXN0IiwiSGVhbCIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUpLkxldmVsLlZhbHVlID49IDQwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0yODEyLjc2NzA4OTg0Mzc1LCAyNTQuODAzNDY2Nzk2ODc1LCAtMTI1OTUuNTYwNTQ2ODc1KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDRnJhbWUubmV3KC0yODEyLjc2NzA4OTg0Mzc1LCAyNTQuODAzNDY2Nzk2ODc1LCAtMTI1OTUuNTYwNTQ2ODc1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTaWNrU2NpZW50aXN0IiwiQ2hlY2siKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlNpY2tTY2llbnRpc3QiLCJIZWFsIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KT3RoZXJfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIEVuY2hhbmNlbWVudCBIYWtpJywgQXV0b0NvbG9ySGFraSwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvQ29sb3JIYWtpID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b0NvbG9ySGFraSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNvbG9yc0RlYWxlciIsIjIiKQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KT3RoZXJfUXVlc3Q6YWRkVG9nZ2xlKCdBdXRvIE11c2tldGVyJywgQXV0b011c2tldGVlciwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvTXVza2V0ZWVyID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEF1dG9NdXNrZXRlZXIpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgQXV0b011c2tldGVlciB0aGVuDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICByZXBlYXQgDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTEyNDQ0Ljc4NTE1NjI1LCAzMzIuNDAzOTYxMTgxNjQsIC03NjczLjE4MDY2NDA2MjUpKSANCiAgICAgICAgICAgICAgICAgICAgd2FpdCgyKSANCiAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b011c2tldGVlciBvciAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLVZlY3RvcjMubmV3KC0xMjQ0NC43ODUxNTYyNSwgMzMyLjQwMzk2MTE4MTY0LCAtNzY3My4xODA2NjQwNjI1KSkuTWFnbml0dWRlIDw9IDEwDQogICAgICAgICAgICAgICAgd2FpdCguNSkNCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsIkNpdGl6ZW4iKQ0KICAgICAgICAgICAgICAgIHdhaXQoMSkNCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IiwiQ2l0aXplblF1ZXN0IiwxKQ0KICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIkRlZmVhdCA1MCBGb3Jlc3QgUGlyYXRlcyIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkZvcmVzdCBQaXJhdGUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkZvcmVzdCBQaXJhdGUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE11c2tldGVyZV9GYXJtX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTXVza2V0ZXJlX0Zhcm1fQ0ZyYW1lID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ2xpY2soKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvTXVza2V0ZWVyIG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IHYuUGFyZW50DQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCdGb3Jlc3QgUGlyYXRlJykuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQplbmQpDQoNCk90aGVyX1F1ZXN0OmFkZFRvZ2dsZSgnQXV0byBTZXJwZW50IEJvdycsIEF1dG9fU2VycGVudF9Cb3csIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b19TZXJwZW50X0JvdyA9IFZhbHVlDQpDYW5jZWxUd2VlbihBdXRvX1NlcnBlbnRfQm93KQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgIGlmIEF1dG9fU2VycGVudF9Cb3cgdGhlbg0KICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIEVtcHJlc3MiKSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiSXNsYW5kIEVtcHJlc3MiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9DbGljaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3Qgdi5QYXJlbnQgb3Igbm90IEF1dG9fU2VycGVudF9Cb3cNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgRW1wcmVzcyIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KICAgICAgICAgICAgZW5kICAgICAgIA0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBSQUlEQk9VTlRZIExlZnQNCmxvY2FsIFJhaWRfTGVmdCA9IFRhYi5UYWJfNDphZGRTZWN0aW9uKCkNCg0KLS0vLyBMYXcgUmFpZA0KbG9jYWwgTGF3X1JhaWRzID0gUmFpZF9MZWZ0OmFkZE1lbnUoJyNMYXcgUmFpZHMnKQ0KDQpsb2NhbCBSYWlkV2VhcG9uTGlzdCA9IHsiTWVsZWUiLCAiU3dvcmQiLCAiQmxveCBGcnVpdCIsICJHdW4ifQ0KUmFpZFNlbGVjdGVkV2VhcG9uID0gIk1lbGVlIg0KTGF3X1JhaWRzOmFkZERyb3Bkb3duKCJTZWxlY3QgV2VhcG9uIiwgUmFpZFNlbGVjdGVkV2VhcG9uLCBSYWlkV2VhcG9uTGlzdCwgZnVuY3Rpb24oVmFsdWUpDQpSYWlkU2VsZWN0ZWRXZWFwb24gPSBWYWx1ZQ0KZW5kKQ0KdGFzay5zcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgIGlmIFJhaWRTZWxlY3RlZFdlYXBvbiA9PSAiTWVsZWUiIHRoZW4NCiAgICAgICAgICAgIGZvciBpICx2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuVG9vbFRpcCA9PSAiTWVsZWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvblJhaWQgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIFJhaWRTZWxlY3RlZFdlYXBvbiA9PSAiU3dvcmQiIHRoZW4NCiAgICAgICAgICAgIGZvciBpICx2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuVG9vbFRpcCA9PSAiU3dvcmQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvblJhaWQgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIFJhaWRTZWxlY3RlZFdlYXBvbiA9PSAiQmxveCBGcnVpdCIgdGhlbg0KICAgICAgICAgICAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5Ub29sVGlwID09ICJCbG94IEZydWl0IiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2Lk5hbWUpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb25SYWlkID0gdi5OYW1lDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBSYWlkU2VsZWN0ZWRXZWFwb24gPT0gIkd1biIgdGhlbg0KICAgICAgICAgICAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5Ub29sVGlwID09ICJHdW4iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvblJhaWQgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQplbmQpDQoNCkRpc1JhaWQgPSA3MA0KTGF3X1JhaWRzOmFkZFRleHRib3goIkRpc3RhbmNlIEZhcm0iLCBEaXNSYWlkLCBmdW5jdGlvbihWYWx1ZSkNCkRpc1JhaWQgPSBWYWx1ZQ0KZW5kKQ0KDQpMYXdfUmFpZHM6YWRkVG9nZ2xlKCJCdXkgTGF3IENoaXBzIiwgQXV0b19CdXlfTGF3X0NoaXAsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b19CdXlfTGF3X0NoaXAgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgQXV0b19CdXlfTGF3X0NoaXAgdGhlbg0KICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIHRoZW4NCiAgICAgICAgICAgIA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsb2NhbCBhcmdzID0gew0KICAgICAgICAgICAgICAgIFsxXSA9ICJCbGFja2JlYXJkUmV3YXJkIiwNCiAgICAgICAgICAgICAgICBbMl0gPSAiTWljcm9jaGlwIiwNCiAgICAgICAgICAgICAgICBbM10gPSAiMiINCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpMYXdfUmFpZHM6YWRkVG9nZ2xlKCJTdGFydCBMYXcgUmFpZCIsIEF1dG9fU3RhcnRfTGF3X0R1bmdlb24sIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b19TdGFydF9MYXdfRHVuZ2VvbiA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBBdXRvX1N0YXJ0X0xhd19EdW5nZW9uIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgdGhlbg0KICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNpcmNsZUlzbGFuZC5SYWlkU3VtbW9uLkJ1dHRvbi5NYWluLkNsaWNrRGV0ZWN0b3IpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCkxhd19SYWlkczphZGRUb2dnbGUoJ0F1dG8gS2lsbCBMYXcgUmFpZCcsIEJvc3NSYWlkLCBmdW5jdGlvbihWYWx1ZSkNCkJvc3NSYWlkID0gVmFsdWUNCkNhbmNlbFR3ZWVuKEJvc3NSYWlkKQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgdGFzay53YWl0KCkgZG8NCiAgICBpZiBCb3NzUmFpZCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiT3JkZXIiIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uUmFpZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsMzAsMCkpDQogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBCb3NzUmFpZCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCB2LlBhcmVudA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIk9yZGVyIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsMzAsMCkpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gUkFJREJPVU5UWSBSSUdIVA0KbG9jYWwgUmFpZF9SaWdodCA9IFRhYi5UYWJfNDphZGRTZWN0aW9uKCkNCg0KbG9jYWwgUmFpZHMgPSBSYWlkX1JpZ2h0OmFkZE1lbnUoJyNSYWlkcycpDQoNCmxvY2FsIENoaXBzID0geyJGbGFtZSIsIkljZSIsIlF1YWtlIiwiTGlnaHQiLCJEYXJrIiwiU3BpZGVyIiwiUnVtYmxlIiwiTWFnbWEiLCJCdWRkaGEiLCJTYW5kIiwiUGhvZW5peCIsIkRvdWdoIn0NCg0KUmFpZHM6YWRkRHJvcGRvd24oIlNlbGVjdCBDaGlwcyIsIFNlbGVjdENoaXAsIENoaXBzLCBmdW5jdGlvbihWYWx1ZSkNClNlbGVjdENoaXAgPSBWYWx1ZQ0KZW5kKQ0KDQpSYWlkczphZGRUb2dnbGUoIkF1dG8gQnV5IE1pY3JvY2hpcHMiLCBBdXRvQnV5U3BlY2lhbENoaXAsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0J1eVNwZWNpYWxDaGlwID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b0J1eVNwZWNpYWxDaGlwIHRoZW4NCiAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsIE1pY3JvY2hpcCIpIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BlY2lhbCBNaWNyb2NoaXAiKSB0aGVuDQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJSYWlkc05wYyIsIlNlbGVjdCIsU2VsZWN0Q2hpcCkNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZCkNCg0KDQoNClJhaWRzOmFkZFRvZ2dsZSgiQXV0byBTdGFydCBSYWlkcyIsIEF1dG9TVGFydFJhaWRzLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9TVGFydFJhaWRzID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgQXV0b1NUYXJ0UmFpZHMgdGhlbg0KICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWwgTWljcm9jaGlwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWwgTWljcm9jaGlwIikgdGhlbg0KICAgICAgICAgICAgaWYgU2Vjb25kX1NlYSB0aGVuDQogICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZS5Xb3Jrc3BhY2UuTWFwLkNpcmNsZUlzbGFuZC5SYWlkU3VtbW9uMi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKQ0KICAgICAgICAgICAgZWxzZWlmIFRoaXJkX1NlYSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgcGxyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCiAgICAgICAgICAgICAgICBsb2NhbCBSYWlkTGFiID0gQ0ZyYW1lLm5ldygtNTA1Ny4xNDY0ODQzNzUsIDMxNC41NDEzMjA4MDA3OCwgLTI5MzQuNzk5NTYwNTQ2OSkNCiAgICAgICAgICAgICAgICBpZiAoUmFpZExhYi5Qb3NpdGlvbiAtIHBsci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMTAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2VlbihSYWlkTGFiKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiAoUmFpZExhYi5Qb3NpdGlvbiAtIHBsci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTAgdGhlbg0KICAgICAgICAgICAgICAgICAgICB3YWl0KDEpDQogICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWUuV29ya3NwYWNlLk1hcFsiQm9hdCBDYXN0bGUiXS5SYWlkU3VtbW9uMi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNClJhaWRzOmFkZFRvZ2dsZSgnS2lsbCBSYWlkIEF1cmEnLCBSYWlkQXVyYSwgZnVuY3Rpb24oVmFsdWUpDQpSYWlkQXVyYSA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpDQogICAgaWYgUmFpZEF1cmEgdGhlbg0KICAgICAgICBsb2NhbCBSZWdpc3RlckF0dGFjayA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldFsiUkUvUmVnaXN0ZXJBdHRhY2siXQ0KICAgICAgICBsb2NhbCBSZWdpc3RlckhpdCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldFsiUkUvUmVnaXN0ZXJIaXQiXQ0KICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5Ub3BIVURMaXN0LlJhaWRUaW1lci5WaXNpYmxlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb25SYWlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkhlYWx0aCA9IDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllciwiU2ltdWxhdGlvblJhZGl1cyIsbWF0aC5odWdlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBSYWlkQXVyYSBvciBub3Qgdi5QYXJlbnQgb3Igbm90IGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZCkNCmVuZCkNCg0KUmFpZHM6YWRkVG9nZ2xlKCdBdXRvIE5leHQgSXNsYW5kJywgQXV0b05leHRJc2xhbmQsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b05leHRJc2xhbmQgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oQXV0b05leHRJc2xhbmQpDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBBdXRvTmV4dElzbGFuZCB0aGVuDQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlRvcEhVRExpc3QuUmFpZFRpbWVyLlZpc2libGUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikuQ0ZyYW1lLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDIwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikuQ0ZyYW1lKkNGcmFtZS5uZXcoMCxEaXNSYWlkLDApKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDQiKSB0aGVuDQogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDQiKS5DRnJhbWUuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDQiKS5DRnJhbWUqQ0ZyYW1lLm5ldygwLERpc1JhaWQsMCkpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMyIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMyIpLkNGcmFtZS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMyIpLkNGcmFtZSpDRnJhbWUubmV3KDAsRGlzUmFpZCwwKSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikuQ0ZyYW1lLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDIwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikuQ0ZyYW1lKkNGcmFtZS5uZXcoMCxEaXNSYWlkLDApKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDEiKSB0aGVuDQogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDEiKS5DRnJhbWUuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDEiKS5DRnJhbWUqQ0ZyYW1lLm5ldygwLERpc1JhaWQsMCkpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZCkNCg0KUmFpZHM6YWRkVG9nZ2xlKCdBdXRvIEF3YWtlbicsIEF1dG9Bd2FrZW5BYmlsaXRpZXMsIGZ1bmN0aW9uKFZhbHVlKQ0KQXV0b0F3YWtlbkFiaWxpdGllcyA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBBdXRvQXdha2VuQWJpbGl0aWVzIHRoZW4NCiAgICAgICAgbG9jYWwgYXJnczEgPSB7DQogICAgICAgICAgICBbMV0gPSAiQXdha2VuZXIiLA0KICAgICAgICAgICAgWzJdID0gIkNoZWNrIg0KICAgICAgICB9DQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MxKSkNCiAgICAgICAgbG9jYWwgYXJnczIgPSB7DQogICAgICAgICAgICBbMV0gPSAiQXdha2VuZXIiLA0KICAgICAgICAgICAgWzJdID0gIkF3YWtlbiINCiAgICAgICAgfQ0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzMikpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KUmFpZHM6YWRkQnV0dG9uKCJUZWxlcG9ydCB0byBSYWlkIExhYiIsIGZ1bmN0aW9uKCkNCmlmIFNlY29uZF9TZWEgdGhlbg0KICAgIFR3ZWVuKENGcmFtZS5uZXcoLTY0NDkuNjg4OTYsIDI0OS41Njk1OCwgLTQ0OTcuNTkzMjYsIDAuNjk3ODU0MjgsIDUuNjA0NDQ0NDZlLTA5LCAtMC43MTYyMzk3NSwgLTIuMTg2NjIzMzNlLTA5LCAxLCA1LjY5NDMyMjM1ZS0wOSwgMC43MTYyMzk3NSwgLTIuNDA3NjYwNzRlLTA5LCAwLjY5Nzg1NDI4KSkNCmVsc2VpZiBUaGlyZF9TZWEgdGhlbg0KICAgIFR3ZWVuKENGcmFtZS5uZXcoLTUwNTcuMTQ2NDg0Mzc1LCAzMTQuNTQxMzIwODAwNzgsIC0yOTM0Ljc5OTU2MDU0NjkpKQ0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gUFZQIExFRlQNCmxvY2FsIFB2cF9MZWZ0ID0gVGFiLlRhYl9Db21iYXQ6YWRkU2VjdGlvbigpDQoNCmxvY2FsIFNldHRpbmdfUHZwID0gUHZwX0xlZnQ6YWRkTWVudSgnI1NldHRpbmcgUHZwJykNCg0KbG9jYWwgQ3VycmVudCA9IFNldHRpbmdfUHZwOmFkZExhYmVsKCJDdXJyZW50IEJvdW50aWVzIDogIikNCmxvY2FsIEVhcm4gPSBTZXR0aW5nX1B2cDphZGRMYWJlbCgiRWFybmVkIDogIikNCg0KbG9jYWwgT2xkQm91bnR5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIubGVhZGVyc3RhdHNbIkJvdW50eS9Ib25vciJdLlZhbHVlDQpsb2NhbCBCb3VudHkgPSB0b3N0cmluZyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5sZWFkZXJzdGF0c1siQm91bnR5L0hvbm9yIl0uVmFsdWUpDQpsb2NhbCBFYXJuZWQgPSB0b3N0cmluZyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5sZWFkZXJzdGF0c1siQm91bnR5L0hvbm9yIl0uVmFsdWUgLSBPbGRCb3VudHkpDQpsb2NhbCBzdWIgPSBzdHJpbmcuc3ViIA0KbG9jYWwgbGVuID0gc3RyaW5nLmxlbg0KDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgIGlmIGxlbihCb3VudHkpID09IDQgdGhlbg0KICAgICAgICAgICAgQm91bnR5MSA9IHN1YihCb3VudHksMSwxKS4uIi4iLi5zdWIoQm91bnR5LDIsMykuLiJLIg0KICAgICAgICBlbHNlaWYgbGVuKEJvdW50eSkgPT0gNSB0aGVuDQogICAgICAgICAgICBCb3VudHkxID0gc3ViKEJvdW50eSwxLDIpLi4iLiIuLnN1YihCb3VudHksMyw0KS4uIksiDQogICAgICAgIGVsc2VpZiBsZW4oQm91bnR5KSA9PSA2IHRoZW4NCiAgICAgICAgICAgIEJvdW50eTEgPSBzdWIoQm91bnR5LDEsMykuLiIuIi4uc3ViKEJvdW50eSw0LDUpLi4iSyINCiAgICAgICAgZWxzZWlmIGxlbihCb3VudHkpID09IDcgdGhlbg0KICAgICAgICAgICAgQm91bnR5MSA9IHN1YihCb3VudHksMSwxKS4uIi4iLi5zdWIoQm91bnR5LDIsMykuLiJNIg0KICAgICAgICBlbHNlaWYgbGVuKEJvdW50eSkgPT0gOCB0aGVuDQogICAgICAgICAgICBCb3VudHkxID0gc3ViKEJvdW50eSwxLDIpLi4iLiIuLnN1YihCb3VudHksMyw0KS4uIk0iDQogICAgICAgIGVsc2VpZiBsZW4oQm91bnR5KSA8PSAzIHRoZW4NCiAgICAgICAgICAgIEJvdW50eTEgPSBCb3VudHkNCiAgICAgICAgZW5kDQoNCiAgICAgICAgaWYgbGVuKEVhcm5lZCkgPT0gNCB0aGVuDQogICAgICAgICAgICBFYXJuZWQxID0gc3ViKEVhcm5lZCwxLDEpLi4iLiIuLnN1YihFYXJuZWQsMiwzKS4uIksiDQogICAgICAgIGVsc2VpZiBsZW4oRWFybmVkKSA9PSA1IHRoZW4NCiAgICAgICAgICAgIEVhcm5lZDEgPSBzdWIoRWFybmVkLDEsMikuLiIuIi4uc3ViKEVhcm5lZCwzLDQpLi4iSyINCiAgICAgICAgZWxzZWlmIGxlbihFYXJuZWQpID09IDYgdGhlbg0KICAgICAgICAgICAgRWFybmVkMSA9IHN1YihFYXJuZWQsMSwzKS4uIi4iLi5zdWIoRWFybmVkLDQsNSkuLiJLIg0KICAgICAgICBlbHNlaWYgbGVuKEVhcm5lZCkgPT0gNyB0aGVuDQogICAgICAgICAgICBFYXJuZWQxID0gc3ViKEVhcm5lZCwxLDEpLi4iLiIuLnN1YihFYXJuZWQsMiwzKS4uIk0iDQogICAgICAgIGVsc2VpZiBsZW4oRWFybmVkKSA9PSA4IHRoZW4NCiAgICAgICAgICAgIEVhcm5lZDEgPSBzdWIoRWFybmVkLDEsMikuLiIuIi4uc3ViKEVhcm5lZCwzLDQpLi4iTSINCiAgICAgICAgZWxzZWlmIGxlbihFYXJuZWQpIDw9IDMgdGhlbg0KICAgICAgICAgICAgRWFybmVkMSA9IEVhcm5lZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgdG9udW1iZXIoQm91bnR5KSA9PSAyNTAwMDAwMCB0aGVuDQogICAgICAgICAgICBDdXJyZW50OlJlZnJlc2goIkN1cnJlbnQgQm91bnRpZXMgOiAiLi5Cb3VudHkxLi4iIFsgTWF4IF0iKQ0KICAgICAgICBlbHNlaWYgdG9udW1iZXIoQm91bnR5KSA8IDI1MDAwMDAwIHRoZW4NCiAgICAgICAgICAgIEN1cnJlbnQ6UmVmcmVzaCgiQ3VycmVudCBCb3VudGllcyA6ICIuLkJvdW50eTEpDQogICAgICAgIGVuZA0KICAgICAgICBFYXJuOlJlZnJlc2goIkVhcm5lZCA6ICIuLnRvbnVtYmVyKEVhcm5lZDEpKQ0KICAgIGVuZCkNCmVuZA0KZW5kKQ0KDQpsb2NhbCBQdnBXZWFwb25MaXN0ID0geyJNZWxlZSIsICJTd29yZCIsICJCbG94IEZydWl0IiwgIkd1biJ9DQpTZXR0aW5nX1B2cDphZGREcm9wZG93bigiU2VsZWN0IFdlYXBvbiIsIFB2cFNlbGVjdGVkV2VhcG9uLCBQdnBXZWFwb25MaXN0LCBmdW5jdGlvbihWYWx1ZSkNClB2cFNlbGVjdGVkV2VhcG9uID0gVmFsdWUNCmVuZCkNCnRhc2suc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICBpZiBQdnBTZWxlY3RlZFdlYXBvbiA9PSAiTWVsZWUiIHRoZW4NCiAgICAgICAgICAgIGZvciBpICx2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYuVG9vbFRpcCA9PSAiTWVsZWUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvblB2cCA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgUHZwU2VsZWN0ZWRXZWFwb24gPT0gIlN3b3JkIiB0aGVuDQogICAgICAgICAgICBmb3IgaSAsdiBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2LlRvb2xUaXAgPT0gIlN3b3JkIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2Lk5hbWUpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb25QdnAgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIFB2cFNlbGVjdGVkV2VhcG9uID09ICJCbG94IEZydWl0IiB0aGVuDQogICAgICAgICAgICBmb3IgaSAsdiBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2LlRvb2xUaXAgPT0gIkJsb3ggRnJ1aXQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvblB2cCA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgUHZwU2VsZWN0ZWRXZWFwb24gPT0gIkd1biIgdGhlbg0KICAgICAgICAgICAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5Ub29sVGlwID09ICJHdW4iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvblB2cCA9IHYuTmFtZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCmVuZCkNCg0KbG9jYWwgUHZwVGFibGUgPSB7DQoiQWJvdmUiLA0KIkJlbGxvdyIsDQoiQmVoaW5kIg0KfQ0KQXV0b1B2cFR5cGUgPSAiQmVoaW5kIg0KU2V0dGluZ19QdnA6YWRkRHJvcGRvd24oIlNlbGVjdCBQdnAgVHlwZSIsIEF1dG9QdnBUeXBlLCBQdnBUYWJsZSwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvUHZwVHlwZSA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBBdXRvUHZwVHlwZSA9PSAiQWJvdmUiIHRoZW4NCiAgICAgICAgUHZwX01vZGUgPSBDRnJhbWUubmV3KDAsRGlzUHZwLDApICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgtOTApLDAsMCkNCiAgICBlbHNlaWYgQXV0b1B2cFR5cGUgPT0gIkJlbGxvdyIgdGhlbg0KICAgICAgICBQdnBfTW9kZSA9IENGcmFtZS5uZXcoMCxEaXNQdnAsMCkgKiBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKDkwKSwwLDApDQogICAgZWxzZWlmIEF1dG9QdnBUeXBlID09ICJCZWhpbmQiIHRoZW4NCiAgICAgICAgUHZwX01vZGUgPSBDRnJhbWUubmV3KDAsMCxEaXNQdnApICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgwKSwwLDApDQogICAgZW5kDQplbmQNCmVuZCkNCg0KRGlzUHZwID0gMTANClNldHRpbmdfUHZwOmFkZFRleHRib3goIkRpc3RhbmNlIFB2cCIsIERpc1B2cCwgZnVuY3Rpb24oVmFsdWUpDQpEaXNQdnAgPSBWYWx1ZQ0KZW5kKQ0KDQpTZXR0aW5nX1B2cDphZGRUb2dnbGUoIlBsYXllciBFU1AiLCBfRy5FU1BQbGF5ZXIsIGZ1bmN0aW9uKFZhbHVlKQ0KX0cuRVNQUGxheWVyID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgX0cuRVNQUGxheWVyIHRoZW4NCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5OYW1lIH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIlBsYXllckVTUCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIEJpbGxib2FyZEd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIFRleHRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlBhcmVudCA9IHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkFjdGl2ZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5OYW1lID0gIlBsYXllckVTUCINCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5BbHdheXNPblRvcCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5MaWdodEluZmx1ZW5jZSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuUGFyZW50ID0gQmlsbGJvYXJkR3VpDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZA0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnRTaXplID0gIlNpemUxNCINCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0LlNpemUgPSAzNQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIERpcyA9IG1hdGguZmxvb3IoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSkNCiAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiUGxheWVyRVNQIikuVGV4dExhYmVsLlRleHQgPSB2LkRpc3BsYXlOYW1lLi4iXG5cbiIuLkRpcy4uIiBNLiINCiAgICAgICAgICAgICAgICAgICAgaWYgdi5UZWFtID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5UZWFtIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIlBsYXllckVTUCIpLlRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygyNTUsMCwwKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJQbGF5ZXJFU1AiKS5UZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMCwyNTUsMCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJQbGF5ZXJFU1AiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBsYXllckVTUDpEZXN0cm95KCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQplbmQpDQoNClNldHRpbmdfUHZwOmFkZFRvZ2dsZSgiRW5hYmxlIFB2cCIsIEVuYWJsZVBWUCwgZnVuY3Rpb24oVmFsdWUpDQpFbmFibGVQVlAgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0KcGNhbGwoZnVuY3Rpb24oKQ0KICAgIHdoaWxlIHdhaXQoLjEpIGRvDQogICAgICAgIGlmIEVuYWJsZVBWUCB0aGVuDQogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5QdnBEaXNhYmxlZC5WaXNpYmxlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVuYWJsZVB2cCIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQpDQplbmQpDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIFBWUCBSSUdIVA0KbG9jYWwgUHZwX1JpZ2h0ID0gVGFiLlRhYl9Db21iYXQ6YWRkU2VjdGlvbigpDQoNCmxvY2FsIE1haW5fUHZwID0gUHZwX1JpZ2h0OmFkZE1lbnUoIiNDb21iYXQgUGxheWVyIikNCg0KbG9jYWwgUGxheWVyTGlzdCA9IHt9DQpmb3IgaSx2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRDaGlsZHJlbigpKSBkbyAgDQppZiB2Lk5hbWUgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgdGhlbg0KICAgIHRhYmxlLmluc2VydChQbGF5ZXJMaXN0LCB2LkRpc3BsYXlOYW1lKQ0KZW5kDQplbmQNCmxvY2FsIERyb3Bkb3duUGxheWVyID0gTWFpbl9QdnA6YWRkRHJvcGRvd24oIlNlbGVjdCBQbGF5ZXIiLCBTZWxlY3RlZFBsYXllciwgUGxheWVyTGlzdCwgZnVuY3Rpb24oVmFsdWUpDQpTZWxlY3RlZFBsYXllciA9IFZhbHVlDQplbmQpDQpNYWluX1B2cDphZGRCdXR0b24oIlJlZnJlc2ggUGxheWVyIixmdW5jdGlvbigpDQpOZXdQbGF5ZXJMaXN0ID0ge30NCmZvciBpLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldENoaWxkcmVuKCkpIGRvICANCiAgICBpZiB2Lk5hbWUgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgdGhlbg0KICAgICAgICB0YWJsZS5pbnNlcnQoTmV3UGxheWVyTGlzdCwgdi5EaXNwbGF5TmFtZSkNCiAgICBlbmQNCmVuZA0KRHJvcGRvd25QbGF5ZXI6Q2xlYXIoKQ0KRHJvcGRvd25QbGF5ZXI6UmVmcmVzaChOZXdQbGF5ZXJMaXN0KQ0KZW5kKQ0KdGFzay5zcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldENoaWxkcmVuKCkpIGRvICANCiAgICAgICAgICAgIGlmIHYuRGlzcGxheU5hbWUgPT0gU2VsZWN0ZWRQbGF5ZXIgdGhlbg0KICAgICAgICAgICAgICAgIFNlbGVjdGVkUGxheWVyID0gdi5OYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQplbmQpDQoNCk1haW5fUHZwOmFkZFRvZ2dsZSgiU3BlY3RhdGUgUGxheWVyIiwgU3BlY3RhdGUsIGZ1bmN0aW9uKHZhbHVlKQ0KU3BlY3RhdGUgPSB2YWx1ZQ0KbG9jYWwgcGxyMSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQNCmxvY2FsIHBscjIgPSBnYW1lLlBsYXllcnM6RmluZEZpcnN0Q2hpbGQoU2VsZWN0ZWRQbGF5ZXIpDQpyZXBlYXQgdGFzay53YWl0KCkNCiAgICBnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHBscjIuQ2hhcmFjdGVyLkh1bWFub2lkDQp1bnRpbCBTcGVjdGF0ZSA9PSBmYWxzZSANCmdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gcGxyMQ0KZW5kKQ0KDQpNYWluX1B2cDphZGRUb2dnbGUoIkNvbWJhdCBQbGF5ZXIiLCBUd2VlblRvUGxheWVyLCBmdW5jdGlvbihWYWx1ZSkNClR3ZWVuVG9QbGF5ZXIgPSBWYWx1ZQ0KQ2FuY2VsVHdlZW4oVHdlZW5Ub1BsYXllcikNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgVHdlZW5Ub1BsYXllciB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gU2VsZWN0ZWRQbGF5ZXIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uUHZwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUHZwX01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGxheWVyX05hbWUgPSB2Lk5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGF5ZXJfUG9zaXRpb24gPSB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NsaWNrKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBUd2VlblRvUGxheWVyIG9yIHYuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA9PSAwIG9yIG5vdCBnYW1lLlBsYXllcnM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KTWFpbl9QdnA6YWRkVG9nZ2xlKCJBaW1ib3QgU2tpbGwiLCBBaW1ib3RTa2lsbFBsYXllciwgZnVuY3Rpb24oVmFsdWUpDQpBaW1ib3RTa2lsbFBsYXllciA9IFZhbHVlDQplbmQpDQoNCnNwYXduKGZ1bmN0aW9uKCkNCmxvY2FsIGdnID0gZ2V0cmF3bWV0YXRhYmxlKGdhbWUpDQpsb2NhbCBvbGQgPSBnZy5fX25hbWVjYWxsDQpzZXRyZWFkb25seShnZyxmYWxzZSkNCmdnLl9fbmFtZWNhbGwgPSBuZXdjY2xvc3VyZShmdW5jdGlvbiguLi4pDQogICAgbG9jYWwgbWV0aG9kID0gZ2V0bmFtZWNhbGxtZXRob2QoKQ0KICAgIGxvY2FsIGFyZ3MgPSB7Li4ufQ0KICAgIGlmIHRvc3RyaW5nKG1ldGhvZCkgPT0gIkZpcmVTZXJ2ZXIiIHRoZW4NCiAgICAgICAgaWYgdG9zdHJpbmcoYXJnc1sxXSkgPT0gIlJlbW90ZUV2ZW50IiB0aGVuDQogICAgICAgICAgICBpZiB0b3N0cmluZyhhcmdzWzJdKSB+PSAidHJ1ZSIgYW5kIHRvc3RyaW5nKGFyZ3NbMl0pIH49ICJmYWxzZSIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIEFpbWJvdFNraWxsUGxheWVyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdHlwZShhcmdzWzJdKSA9PSAidmVjdG9yIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzJdID0gUGxheWVyX1Bvc2l0aW9uDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbMl0gPSBDRnJhbWUubmV3KFBsYXllcl9Qb3NpdGlvbikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGQodW5wYWNrKGFyZ3MpKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiBvbGQoLi4uKQ0KZW5kKQ0KZW5kKQ0KDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEFpbWJvdFNraWxsUGxheWVyIHRoZW4gDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5OYW1lID09IFBsYXllcl9OYW1lIGFuZCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdi5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIFBsYXllcl9Qb3NpdGlvbiA9IHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24NCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChTZWxlY3RXZWFwb25QdnApIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoU2VsZWN0V2VhcG9uUHZwKS5Nb3VzZVBvcy5WYWx1ZSA9IFBsYXllcl9Qb3NpdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIFB2cFNraWxsWiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudCh0cnVlLCAiWiIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJaIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgUHZwU2tpbGxYIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KHRydWUsICJYIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudChmYWxzZSwgIlgiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBQdnBTa2lsbEMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkMiLCBmYWxzZSwgZ2FtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCdWaXJ0dWFsSW5wdXRNYW5hZ2VyJyk6U2VuZEtleUV2ZW50KGZhbHNlLCAiQyIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIFB2cFNraWxsViB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgnVmlydHVhbElucHV0TWFuYWdlcicpOlNlbmRLZXlFdmVudCh0cnVlLCAiViIsIGZhbHNlLCBnYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJWIiwgZmFsc2UsIGdhbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEFpbWJvdFNraWxsUGxheWVyIG9yIHYuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA9PSAwIG9yIG5vdCBnYW1lLlBsYXllcnM6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIFBWUCBSSUdIVA0KDQpsb2NhbCBTa2lsbF9QdnAgPSBQdnBfUmlnaHQ6YWRkTWVudSgiI1NraWxsIFNldHRpbmciKQ0KDQpTa2lsbF9QdnA6YWRkVG9nZ2xlKCdTa2lsbCBaJywgUHZwU2tpbGxaLCBmdW5jdGlvbihWYWx1ZSkNClB2cFNraWxsWiA9IFZhbHVlDQplbmQpDQoNClNraWxsX1B2cDphZGRUb2dnbGUoJ1NraWxsIFgnLCBQdnBTa2lsbFgsIGZ1bmN0aW9uKFZhbHVlKQ0KUHZwU2tpbGxYID0gVmFsdWUNCmVuZCkNCg0KU2tpbGxfUHZwOmFkZFRvZ2dsZSgnU2tpbGwgQycsIFB2cFNraWxsQywgZnVuY3Rpb24oVmFsdWUpDQpQdnBTa2lsbEMgPSBWYWx1ZQ0KZW5kKQ0KDQpTa2lsbF9QdnA6YWRkVG9nZ2xlKCdTa2lsbCBWJywgUHZwU2tpbGxWLCBmdW5jdGlvbihWYWx1ZSkNClB2cFNraWxsViA9IFZhbHVlDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gVEVMRVBPUlRTVEFUVVMgTEVGVA0KbG9jYWwgVGVsZXBvcnRTdGF0dXNfTGVmdCA9IFRhYi5UYWJfNTphZGRTZWN0aW9uKCkNCmxvY2FsIFRlbGVwb3J0X1dvcmxkID0gVGVsZXBvcnRTdGF0dXNfTGVmdDphZGRNZW51KCcjV29ybGQgVGVsZXBvcnQnKQ0KVGVsZXBvcnRfV29ybGQ6YWRkQnV0dG9uKCJUcmF2ZWwgdG8gRmlyc3QgU2VhIiwgZnVuY3Rpb24oKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsTWFpbiIpDQplbmQpDQoNClRlbGVwb3J0X1dvcmxkOmFkZEJ1dHRvbigiVHJhdmVsIHRvIFNlY29uZCBTZWEiLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxEcmVzc3Jvc2EiKQ0KZW5kKQ0KDQpUZWxlcG9ydF9Xb3JsZDphZGRCdXR0b24oIlRyYXZlbCB0byBUaGlyZCBTZWEiLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxab3UiKQ0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIElzbGFuZCBUZWxlcG9ydA0KbG9jYWwgSXNsYW5kX1RlbGVwb3J0ID0gVGVsZXBvcnRTdGF0dXNfTGVmdDphZGRNZW51KCcjSXNsYW5kIFRlbGVwb3J0JykNCmlmIEZpcnN0X1NlYSB0aGVuDQpJc2xhbmRDaGVjayA9IHsNCiAgICAiU3RhcnQgSXNsYW5kIjsNCiAgICAiTWFyaW5lIFN0YXJ0IjsNCiAgICAiTWlkZGxlIFRvd24iOw0KICAgICJKdW5nbGUiOw0KICAgICJQaXJhdGUgVmlsbGFnZSI7DQogICAgIkRlc2VydCI7DQogICAgIkZyb3plbiBWaWxsYWdlIjsNCiAgICAiTWFyaW5lIEZvcmQiOw0KICAgICJDb2xvc3NldW0gMSI7DQogICAgIlNreSBpc2xhbmQgMSI7DQogICAgIlNreSBpc2xhbmQgMiI7DQogICAgIlNreSBpc2xhbmQgMyI7DQogICAgIlNreSBpc2xhbmQgNCI7DQogICAgIlByaXNvbiI7DQogICAgIk1hZ21hIFZpbGxhZ2UiOw0KICAgICJVbmRleVdhdGVyIENpdHkiOw0KICAgICJGb3VudGFpbiBDaXR5IjsNCiAgICAiSG91c2UgQ3lib3JncyI7DQogICAgIlNoYW5rcyBSb29tIjsNCiAgICAiTW9iIElzbGFuZCI7DQogICAgIlNlYSBCZWFzdCI7DQp9DQplbHNlaWYgU2Vjb25kX1NlYSB0aGVuDQpJc2xhbmRDaGVjayA9IHsNCiAgICAiRG9jayI7DQogICAgIktpbmdkb20gb2YgUm9zZSI7DQogICAgIk1hbnNpb24gMSI7DQogICAgIkZsYW1pbmdvIFJvb20iOw0KICAgICJHcmVlbiBab25lIjsNCiAgICAiQ2FmZSI7DQogICAgIkZhY3RvcnkiOw0KICAgICJDb2xvc3NldW0gMiI7DQogICAgIkdyYXZlIElzbGFuZCI7DQogICAgIlNub3cgTW91bnRhaW4iOw0KICAgICJDb2xkIElzbGFuZCI7DQogICAgIkhvdCBJc2xhbmQiOw0KICAgICJDdXJzZWQgU2hpcCI7DQogICAgIkljZSBDYXN0bGUiOw0KICAgICJGb3Jnb3R0ZW4gSXNsYW5kIjsNCiAgICAiVXNvYXBwIElzbGFuZCI7DQogICAgIk1pbmlza3kgSXNsYW5kIjsNCiAgICAiU2VhIEJlYXN0IjsNCn0NCmVsc2VpZiBUaGlyZF9TZWEgdGhlbg0KSXNsYW5kQ2hlY2sgPSB7DQogICAgIlBvcnQgVG93biI7DQogICAgIkh5ZHJhIElzbGFuZCI7DQogICAgIkdyZWF0IFRyZWUiOw0KICAgICJDYXN0bGUgb24gdGhlIFNlYSI7DQogICAgIkZsb2F0aW5nIFR1cnRsZSI7DQogICAgIk1hbnNpb24gMiI7DQogICAgIlNlY3JldCBUZW1wbGUiOw0KICAgICJGcmllbmRseSBBcmVuYSI7DQogICAgIkJlYXV0aWZ1bCBQaXJhdGUgRG9tYWluIjsNCiAgICAiVGVsZXIgUGFyayI7DQogICAgIlBlYW51dCBJc2xhbmQiOw0KICAgICJDaG9jb2xhdGUgSXNsYW5kIjsNCiAgICAiSWNlIENyZWFtIElzbGFuZCI7DQogICAgIkhhdW50ZWQgQ2FzdGxlIjsNCiAgICAiQ2FrZSBMb2FmIjsNCiAgICAiQ2FuZHkgQ2FuZSI7DQogICAgIlRpa2kgT3V0cG9zdCI7DQogICAgIlJhaWQgTGFiIjsNCiAgICAiTWluaSBTa3kiOw0KICAgICJTZWEgQmVhc3QiOw0KfQ0KZW5kDQpJc2xhbmRfVGVsZXBvcnQ6YWRkRHJvcGRvd24oIlNlbGVjdCBJc2xhbmQiLCBTZWxlY3RlZElzbGFuZCwgSXNsYW5kQ2hlY2ssIGZ1bmN0aW9uKFZhbHVlKQ0KU2VsZWN0ZWRJc2xhbmQgPSBWYWx1ZQ0KZW5kKQ0KDQpJc2xhbmRfVGVsZXBvcnQ6YWRkQnV0dG9uKCJUZWxlcG9ydCB0byBJc2xhbmQiLCBmdW5jdGlvbigpDQppZiBTZWxlY3RlZElzbGFuZCA9PSAiU3RhcnQgSXNsYW5kIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygxMDcxLjI4MzIsIDE2LjMwODU5NzYsIDE0MjYuODY3OTIpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMDcxLjI4MzIsIDE2LjMwODU5NzYsIDE0MjYuODY3OTIpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJNYXJpbmUgU3RhcnQiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC0yNTczLjMzNzQsIDYuODg4ODE5NjksIDIwNDYuOTk4MTcpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMjU3My4zMzc0LCA2Ljg4ODgxOTY5LCAyMDQ2Ljk5ODE3KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiTWlkZGxlIFRvd24iIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC02NTUuODI0MTU4LCA3Ljg4NzA4MTE1LCAxNDM2LjY3OTA4KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTY1NS44MjQxNTgsIDcuODg3MDgxMTUsIDE0MzYuNjc5MDgpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJKdW5nbGUiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC0xMjQ5Ljc3MjIyLCAxMS44ODcwODU5LCAzNDEuMzU2NDc2KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTEyNDkuNzcyMjIsIDExLjg4NzA4NTksIDM0MS4zNTY0NzYpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJQaXJhdGUgVmlsbGFnZSIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoLTExMjIuMzQ5OTgsIDQuNzg3MDg5ODIsIDM4NTUuOTE5OTIpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTEyMi4zNDk5OCwgNC43ODcwODk4MiwgMzg1NS45MTk5MikpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIkRlc2VydCIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoMTA5NC4xNDU4NywgNi40NzM1MDUwMiwgNDE5Mi44ODcyMSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KDEwOTQuMTQ1ODcsIDYuNDczNTA1MDIsIDQxOTIuODg3MjEpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJGcm96ZW4gVmlsbGFnZSIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoMTE5OC4wMDkyOCwgMjcuMDA3NDk1OSwgLTEyMTEuNzMzNzYpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMTk4LjAwOTI4LCAyNy4wMDc0OTU5LCAtMTIxMS43MzM3NikpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIk1hcmluZSBGb3JkIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtNDUwNS4zNzUsIDIwLjY4NzI5NCwgNDI2MC41NTkwOCkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC00NTA1LjM3NSwgMjAuNjg3Mjk0LCA0MjYwLjU1OTA4KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiQ29sb3NzZXVtIDEiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC0xNDI4LjM1NDc0LCA3LjM4OTMzOTQ1LCAtMzAxNC4zNzMwNSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xNDI4LjM1NDc0LCA3LjM4OTMzOTQ1LCAtMzAxNC4zNzMwNSkpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIlNreSBpc2xhbmQgMSIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoLTQ5NzAuMjE4NzUsIDcxNy43MDcyNzUsIC0yNjIyLjM1NDQ5KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTQ5NzAuMjE4NzUsIDcxNy43MDcyNzUsIC0yNjIyLjM1NDQ5KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiU2t5IGlzbGFuZCAyIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtNDgxMy4wMjQ5LCA5MDMuNzA4NTU3LCAtMTkxMi42OTA1NSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC00ODEzLjAyNDksIDkwMy43MDg1NTcsIC0xOTEyLjY5MDU1KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiU2t5IGlzbGFuZCAzIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtNzk1Mi4zMTAwNiwgNTU0NS41MjgzMiwgLTMyMC43MDQ5NTYpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtNzk1Mi4zMTAwNiwgNTU0NS41MjgzMiwgLTMyMC43MDQ5NTYpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJTa3kgaXNsYW5kIDQiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC03NzkzLjQzODk2LCA1NjA3LjIyMTY4LCAtMjAxNi41ODM2MikpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC03NzkzLjQzODk2LCA1NjA3LjIyMTY4LCAtMjAxNi41ODM2MikpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIlByaXNvbiIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoNDg1NC4xNjQ1NSwgNS42ODc0Mjc1MiwgNzQwLjE5NDY0MSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KDQ4NTQuMTY0NTUsIDUuNjg3NDI3NTIsIDc0MC4xOTQ2NDEpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJNYWdtYSBWaWxsYWdlIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtNTIzMS43NTg3OSwgOC42MTU5MzQzNywgODQ2Ny44NzY5NSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC01MjMxLjc1ODc5LCA4LjYxNTkzNDM3LCA4NDY3Ljg3Njk1KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiVW5kZXlXYXRlciBDaXR5IiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldyg2MTE2My44NTE2LCAxMS43Nzk2ODc5LCAxODE5Ljc4NDE4KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNjExNjMuODUxNiwgMTEuNzc5Njg3OSwgMTgxOS43ODQxOCkpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIkZvdW50YWluIENpdHkiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIFRQMihDRnJhbWUubmV3KDUxMzIuNzEyNCwgNC41MzYzMjgzMiwgNDAzNy44NTYyKSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTEzMi43MTI0LCA0LjUzNjMyODMyLCA0MDM3Ljg1NjIpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJIb3VzZSBDeWJvcmdzIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldyg2MjYyLjcyNTU5LCA3MS4zMDAzNjE2LCAzOTk4LjIzMDQ3KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNjI2Mi43MjU1OSwgNzEuMzAwMzYxNiwgMzk5OC4yMzA0NykpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIlNoYW5rcyBSb29tIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMTQ0Mi4xNjU1MywgMjkuODc4ODI2MSwgLTI4LjM1NDc0NzgpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTQ0Mi4xNjU1MywgMjkuODc4ODI2MSwgLTI4LjM1NDc0NzgpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJNb2IgSXNsYW5kIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMjg1MC4yMDA2OCwgNy4zOTIyNDc2OCwgNTM1NC45OTI2OCkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0yODUwLjIwMDY4LCA3LjM5MjI0NzY4LCA1MzU0Ljk5MjY4KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiRG9jayIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoODIuOTQ5MDY2MiwgMTguMDcxMDk4MywgMjgzNC45ODc3OSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KDgyLjk0OTA2NjIsIDE4LjA3MTA5ODMsIDI4MzQuOTg3NzkpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJLaW5nZG9tIG9mIFJvc2UiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC0zOTQuOTgzNTIxLCAxMTguNTAzMTI4LCAxMjQ1Ljg0NDYpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMzk0Ljk4MzUyMSwgMTE4LjUwMzEyOCwgMTI0NS44NDQ2KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiTWFuc2lvbiAxIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMzkwLjA5NjMxMywgMzMxLjg4NjQ3NSwgNjczLjQ2NDk2NikpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0zOTAuMDk2MzEzLCAzMzEuODg2NDc1LCA2NzMuNDY0OTY2KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiRmxhbWluZ28gUm9vbSIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoMjMwMi4xOTAxOSwgMTUuMTc3ODQyMSwgNjYzLjgxMTAzNSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KDIzMDIuMTkwMTksIDE1LjE3Nzg0MjEsIDY2My44MTEwMzUpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJHcmVlbiBab25lIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMjM3Mi4xNDY5NywgNzIuOTkxOTQzNCwgLTMxNjYuNTE0MTYpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMjM3Mi4xNDY5NywgNzIuOTkxOTQzNCwgLTMxNjYuNTE0MTYpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJDYWZlIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMzg1LjI1MDkxNiwgNzMuMDQ1ODk4NCwgMjk3LjM4ODM5NykpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0zODUuMjUwOTE2LCA3My4wNDU4OTg0LCAyOTcuMzg4Mzk3KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiRmFjdG9yeSIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoNDMwLjQyNTY5LCAyMTAuMDE5NjIzLCAtNDMyLjUwNDc5MSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KDQzMC40MjU2OSwgMjEwLjAxOTYyMywgLTQzMi41MDQ3OTEpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJDb2xvc3NldW0gMiIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoLTE4MzYuNTgxOTEsIDQ0LjU4OTA2NTYsIDEzNjAuMzA2NTIpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTgzNi41ODE5MSwgNDQuNTg5MDY1NiwgMTM2MC4zMDY1MikpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIkdyYXZlIElzbGFuZCIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoLTU0MTEuNDc2MDcsIDQ4LjgyMzQwMjQsIC03MjEuMjcyNTIyKSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTU0MTEuNDc2MDcsIDQ4LjgyMzQwMjQsIC03MjEuMjcyNTIyKSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiU25vdyBNb3VudGFpbiIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoNTExLjgyNTIyNiwgNDAxLjc2NTE5OCwgLTUzODAuMzk2KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTExLjgyNTIyNiwgNDAxLjc2NTE5OCwgLTUzODAuMzk2KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiQ29sZCBJc2xhbmQiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC02MDI2Ljk2NDg0LCAxNC43NDYxMjcxLCAtNTA3MS45NjMzOCkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC02MDI2Ljk2NDg0LCAxNC43NDYxMjcxLCAtNTA3MS45NjMzOCkpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIkhvdCBJc2xhbmQiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC01NDc4LjM5MjA5LCAxNS45Nzc1NjY3LCAtNTI0Ni45MTI2KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTU0NzguMzkyMDksIDE1Ljk3NzU2NjcsIC01MjQ2LjkxMjYpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJDdXJzZWQgU2hpcCIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoOTAyLjA1OTE0MywgMTI0Ljc1MjUxOCwgMzMwNzEuODEyNSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KDkwMi4wNTkxNDMsIDEyNC43NTI1MTgsIDMzMDcxLjgxMjUpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJJY2UgQ2FzdGxlIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldyg1NDAwLjQwMzgxLCAyOC4yMTY5OCwgLTYyMzYuOTkyMTkpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1NDAwLjQwMzgxLCAyOC4yMTY5OCwgLTYyMzYuOTkyMTkpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJGb3Jnb3R0ZW4gSXNsYW5kIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMzA0My4zMTU0MywgMjM4Ljg4MTI3MSwgLTEwMTkxLjU3OTEpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMzA0My4zMTU0MywgMjM4Ljg4MTI3MSwgLTEwMTkxLjU3OTEpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJVc29hcHAgSXNsYW5kIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldyg0NzQ4Ljc4ODU3LCA4LjM1MzcwODI3LCAyODQ5LjU3OTU5KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNDc0OC43ODg1NywgOC4zNTM3MDgyNywgMjg0OS41Nzk1OSkpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIk1pbmlza3kgSXNsYW5kIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMjYwLjM1ODkxNywgNDkzMjUuNzAzMSwgLTM1MjU5LjMwMDgpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMjYwLjM1ODkxNywgNDkzMjUuNzAzMSwgLTM1MjU5LjMwMDgpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJQb3J0IFRvd24iIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC02MTAuMzA5NjkyLCA1Ny44MzIzMDk3LCA2NDM2LjMzNTk0KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTYxMC4zMDk2OTIsIDU3LjgzMjMwOTcsIDY0MzYuMzM1OTQpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJIeWRyYSBJc2xhbmQiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KDUyMjkuOTk1NjEsIDYwMy45MTY1NjUsIDM0NS4xNTQwMjIpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MjI5Ljk5NTYxLCA2MDMuOTE2NTY1LCAzNDUuMTU0MDIyKSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiR3JlYXQgVHJlZSIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoMjE3NC45NDg3MywgMjguNzMxMjM5MywgLTY3MjguODMxNTQpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygyMTc0Ljk0ODczLCAyOC43MzEyMzkzLCAtNjcyOC44MzE1NCkpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIkNhc3RsZSBvbiB0aGUgU2VhIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtNTQ3Ny42Mjg0MiwgMzEzLjc5NDczOSwgLTI4MDguNDU4NSkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC01NDc3LjYyODQyLCAzMTMuNzk0NzM5LCAtMjgwOC40NTg1KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiRmxvYXRpbmcgVHVydGxlIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMTA5MTkuMjk5OCwgMzMxLjc4ODQ1MiwgLTg2MzcuNTcyMjcpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtMTA5MTkuMjk5OCwgMzMxLjc4ODQ1MiwgLTg2MzcuNTcyMjcpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJNYW5zaW9uIDIiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC0xMjU1My44MTI1LCAzMzIuNDAzOTYxLCAtNzYyMS45MTc0OCkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xMjU1My44MTI1LCAzMzIuNDAzOTYxLCAtNzYyMS45MTc0OCkpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIlNlY3JldCBUZW1wbGUiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KDUyMTcuMzU2OTMsIDYuNTY1MTExMTYsIDExMDAuODgxNTkpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MjE3LjM1NjkzLCA2LjU2NTExMTE2LCAxMTAwLjg4MTU5KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiRnJpZW5kbHkgQXJlbmEiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KDUyMjAuMjg5NTUsIDcyLjgxOTM0MzYsIC0xNDUwLjg2MzA0KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTIyMC4yODk1NSwgNzIuODE5MzQzNiwgLTE0NTAuODYzMDQpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJCZWF1dGlmdWwgUGlyYXRlIERvbWFpbiIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoNTMxMC44MDk1NzAzMTI1LCAyMS41OTQ0ODQzMjkyMjQsIDEyOS4zOTA1MzM0NDcyNykpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KDUzMTAuODA5NTcwMzEyNSwgMjEuNTk0NDg0MzI5MjI0LCAxMjkuMzkwNTMzNDQ3MjcpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJUZWxlciBQYXJrIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtOTUxMi4zNjIzMDQ2ODc1LCAxNDIuMTMyNTgzNjE4MTYsIDU1NDguODQ1NzAzMTI1KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTk1MTIuMzYyMzA0Njg3NSwgMTQyLjEzMjU4MzYxODE2LCA1NTQ4Ljg0NTcwMzEyNSkpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIlBlYW51dCBJc2xhbmQiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC0yMTQyLCA0OCwgLTEwMDMxKSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTIxNDIsIDQ4LCAtMTAwMzEpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJDaG9jb2xhdGUgSXNsYW5kIiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygxNTYuODk2NDg0LCAzMC41OTM1MjExLCAtMTI2NjIuNzAzMSwgLTAuNTczNTk5MjE5LCAwLCAwLjgxOTEzNjU2LCAwLCAxLCAwLCAtMC44MTkxMzY1NiwgMCwgLTAuNTczNTk5MjE5KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTU2Ljg5NjQ4NCwgMzAuNTkzNTIxMSwgLTEyNjYyLjcwMzEsIC0wLjU3MzU5OTIxOSwgMCwgMC44MTkxMzY1NiwgMCwgMSwgMCwgLTAuODE5MTM2NTYsIDAsIC0wLjU3MzU5OTIxOSkpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIkljZSBDcmVhbSBJc2xhbmQiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC05NDksIDU5LCAtMTA5MDcpKQ0KICAgIGVsc2UNCiAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtOTQ5LCA1OSwgLTEwOTA3KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiSGF1bnRlZCBDYXN0bGUiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC05NTMwLjYxMDM1LCAtMTMyLjg2MDY1NywgNTc2My4xMzQ3NykpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC05NTMwLjYxMDM1LCAtMTMyLjg2MDY1NywgNTc2My4xMzQ3NykpDQogICAgZW5kDQplbHNlaWYgU2VsZWN0ZWRJc2xhbmQgPT0gIkNha2UgTG9hZiIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoLTIwOTkuMzMxNTQsIDY2Ljk5NzA3MDMsIC0xMjEyOC41ODUsIDAuOTk3NTYxNTc0LCAwLCAwLjA2OTc5MTkzNTQsIDAsIDEsIDAsIC0wLjA2OTc5MTkzNTQsIDAsIDAuOTk3NTYxNTc0KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTIwOTkuMzMxNTQsIDY2Ljk5NzA3MDMsIC0xMjEyOC41ODUsIDAuOTk3NTYxNTc0LCAwLCAwLjA2OTc5MTkzNTQsIDAsIDEsIDAsIC0wLjA2OTc5MTkzNTQsIDAsIDAuOTk3NTYxNTc0KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiQ2FuZHkgQ2FuZSIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoLTE1MzAuOTcxNDQsIDEzLjcyODgxNywgLTE0NzcwLjA4ODksIDAuODk4NzkwMzU5LCAtMCwgLTAuNDM4Mzc4NzUxLCAwLCAxLCAtMCwgMC40MzgzNzg3NTEsIDAsIDAuODk4NzkwMzU5KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTE1MzAuOTcxNDQsIDEzLjcyODgxNywgLTE0NzcwLjA4ODksIDAuODk4NzkwMzU5LCAtMCwgLTAuNDM4Mzc4NzUxLCAwLCAxLCAtMCwgMC40MzgzNzg3NTEsIDAsIDAuODk4NzkwMzU5KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiVGlraSBPdXRwb3N0IiB0aGVuDQogICAgaWYgQnlwYXNzVGVsZXBvcnQgdGhlbg0KICAgICAgICBCVFAoQ0ZyYW1lLm5ldygtMTY1NDguODE2NCwgNTUuNjA1OTkxNCwgLTE3Mi44MTI1LCAwLjIxMzA5MjU2NiwgLTAsIC0wLjk3NzAzMjAwNiwgMCwgMSwgLTAsIDAuOTc3MDMyMDA2LCAwLCAwLjIxMzA5MjU2NikpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0xNjU0OC44MTY0LCA1NS42MDU5OTE0LCAtMTcyLjgxMjUsIDAuMjEzMDkyNTY2LCAtMCwgLTAuOTc3MDMyMDA2LCAwLCAxLCAtMCwgMC45NzcwMzIwMDYsIDAsIDAuMjEzMDkyNTY2KSkNCiAgICBlbmQNCmVsc2VpZiBTZWxlY3RlZElzbGFuZCA9PSAiUmFpZCBMYWIiIHRoZW4NCiAgICBpZiBCeXBhc3NUZWxlcG9ydCB0aGVuDQogICAgICAgIEJUUChDRnJhbWUubmV3KC01MDU3LjE0NjQ4NDM3NSwgMzE0LjU0MTMyMDgwMDc4LCAtMjkzNC43OTk1NjA1NDY5KSkNCiAgICBlbHNlDQogICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLTUwNTcuMTQ2NDg0Mzc1LCAzMTQuNTQxMzIwODAwNzgsIC0yOTM0Ljc5OTU2MDU0NjkpKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJNaW5pIFNreSIgdGhlbg0KICAgIGlmIEJ5cGFzc1RlbGVwb3J0IHRoZW4NCiAgICAgICAgQlRQKENGcmFtZS5uZXcoLTI2My42NjY2ODcwMTE3MiwgNDkzMjUuNDk2MDkzNzUsIC0zNTI2MCkpDQogICAgZWxzZQ0KICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0yNjMuNjY2Njg3MDExNzIsIDQ5MzI1LjQ5NjA5Mzc1LCAtMzUyNjApKQ0KICAgIGVuZA0KZWxzZWlmIFNlbGVjdGVkSXNsYW5kID09ICJTZWEgQmVhc3QiIHRoZW4NCiAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnNbIlNlYSBvZiBUcmVhdHMiXS5DRnJhbWUpDQplbmQNCmVuZCkNCg0KSXNsYW5kX1RlbGVwb3J0OmFkZFRvZ2dsZSgiQnlwYXNzIFRlbGVwb3J0IiwgQnlwYXNzVGVsZXBvcnQsIGZ1bmN0aW9uKFZhbHVlKQ0KQnlwYXNzVGVsZXBvcnQgPSBWYWx1ZQ0KZW5kKQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBURUxFUE9SVFNUQVRVUyBSSUdIVA0KbG9jYWwgVGVsZXBvcnRTdGF0dXNfUmlnaHQgPSBUYWIuVGFiXzU6YWRkU2VjdGlvbigpDQoNCmxvY2FsIFN0YXR1c19QbGF5ZXIgPSBUZWxlcG9ydFN0YXR1c19SaWdodDphZGRNZW51KCcjU3RhdHVzIFBsYXllcicpDQpsb2NhbCBSYWNlU3RhdHVzID0gU3RhdHVzX1BsYXllcjphZGRMYWJlbCgiIikNCmxvY2FsIFBvaW50U3RhdHVzID0gU3RhdHVzX1BsYXllcjphZGRMYWJlbCgiIikNCmxvY2FsIFN0YXR1c0Z1bmMxID0gU3RhdHVzX1BsYXllcjphZGRMYWJlbCgiIikNCmxvY2FsIFN0YXR1c0Z1bmMyID0gU3RhdHVzX1BsYXllcjphZGRMYWJlbCgiIikNCmxvY2FsIFN0YXR1c0Z1bmMzID0gU3RhdHVzX1BsYXllcjphZGRMYWJlbCgiIikNCmxvY2FsIFN0YXR1c0Z1bmM0ID0gU3RhdHVzX1BsYXllcjphZGRMYWJlbCgiIikNCmxvY2FsIFN0YXR1c0Z1bmM1ID0gU3RhdHVzX1BsYXllcjphZGRMYWJlbCgiIikNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIFJhY2VTdGF0dXM6UmVmcmVzaCgiUmFjZSA6ICIuLnRvc3RyaW5nKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSkpDQogICAgUG9pbnRTdGF0dXM6UmVmcmVzaCgiUG9pbnRzIEF2YWlibGUgOiAiLi50b3N0cmluZyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlBvaW50cy5WYWx1ZSkuLicgUG9pbnQnKQ0KICAgIFN0YXR1c0Z1bmMxOlJlZnJlc2goIk1lbGVlIDogIi4udG9zdHJpbmcoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5TdGF0cy5NZWxlZTpXYWl0Rm9yQ2hpbGQoIkxldmVsIikuVmFsdWUpLi4nIFBvaW50IExlZnQnKQ0KICAgIFN0YXR1c0Z1bmMyOlJlZnJlc2goIkRlZmVuc2UgOiAiLi50b3N0cmluZyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlN0YXRzLkRlZmVuc2U6V2FpdEZvckNoaWxkKCJMZXZlbCIpLlZhbHVlKS4uJyBQb2ludCcpDQogICAgU3RhdHVzRnVuYzM6UmVmcmVzaCgiU3dvcmQgOiAiLi50b3N0cmluZyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlN0YXRzLlN3b3JkOldhaXRGb3JDaGlsZCgiTGV2ZWwiKS5WYWx1ZSkuLicgUG9pbnQnKQ0KICAgIFN0YXR1c0Z1bmM0OlJlZnJlc2goIkd1biA6ICIuLnRvc3RyaW5nKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuU3RhdHMuR3VuOldhaXRGb3JDaGlsZCgiTGV2ZWwiKS5WYWx1ZSkuLicgUG9pbnQnKQ0KICAgIFN0YXR1c0Z1bmM1OlJlZnJlc2goIkRldmlsIEZydWl0IDogIi4udG9zdHJpbmcoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5TdGF0c1siRGVtb24gRnJ1aXQiXTpXYWl0Rm9yQ2hpbGQoIkxldmVsIikuVmFsdWUpLi4nIFBvaW50JykNCmVuZA0KZW5kKQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBTZXQgU3RhdHVzDQpsb2NhbCBTZXRfU3RhdHVzID0gVGVsZXBvcnRTdGF0dXNfUmlnaHQ6YWRkTWVudSgnI1NldHRpbmcgU3RhdHVzJykNClNlbGVjdFBvaW50ID0gMQ0KU2V0X1N0YXR1czphZGRUZXh0Ym94KCJTZXQgUG9pbnQiLCBTZWxlY3RQb2ludCwgZnVuY3Rpb24oVmFsdWUpDQpTZWxlY3RQb2ludCA9IFZhbHVlDQplbmQpDQoNClNldF9TdGF0dXM6YWRkVG9nZ2xlKCJNZWxlZSIsIE1lbGVlZiwgZnVuY3Rpb24oVmFsdWUpDQpNZWxlZWYgPSBWYWx1ZQ0Kd2hpbGUgd2FpdCgpIGFuZCBNZWxlZWYgZG8NCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBZGRQb2ludCIsICJNZWxlZSIsIFNlbGVjdFBvaW50KQ0KZW5kDQplbmQpDQoNClNldF9TdGF0dXM6YWRkVG9nZ2xlKCJEZWZlbnNlIiwgRGVmZW5zZWYsIGZ1bmN0aW9uKFZhbHVlKQ0KRGVmZW5zZWYgPSBWYWx1ZQ0Kd2hpbGUgd2FpdCgpIGFuZCBEZWZlbnNlZiBkbw0KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFkZFBvaW50IiwgIkRlZmVuc2UiLCBTZWxlY3RQb2ludCkNCmVuZA0KZW5kKQ0KDQpTZXRfU3RhdHVzOmFkZFRvZ2dsZSgiU3dvcmQiLCBTd29yZGYsIGZ1bmN0aW9uKFZhbHVlKQ0KU3dvcmRmID0gVmFsdWUNCndoaWxlIHdhaXQoKSBhbmQgU3dvcmRmIGRvDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWRkUG9pbnQiLCAiU3dvcmQiLCBTZWxlY3RQb2ludCkNCmVuZA0KZW5kKQ0KDQpTZXRfU3RhdHVzOmFkZFRvZ2dsZSgiR3VuIiwgR3VuZiwgZnVuY3Rpb24oVmFsdWUpDQpHdW5mID0gVmFsdWUNCndoaWxlIHdhaXQoKSBhbmQgR3VuZiBkbw0KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFkZFBvaW50IiwgIkd1biIsIFNlbGVjdFBvaW50KQ0KZW5kDQplbmQpDQoNClNldF9TdGF0dXM6YWRkVG9nZ2xlKCJEZXZpbCBGcnVpdCIsIERldmlsRnJ1aXRmLCBmdW5jdGlvbihWYWx1ZSkNCkRldmlsRnJ1aXRmID0gVmFsdWUNCndoaWxlIHdhaXQoKSBhbmQgRGV2aWxGcnVpdGYgZG8NCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBZGRQb2ludCIsICJEZW1vbiBGcnVpdCIsIFNlbGVjdFBvaW50KQ0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gU0hPUCBMRUZUDQpsb2NhbCBTaG9wX0xlZnQgPSBUYWIuVGFiXzY6YWRkU2VjdGlvbigpDQpsb2NhbCBSYWNlRnJhZ1Nob3AgPSBTaG9wX0xlZnQ6YWRkTWVudSgnI0JvbmUgLSBFY3RvIC0gRnJhZ21lbnQnKQ0KUmFjZUZyYWdTaG9wOmFkZEJ1dHRvbigiUmFjZSBHaG91bCBbICQxMDAgRWN0b3BsYXNtIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzMSA9IHsNCiAgICBbMV0gPSAiRWN0b3BsYXNtIiwNCiAgICBbMl0gPSAiQnV5Q2hlY2siLA0KICAgIFszXSA9IDQNCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MxKSkNCmxvY2FsIGFyZ3MyID0gew0KICAgIFsxXSA9ICJFY3RvcGxhc20iLA0KICAgIFsyXSA9ICJDaGFuZ2UiLA0KICAgIFszXSA9IDQNCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MyKSkNCmVuZCkNCg0KUmFjZUZyYWdTaG9wOmFkZEJ1dHRvbigiQ3lib3JnIFsgJD8/PyBdIiwgZnVuY3Rpb24oKQ0KbG9jYWwgYXJncyA9IHsNCiAgICBbMV0gPSAiQ3lib3JnVHJhaW5lciIsDQogICAgWzJdID0gIkJ1eSINCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KZW5kKQ0KDQpSYWNlRnJhZ1Nob3A6YWRkQnV0dG9uKCJTdXByaXNlIEJvbmUgWyDDsMW4wqbCtDUwIEJvbmUgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJvbmVzIiwNCiAgICBbMl0gPSAiQnV5IiwNCiAgICBbM10gPSAxLA0KICAgIFs0XSA9IDENCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KZW5kKQ0KDQpSYWNlRnJhZ1Nob3A6YWRkQnV0dG9uKCJTdGF0IFJlZnVuZCBbIMOwxbjCpsK0NTAgQm9uZSBdIiwgZnVuY3Rpb24oKQ0KbG9jYWwgYXJncyA9IHsNCiAgICBbMV0gPSAiQm9uZXMiLA0KICAgIFsyXSA9ICJCdXkiLA0KICAgIFszXSA9IDEsDQogICAgWzRdID0gMg0KfQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQpDQoNClJhY2VGcmFnU2hvcDphZGRCdXR0b24oIlJhY2UgUmVyb2xsIFsgw7DFuMKmwrQ1MCBCb25lIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCb25lcyIsDQogICAgWzJdID0gIkJ1eSIsDQogICAgWzNdID0gMSwNCiAgICBbNF0gPSAzDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KUmFjZUZyYWdTaG9wOmFkZEJ1dHRvbigiUmFuZG9tIFJhY2UgWyBmMzAwMCBGcmFnbWVudHMgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJsYWNrYmVhcmRSZXdhcmQiLA0KICAgIFsyXSA9ICJSZXJvbGwiLA0KICAgIFszXSA9ICIyIg0KfQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQpDQoNClJhY2VGcmFnU2hvcDphZGRCdXR0b24oIlJlc2V0IFN0YXRzIFsgZjI1MDAgRnJhZ21lbnRzIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCbGFja2JlYXJkUmV3YXJkIiwNCiAgICBbMl0gPSAiUmVmdW5kIiwNCiAgICBbM10gPSAiMiINCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIEFCSUxJVElFUyBTSE9QDQpsb2NhbCBBYmlsaXR5U2hvcCA9IFNob3BfTGVmdDphZGRNZW51KCcjQWJpbGl0aWVzJykNCkFiaWxpdHlTaG9wOmFkZEJ1dHRvbigiU2t5anVtcCBbICQxMCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KbG9jYWwgYXJncyA9IHsNCiAgICBbMV0gPSAiQnV5SGFraSIsDQogICAgWzJdID0gIkdlcHBvIg0KfQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQpDQoNCkFiaWxpdHlTaG9wOmFkZEJ1dHRvbigiQnVzbyBIYWtpIFsgJDI1LDAwMCBCZWxpIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCdXlIYWtpIiwNCiAgICBbMl0gPSAiQnVzbyINCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KZW5kKQ0KDQpBYmlsaXR5U2hvcDphZGRCdXR0b24oIlNvcnUgWyAkMTAwLDAwMCBCZWxpIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCdXlIYWtpIiwNCiAgICBbMl0gPSAiU29ydSINCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KZW5kKQ0KDQpBYmlsaXR5U2hvcDphZGRCdXR0b24oIk9ic2VydmF0aW9uIGhha2kgWyAkNzUwLDAwMCBCZWxpIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJLZW5UYWxrIiwNCiAgICBbMl0gPSAiQnV5Ig0KfQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQpDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS8vIEZJR0hUSU5HIFNIT1ANCmxvY2FsIEZpZ2h0aW5nU2hvcCA9IFNob3BfTGVmdDphZGRNZW51KCcjRmlnaHRpbmcnKQ0KRmlnaHRpbmdTaG9wOmFkZEJ1dHRvbigiQmxhY2sgTGVnIFsgJDE1MCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5QmxhY2tMZWciKQ0KZW5kKQ0KDQpGaWdodGluZ1Nob3A6YWRkQnV0dG9uKCJFbGVjdHJvIFsgJDU1MCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RybyIpDQplbmQpDQoNCkZpZ2h0aW5nU2hvcDphZGRCdXR0b24oIkZpc2htYW4gS2FyYXRlIFsgJDc1MCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RmlzaG1hbkthcmF0ZSIpDQplbmQpDQoNCkZpZ2h0aW5nU2hvcDphZGRCdXR0b24oIkRyYWdvbiBDbGF3IFsgJDEsNTAwIEZyYWdtZW50cyBdIiwgZnVuY3Rpb24oKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsIkRyYWdvbkNsYXciLCIxIikNCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCJEcmFnb25DbGF3IiwiMiIpDQplbmQpDQoNCkZpZ2h0aW5nU2hvcDphZGRCdXR0b24oIlN1cGVyaHVtYW4gWyAkMywwMDAsMDAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVN1cGVyaHVtYW4iKQ0KZW5kKQ0KDQpGaWdodGluZ1Nob3A6YWRkQnV0dG9uKCJEZWF0aCBTdGVwIFsgJDUsMDAwIEZyYWdtZW50cyAvICQ1LDAwMCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RGVhdGhTdGVwIikNCmVuZCkNCg0KRmlnaHRpbmdTaG9wOmFkZEJ1dHRvbigiU2hhcmttYW4gS2FyYXRlIFsgJDUsMDAwIEZyYWdtZW50cyAvICQyLDUwMCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U2hhcmttYW5LYXJhdGUiLHRydWUpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTaGFya21hbkthcmF0ZSIpDQplbmQpDQoNCkZpZ2h0aW5nU2hvcDphZGRCdXR0b24oIkVsZWN0cmljIENsYXcgWyAkNSwwMDAgRnJhZ21lbnRzIC8gJDMsMDAwLDAwMCBCZWxpIF0iLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJpY0NsYXciKQ0KZW5kKQ0KDQpGaWdodGluZ1Nob3A6YWRkQnV0dG9uKCJEcmFnb24gVGFsb24gWyAkNSwwMDAgRnJhZ21lbnRzIC8gJDMsMDAwLDAwMCBCZWxpIF0iLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEcmFnb25UYWxvbiIpDQplbmQpDQoNCkZpZ2h0aW5nU2hvcDphZGRCdXR0b24oIkdvZCBIdW1hbiBbICQ1LDAwMCBGcmFnbWVudHMgLyAkNSwwMDAsMDAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUdvZGh1bWFuIikNCmVuZCkNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gU1dPUkQgU0hPUA0KbG9jYWwgU3dvcmRTaG9wID0gU2hvcF9MZWZ0OmFkZE1lbnUoJyNTd29yZCcpDQoNClN3b3JkU2hvcDphZGRCdXR0b24oIkN1dGxhc3MgWyAkMSwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KbG9jYWwgYXJncyA9IHsNCiAgICBbMV0gPSAiQnV5SXRlbSIsDQogICAgWzJdID0gIkN1dGxhc3MiDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KU3dvcmRTaG9wOmFkZEJ1dHRvbigiS2F0YW5hIFsgJDEsMDAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJ1eUl0ZW0iLA0KICAgIFsyXSA9ICJLYXRhbmEiDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KU3dvcmRTaG9wOmFkZEJ1dHRvbigiRHVhbCBLYXRhbmEgWyAkMTIsMDAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJ1eUl0ZW0iLA0KICAgIFsyXSA9ICJEdWFsIEthdGFuYSINCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KZW5kKQ0KDQpTd29yZFNob3A6YWRkQnV0dG9uKCJJcm9uIE1hY2UgWyAkMjUsMDAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJ1eUl0ZW0iLA0KICAgIFsyXSA9ICJJcm9uIE1hY2UiDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KU3dvcmRTaG9wOmFkZEJ1dHRvbigiVHJpcGxlIEthdGFuYSBbICQ2MCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KbG9jYWwgYXJncyA9IHsNCiAgICBbMV0gPSAiQnV5SXRlbSIsDQogICAgWzJdID0gIlRyaXBsZSBLYXRhbmEiDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KU3dvcmRTaG9wOmFkZEJ1dHRvbigiUGlwZSBbICQxMDAsMDAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJ1eUl0ZW0iLA0KICAgIFsyXSA9ICJQaXBlIg0KfQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQpDQoNClN3b3JkU2hvcDphZGRCdXR0b24oIkR1YWwtSGVhZGVkIEJsYWRlIFsgJDQwMCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KbG9jYWwgYXJncyA9IHsNCiAgICBbMV0gPSAiQnV5SXRlbSIsDQogICAgWzJdID0gIkR1YWwtSGVhZGVkIEJsYWRlIg0KfQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQpDQoNClN3b3JkU2hvcDphZGRCdXR0b24oIlNvdWwgQ2FuZSBbICQ3NTAsMDAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJ1eUl0ZW0iLA0KICAgIFsyXSA9ICJTb3VsIENhbmUiDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KU3dvcmRTaG9wOmFkZEJ1dHRvbigiQmlzZW50byBbICQxLDIwMCwwMDAgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KbG9jYWwgYXJncyA9IHsNCiAgICBbMV0gPSAiQnV5SXRlbSIsDQogICAgWzJdID0gIkJpc2VudG8iDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KU3dvcmRTaG9wOmFkZEJ1dHRvbigiUG9sZSB2MiBbIGY1LDAwMCBGcmFnbWVudHMgXSIsIGZ1bmN0aW9uKCkNCmdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUaHVuZGVyR29kVGFsayIpDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLy8gU0hPUCBSSUdIVA0KbG9jYWwgU2hvcF9SaWdodCA9IFRhYi5UYWJfNjphZGRTZWN0aW9uKCkNCmxvY2FsIERldmlsU2hvcCA9IFNob3BfUmlnaHQ6YWRkTWVudSgnI0RldmlsIEZydWl0cycpDQpsb2NhbCBSZW1vdGVfR2V0RnJ1aXRzID0gZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiUmVtb3RlcyIpLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkdldEZydWl0cyIpDQoNCmxvY2FsIFNob3BEZXZpbFNlbGwgPSB7fQ0KZm9yIGksdiBpbiBuZXh0LFJlbW90ZV9HZXRGcnVpdHMgZG8NCmlmIHYuT25TYWxlIHRoZW4gDQogICAgdGFibGUuaW5zZXJ0KFNob3BEZXZpbFNlbGwsdi5OYW1lKQ0KZW5kDQplbmQNCg0KbG9jYWwgUHJpY2VEZXZGcnVpdCA9IERldmlsU2hvcDphZGRMYWJlbCgnRnJ1aXQgUHJpY2UgOiAtJykNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgZm9yIGksdiBpbiBuZXh0LFJlbW90ZV9HZXRGcnVpdHMgZG8NCiAgICAgICAgaWYgdi5OYW1lID09IFNlbGVjdF9EZXZpbF9GcnVpdCB0aGVuDQogICAgICAgICAgICBQcmljZURldkZydWl0OlJlZnJlc2goJ0ZydWl0IFByaWNlIDogJCcgLi4gdi5QcmljZSkNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZCkNCg0KbG9jYWwgRGV2aWxTaG9wc1JlZnJlc2ggPSBEZXZpbFNob3A6YWRkRHJvcGRvd24oJ1NlbGVjdCBEZXZpbCBGcnVpdCBvbiBTYWxlJywgU2VsZWN0X0RldmlsX0ZydWl0LCBTaG9wRGV2aWxTZWxsLCBmdW5jdGlvbihWYWx1ZSkNClNlbGVjdF9EZXZpbF9GcnVpdCA9IFZhbHVlDQplbmQpDQoNCkRldmlsU2hvcDphZGRCdXR0b24oIlJlZnJlc2ggRnJ1aXQgb24gU2FsZSIsIGZ1bmN0aW9uKCkNCkRldmlsU2hvcHNSZWZyZXNoOkNsZWFyKCkNCkRldmlsU2hvcHNSZWZyZXNoOlJlZnJlc2goU2hvcERldmlsU2VsbCkNCmVuZCkNCg0KRGV2aWxTaG9wOmFkZEJ1dHRvbigiQnV5IERldmlsIEZydWl0IG9uIFNhbGUiLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJHZXRGcnVpdHMiKQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHVyY2hhc2VSYXdGcnVpdCIsU2VsZWN0X0RldmlsX0ZydWl0KQ0KZW5kKQ0KDQpEZXZpbFNob3A6YWRkVG9nZ2xlKCdCdXkgUmFuZG9tIEZydWl0JywgQXV0b0J1eUZydWl0WmlvbGVzLCBmdW5jdGlvbihWYWx1ZSkNCkF1dG9CdXlGcnVpdFppb2xlcyA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9CdXlGcnVpdFppb2xlcyB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNvdXNpbiIsIkJ1eSIpDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpmdW5jdGlvbiBnZXROaWwobmFtZSxjbGFzcykNCmZvciBfLHYgaW4gbmV4dCwgZ2V0bmlsaW5zdGFuY2VzKCkgZG8NCiAgICBpZiB2LkNsYXNzTmFtZSA9PSBjbGFzcyBhbmQgdi5OYW1lID09IG5hbWUgdGhlbg0KICAgICAgICByZXR1cm4gdg0KICAgIGVuZA0KZW5kDQplbmQNCg0KZnVuY3Rpb24gU3RvcmVkRnJ1aXRlZChuYW1lXzEsIG5hbWVfMikNCmxvY2FsIENoYXJhY3RlciA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlcg0KbG9jYWwgQmFja3BhY2sgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjaw0KbG9jYWwgQ29tbUZfID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfDQppZiBDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQobmFtZV8yKSBvciBCYWNrcGFjazpGaW5kRmlyc3RDaGlsZChuYW1lXzIpIHRoZW4NCiAgICBsb2NhbCBhcmdzID0gew0KICAgICAgICBbMV0gPSAiU3RvcmVGcnVpdCIsDQogICAgICAgIFsyXSA9IG5hbWVfMSwNCiAgICAgICAgWzNdID0gQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKG5hbWVfMikgb3IgQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQobmFtZV8yKSANCiAgICB9DQogICAgQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQNCmVuZA0KDQpEZXZpbFNob3A6YWRkVG9nZ2xlKCdBdXRvIFN0b3JlZCBGcnVpdCAoV29ya2luZyknLCBBdXRvU3RvcmVGcnVpdCwgZnVuY3Rpb24oVmFsdWUpDQpBdXRvU3RvcmVGcnVpdCA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoKSBkbw0KICAgIGlmIEF1dG9TdG9yZUZydWl0IHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiUm9ja2V0LVJvY2tldCIsICJSb2NrZXQgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU3Bpbi1TcGluIiwgIlNwaW4gRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiQ2hvcC1DaG9wIiwgIkNob3AgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU3ByaW5nLVNwcmluZyIsICJTcHJpbmcgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiQm9tYi1Cb21iIiwgIkJvbWIgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU21va2UtU21va2UiLCAiU21va2UgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU3Bpa2UtU3Bpa2UiLCAiU3Bpa2UgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiRmxhbWUtRmxhbWUiLCAiRmxhbWUgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiRmFsY29uLUZhbGNvbiIsICJGYWxjb24gRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiSWNlLUljZSIsICJJY2UgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU2FuZC1TYW5kIiwgIlNhbmQgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiRGFyay1EYXJrIiwgIkRhcmsgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiRGlhbW9uZC1EaWFtb25kIiwgIkRpYW1vbmQgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiTGlnaHQtTGlnaHQiLCAiTGlnaHQgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiUnViYmVyLVJ1YmJlciIsICJSdWJiZXIgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiQmFycmllci1CYXJyaWVyIiwgIkJhcnJpZXIgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiR2hvc3QtR2hvc3QiLCAiR2hvc3QgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiTWFnbWEtTWFnbWEiLCAiTWFnbWEgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiUXVha2UtUXVha2UiLCAiUXVha2UgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiQnVkZGhhLUJ1ZGRoYSIsICJCdWRkaGEgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiTG92ZS1Mb3ZlIiwgIkxvdmUgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU3BpZGVyLVNwaWRlciIsICJTcGlkZXIgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU291bmQtU291bmQiLCAiU291bmQgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiUGhvZW5peC1QaG9lbml4IiwgIlBob2VuaXggRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiUG9ydGFsLVBvcnRhbCIsICJQb3J0YWwgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiUnVtYmxlLVJ1bWJsZSIsICJSdW1ibGUgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiUGFpbi1QYWluIiwgIlBhaW4gRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiQmxpenphcmQtQmxpenphcmQiLCAiQmxpenphcmQgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiR3Jhdml0eS1HcmF2aXR5IiwgIkdyYXZpdHkgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiTWFtbW90aC1NYW1tb3RoIiwgIk1hbW1vdGggRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiRG91Z2gtRG91Z2giLCAiRG91Z2ggRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU2hhZG93LVNoYWRvdyIsICJTaGFkb3cgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiVmVub20tVmVub20iLCAiVmVub20gRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiQ29udHJvbC1Db250cm9sIiwgIkNvbnRyb2wgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiU3Bpcml0LVNwaXJpdCIsICJTcGlyaXQgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiRHJhZ29uLURyYWdvbiIsICJEcmFnb24gRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiTGVvcGFyZC1MZW9wYXJkIiwgIkxlb3BhcmQgRnJ1aXQiKQ0KICAgICAgICAgICAgU3RvcmVkRnJ1aXRlZCgiS2l0c3VuZS1LaXRzdW5lIiwgIktpdHN1bmUgRnJ1aXQiKQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KRGV2aWxTaG9wOmFkZFRvZ2dsZSgiRnJ1aXQgTm90aWZpY2F0aW9uIiwgX0cuRnJ1aXRDaGVjaywgZnVuY3Rpb24oVmFsdWUpDQpfRy5GcnVpdENoZWNrID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoLjEpIGRvDQogICAgaWYgX0cuRnJ1aXRDaGVjayB0aGVuDQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgIGlmIHY6SXNBKCJUb29sIikgdGhlbg0KICAgICAgICAgICAgICAgIHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk5vdGlmaWNhdGlvbikubmV3KHYuTmFtZS4uIiBTcGF3bmVkIik6RGlzcGxheSgpOw0KICAgICAgICAgICAgICAgIHdhaXQoKQ0KICAgICAgICAgICAgICAgIHNldHRocmVhZGNvbnRleHQoNSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpEZXZpbFNob3A6YWRkVG9nZ2xlKCJUZWxlcG9ydCB0byBGcnVpdCIsIF9HLlRlbGVwb3J0RnJ1aXQsIGZ1bmN0aW9uKFZhbHVlKQ0KX0cuVGVsZXBvcnRGcnVpdCA9IFZhbHVlDQpDYW5jZWxUd2VlbihfRy5UZWxlcG9ydEZydWl0KQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgX0cuVGVsZXBvcnRGcnVpdCB0aGVuDQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgIGlmIHY6SXNBKCJUb29sIikgdGhlbg0KICAgICAgICAgICAgICAgIFR3ZWVuKHYuSGFuZGxlLkNGcmFtZSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpEZXZpbFNob3A6YWRkVG9nZ2xlKCJCcmluZyBGcnVpdCAoSW5zdGFudCkiLCBfRy5CcmluZ0ZydWl0QkYsIGZ1bmN0aW9uKFZhbHVlKQ0KX0cuQnJpbmdGcnVpdEJGID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIF9HLkJyaW5nRnJ1aXRCRiB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdi5IYW5kbGUuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kCQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBHdW4gU2hvcA0KbG9jYWwgR3VuU2hvcCA9IFNob3BfUmlnaHQ6YWRkTWVudSgnI0d1bicpDQpHdW5TaG9wOmFkZEJ1dHRvbigiU2xpbmdzaG90IFsgJDUsMDAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJ1eUl0ZW0iLA0KICAgIFsyXSA9ICJTbGluZ3Nob3QiDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KR3VuU2hvcDphZGRCdXR0b24oIk11c2tldCBbICQ4LDAwMCBCZWxpIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCdXlJdGVtIiwNCiAgICBbMl0gPSAiTXVza2V0Ig0KfQ0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpDQplbmQpDQoNCkd1blNob3A6YWRkQnV0dG9uKCJGbGludGxvY2sgWyAkMTAsNTAwIEJlbGkgXSIsIGZ1bmN0aW9uKCkNCmxvY2FsIGFyZ3MgPSB7DQogICAgWzFdID0gIkJ1eUl0ZW0iLA0KICAgIFsyXSA9ICJGbGludGxvY2siDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KR3VuU2hvcDphZGRCdXR0b24oIlJlZmluZWQgU2xpbmdzaG90IFsgJDMwLDAwMCBCZWxpIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCdXlJdGVtIiwNCiAgICBbMl0gPSAiUmVmaW5lZCBTbGluZ3Nob3QiDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KR3VuU2hvcDphZGRCdXR0b24oIlJlZmluZWQgRmxpbnRsb2NrIFsgJDY1LDAwMCBCZWxpIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCdXlJdGVtIiwNCiAgICBbMl0gPSAiUmVmaW5lZCBGbGludGxvY2siDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KR3VuU2hvcDphZGRCdXR0b24oIkthYnVjaGEgWyBmMSw1MDAgRnJhZ21lbnRzKSIsIGZ1bmN0aW9uKCkNCmdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlNsaW5nc2hvdCIsICIyIikNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBBY2Nlc3NvcmVpZXMgU2hvcA0KbG9jYWwgQWNjZXNzb3JpZXNTaG9wID0gU2hvcF9SaWdodDphZGRNZW51KCcjQWNjZXNzb3JpZXMnKQ0KQWNjZXNzb3JpZXNTaG9wOmFkZEJ1dHRvbigiQmxhY2sgQ2FwZSBbICQ1MCwwMDAgQmVsaSBdIixmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCdXlJdGVtIiwNCiAgICBbMl0gPSAiQmxhY2sgQ2FwZSINCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KZW5kKQ0KDQpBY2Nlc3Nvcmllc1Nob3A6YWRkQnV0dG9uKCJTd29yZHNtYW4gSGF0IFsgMTUwayBCZWxpIF0iLCBmdW5jdGlvbigpDQpsb2NhbCBhcmdzID0gew0KICAgIFsxXSA9ICJCdXlJdGVtIiwNCiAgICBbMl0gPSAiU3dvcmRzbWFuIEhhdCINCn0NCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KZW5kKQ0KDQpBY2Nlc3Nvcmllc1Nob3A6YWRkQnV0dG9uKCJUb21vZSBSaW5nIFsgJDUwMGsgQmVsaSBdIiwgZnVuY3Rpb24oKQ0KbG9jYWwgYXJncyA9IHsNCiAgICBbMV0gPSAiQnV5SXRlbSIsDQogICAgWzJdID0gIlRvbW9lIFJpbmciDQp9DQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBNSVNDIExFRlQNCmxvY2FsIE1pc2NfTGVmdCA9IFRhYi5UYWJfNzphZGRTZWN0aW9uKCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBNSVNDIFJJR0hUDQpsb2NhbCBNaXNjXzIgPSBNaXNjX0xlZnQ6YWRkTWVudSgnI01pc2MnKQ0KDQpNaXNjXzI6YWRkVG9nZ2xlKCdEb2RnZSBObyBDRCcsIERvZGdld2l0aG91dENvb2wsIGZ1bmN0aW9uKFZhbHVlKQ0KRG9kZ2V3aXRob3V0Q29vbCA9IFZhbHVlDQplbmQpDQpmdW5jdGlvbiBOb0Nvb2xkb3duKCkNCmZvciBpLHYgaW4gbmV4dCwgZ2V0Z2MoKSBkbw0KICAgIGlmIHR5cGVvZih2KSA9PSAiZnVuY3Rpb24iIHRoZW4NCiAgICAgICAgaWYgZ2V0ZmVudih2KS5zY3JpcHQgPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkRvZGdlIikgdGhlbg0KICAgICAgICAgICAgZm9yIGkyLHYyIGluIG5leHQsIGdldHVwdmFsdWVzKHYpIGRvDQogICAgICAgICAgICAgICAgaWYgdG9zdHJpbmcodjIpID09ICIwLjQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2V0dXB2YWx1ZSh2LGkyLDApDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZA0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgRG9kZ2V3aXRob3V0Q29vbCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIE5vQ29vbGRvd24oKQ0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCmVuZCkNCg0KTWlzY18yOmFkZFRvZ2dsZSgnSW5maW5pdGUgRW5lcmd5JywgSW5maW5pdGVBYmlsaXR5LCBmdW5jdGlvbihWYWx1ZSkNCkluZmluaXRlQWJpbGl0eSA9IFZhbHVlDQplbmQpDQpmdW5jdGlvbiBJbmZpbml0eUVuZXJneSgpDQpnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuRW5lcmd5LkNoYW5nZWQ6Y29ubmVjdChmdW5jdGlvbigpDQogICAgaWYgSW5maW5pdGVBYmlsaXR5IHRoZW4NCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkVuZXJneS5WYWx1ZSA9IGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5FbmVyZ3kuTWF4VmFsdWUNCiAgICBlbmQgDQplbmQpDQplbmQNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIEluZmluaXRlQWJpbGl0eSB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIEluZmluaXR5RW5lcmd5KCkNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk1pc2NfMjphZGRUb2dnbGUoJ0luZmluaXRlIEdlcHBvJywgSW5maW5pdGVHZXBwbywgZnVuY3Rpb24oVmFsdWUpDQpJbmZpbml0ZUdlcHBvID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgxKSBkbw0KICAgIGlmIEluZmluaXRlR2VwcG8gdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIG5leHQsIGdldGdjKCkgZG8NCiAgICAgICAgICAgICAgICBpZiBnZXRmZW52KHYpLnNjcmlwdCA9PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiR2VwcG8iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBpMix2MiBpbiBuZXh0LCBnZXR1cHZhbHVlcyh2KSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9zdHJpbmcodjIpID09ICIwIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IHdhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwdmFsdWUodixpMiwwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBJbmZpbml0ZUdlcHBvIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPD0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpNaXNjXzI6YWRkVG9nZ2xlKCdJbmZpbml0ZSBTb3J1JywgSW5maW5pdGVTb3J1LCBmdW5jdGlvbihWYWx1ZSkNCkluZmluaXRlU29ydSA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB0YXNrLndhaXQoMSkgZG8NCiAgICBpZiBJbmZpbml0ZVNvcnUgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIH49IG5pbCAgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIG5leHQsIGdldGdjKCkgZG8NCiAgICAgICAgICAgICAgICBpZiBnZXRmZW52KHYpLnNjcmlwdCA9PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiU29ydSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGkyLHYyIGluIHBhaXJzKGRlYnVnLmdldHVwdmFsdWVzKHYpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdHlwZSh2MikgPT0gJ3RhYmxlJyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjIuTGFzdFVzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB0YXNrLndhaXQoLjEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cHZhbHVlKHYsIGkyLCB7TGFzdEFmdGVyID0gMCxMYXN0VXNlID0gMH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBJbmZpbml0ZVNvcnUgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA8PSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCldhbGtPbldhdGVyID0gdHJ1ZQ0KTWlzY18yOmFkZFRvZ2dsZSgnV2FsayBvbiBXYXRlcicsIFdhbGtPbldhdGVyLCBmdW5jdGlvbihWYWx1ZSkNCldhbGtPbldhdGVyID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHRhc2sud2FpdCgpIGRvDQogICAgaWYgV2Fsa09uV2F0ZXIgdGhlbg0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiV2F0ZXJCYXNlLVBsYW5lIl0uU2l6ZSA9IFZlY3RvcjMubmV3KDEwMDAsMTEyLDEwMDApDQogICAgZWxzZQ0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiV2F0ZXJCYXNlLVBsYW5lIl0uU2l6ZSA9IFZlY3RvcjMubmV3KDEwMDAsODAsMTAwMCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpNaXNjXzI6YWRkVG9nZ2xlKCdSZW1vdmUgRm9nJywgX0cuUmVtb3ZlX0ZvZywgZnVuY3Rpb24oVmFsdWUpDQpfRy5SZW1vdmVfRm9nID0gVmFsdWUNCg0KaWYgbm90IF9HLlJlbW92ZV9Gb2cgdGhlbiByZXR1cm4gZW5kDQp3aGlsZSBfRy5SZW1vdmVfRm9nIGRvIHdhaXQoKQ0KICAgIGdhbWUuTGlnaHRpbmcuRm9nRW5kID0gOWU5DQogICAgaWYgbm90IF9HLlJlbW92ZV9Gb2cgdGhlbg0KICAgICAgICBnYW1lLkxpZ2h0aW5nLkZvZ0VuZCA9IDI1MDANCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpNaXNjXzI6YWRkVG9nZ2xlKCdXaGl0ZSBTY3JlZW4nLCBfRy5XaGl0ZV9TY3JlZW4sIGZ1bmN0aW9uKFZhbHVlKQ0KX0cuV2hpdGVfU2NyZWVuID0gVmFsdWUNCmlmIF9HLldoaXRlX1NjcmVlbiB0aGVuDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik6U2V0M2RSZW5kZXJpbmdFbmFibGVkKGZhbHNlKQ0KZWxzZQ0KICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpOlNldDNkUmVuZGVyaW5nRW5hYmxlZCh0cnVlKQ0KZW5kDQplbmQpDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmxvY2FsIE1pc2NfMSA9IE1pc2NfTGVmdDphZGRNZW51KCcjTWlzYycpDQoNCmxvY2FsIENvZGVMaXN0ID0gew0KIkVYUF81QiIsDQoiQ09OVFJPTCIsDQoiVVBEQVRFMTEiLA0KIlhNQVNFWFAiLA0KIjFCSUxMSU9OIiwNCiJTaHV0RG93bkZpeDIiLA0KIlVQRDE0IiwNCiJTVFJBV0hBVE1BSU5FIiwNCiJUYW50YWlHYW1pbmciLA0KIkNvbG9zc2V1bSIsDQoiQXhpb3JlIiwNCiJTdWIyRGFpZ3JvY2siLA0KIlNreSBJc2xhbmQgMyIsDQoiU3ViMk9mZmljaWFsTm9vYmllIiwNCiJTVUIyTk9PQk1BU1RFUjEyMyIsDQoiVEhFR1JFQVRBQ0UiLA0KIkZvdW50YWluIENpdHkiLA0KIkJJR05FV1MiLA0KIkZVREQxMCIsDQoiU1VCMkdBTUVSUk9CT1RfRVhQMSIsDQoiVVBEMTUiLA0KIjJCSUxMSU9OIiwNCiJVUEQxNiIsDQoiM0JWSVNJVFMiLA0KImZ1ZGQxMF92MiIsDQoiU3RhcmNvZGVoZW8iLA0KIk1hZ2ljYnVzIiwNCiJKQ1dLIiwNCiJCbHV4eHkiLA0KIlN1YjJGZXI5OTkiLA0KIkVueXVfaXNfUHJvIiwNCg0KIlNFQ1JFVF9BRE1JTiIsDQoiS0lUVF9SRVNFVCIsDQoiRFJBR09OQUJVU0UiLA0KIlN1YjJDYXB0YWluTWF1aSIsDQoiREVWU0NPT0tJTkciLA0KImtpdHRnYW1pbmciLA0KIlN1YjJGZXI5OTkiLA0KIkVueXVfaXNfUHJvIiwNCiJNYWdpY2J1cyIsDQoiSkNXSyIsDQoiU3RhcmNvZGVoZW8iLA0KIkJsdXh4eSIsDQoiZnVkZDEwX3YyIiwNCiJTVUIyR0FNRVJST0JPVF9FWFAxIiwNCiJTdWIyTm9vYk1hc3RlcjEyMyIsDQoiU3ViMlVuY2xlS2l6YXJ1IiwNCiJTdWIyRGFpZ3JvY2siLA0KIkF4aW9yZSIsDQoiVGFudGFpR2FtaW5nIiwNCiJTdHJhd0hhdE1haW5lIiwNCiJTdWIyT2ZmaWNpYWxOb29iaWUiLA0KIkZ1ZGQxMCIsDQoiQmlnbmV3cyIsDQoiVGhlR3JlYXRBY2UiDQp9DQpNaXNjXzE6YWRkQnV0dG9uKCdSZWRlZW0gWDIgQ29kZScsIGZ1bmN0aW9uKCkNCmZ1bmN0aW9uIFJlZGVlbUNvZGUodmFsdWUpDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuUmVkZWVtOkludm9rZVNlcnZlcih2YWx1ZSkNCmVuZA0KZm9yIGksdiBpbiBwYWlycyhDb2RlTGlzdCkgZG8NCiAgICBSZWRlZW1Db2RlKHYpDQplbmQNCmVuZCkNCg0KTWlzY18xOmFkZEJ1dHRvbigiSm9pbiBQaXJhdGVzIFRlYW0iLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTZXRUZWFtIiwiUGlyYXRlcyIpIA0KZW5kKQ0KDQpNaXNjXzE6YWRkQnV0dG9uKCJKb2luIE1hcmluZXMgVGVhbSIsIGZ1bmN0aW9uKCkNCmdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlNldFRlYW0iLCJNYXJpbmVzIikgDQplbmQpDQoNCk1pc2NfMTphZGRCdXR0b24oIkFsd2F5cyBEYXkiLCBmdW5jdGlvbigpDQp3aGlsZSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpIGRvDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpLkNsb2NrVGltZSA9IDEyDQplbmQNCmVuZCkNCg0KTWlzY18xOmFkZEJ1dHRvbigiUmVtb3ZlIExhdmUiLCBmdW5jdGlvbigpDQpmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgaWYgdi5OYW1lID09ICJMYXZhIiB0aGVuICAgDQogICAgICAgIHY6RGVzdHJveSgpDQogICAgZW5kDQplbmQNCmZvciBpLHYgaW4gcGFpcnMoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgIGlmIHYuTmFtZSA9PSAiTGF2YSIgdGhlbiAgIA0KICAgICAgICB2OkRlc3Ryb3koKQ0KICAgIGVuZA0KZW5kDQplbmQpDQoNCk1pc2NfMTphZGRCdXR0b24oIlRpdGxlIE5hbWUiLCBmdW5jdGlvbigpDQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJnZXRUaXRsZXMiKSANCmdhbWUuUGxheWVycy5sb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5UaXRsZXMuVmlzaWJsZSA9IHRydWUNCmVuZCkNCg0KTWlzY18xOmFkZEJ1dHRvbigiQ29sb3IgSGFraSIsIGZ1bmN0aW9uKCkNCmdhbWUuUGxheWVycy5sb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5Db2xvcnMuVmlzaWJsZSA9IHRydWUNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0vLyBNSVNDIFJJR0hUDQpsb2NhbCBNaXNjX1JpZ2h0ID0gVGFiLlRhYl83OmFkZFNlY3Rpb24oKQ0KbG9jYWwgRVNQX1NlY3Rpb24gPSBNaXNjX1JpZ2h0OmFkZE1lbnUoJyNFU1AnKQ0KRVNQX1NlY3Rpb246YWRkVG9nZ2xlKCdDaGVzdCBFU1AnLCBDaGVzdEVTUCwgZnVuY3Rpb24oVmFsdWUpDQpDaGVzdEVTUCA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgIGlmIENoZXN0RVNQIHRoZW4NCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkNoZXN0MSIgb3Igdi5OYW1lID09ICJDaGVzdDIiIG9yIHYuTmFtZSA9PSAiQ2hlc3QzIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCJDaGVzdEVTUCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIEJpbGxib2FyZEd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIFRleHRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlBhcmVudCA9IHYNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkFjdGl2ZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5OYW1lID0gIkNoZXN0RVNQIg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkFsd2F5c09uVG9wID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkxpZ2h0SW5mbHVlbmNlID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5QYXJlbnQgPSBCaWxsYm9hcmRHdWkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuRm9udFNpemUgPSAiU2l6ZTE0Ig0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIERpcyA9IG1hdGguZmxvb3IoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZSkNCiAgICAgICAgICAgICAgICAgICAgdi5DaGVzdEVTUC5UZXh0TGFiZWwuVGV4dCA9IHYuTmFtZS4uIlxuIi4uRGlzLi4iIE0uIg0KICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkNoZXN0MSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdjpGaW5kRmlyc3RDaGlsZCgiQ2hlc3RFU1AiKS5UZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwOSwgMTA5LCAxMDkpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIkNoZXN0MiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdjpGaW5kRmlyc3RDaGlsZCgiQ2hlc3RFU1AiKS5UZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE3MywgMTU4LCAyMSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHYuTmFtZSA9PSAiQ2hlc3QzIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB2OkZpbmRGaXJzdENoaWxkKCJDaGVzdEVTUCIpLlRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODUsIDI1NSwgMjU1KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJDaGVzdDEiIG9yIHYuTmFtZSA9PSAiQ2hlc3QyIiBvciB2Lk5hbWUgPT0gIkNoZXN0MyIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJDaGVzdEVTUCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2hlc3RFU1A6RGVzdHJveSgpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCkNCmVuZA0KZW5kKQ0KDQpFU1BfU2VjdGlvbjphZGRUb2dnbGUoJ0RldmlsIEZydWl0IEVTUCAoUmVkIENvbG9yKScsIF9HLkVTUERGLCBmdW5jdGlvbihWYWx1ZSkNCl9HLkVTUERGID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIF9HLkVTUERGIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJUb29sIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIYW5kbGUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KC4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiRGV2aWxGcnVpdEVTUCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgQmlsbGJvYXJkR3VpID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBUZXh0TGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlBhcmVudCA9IHYuSGFuZGxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuQWN0aXZlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuTmFtZSA9ICJEZXZpbEZydWl0RVNQIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuQWx3YXlzT25Ub3AgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5MaWdodEluZmx1ZW5jZSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuUGFyZW50ID0gQmlsbGJvYXJkR3VpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuRm9udFNpemUgPSAiU2l6ZTE0Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIERpcyA9IG1hdGguZmxvb3IoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IYW5kbGUuRGV2aWxGcnVpdEVTUC5UZXh0TGFiZWwuVGV4dCA9IHYuTmFtZS4uIlxuIi4uRGlzLi4iIE0uIg0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkVTUERGDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbHNlDQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHYuTmFtZSwgIkZydWl0IikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgdi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIkRldmlsRnJ1aXRFU1AiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB2LkhhbmRsZS5EZXZpbEZydWl0RVNQOkRlc3Ryb3koKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpFU1BfU2VjdGlvbjphZGRUb2dnbGUoJ0ZydWl0IEVTUCAoWWVsbG93IENvbG9yKScsIEZydWl0RVNQZSwgZnVuY3Rpb24oVmFsdWUpDQpGcnVpdEVTUGUgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgRnJ1aXRFU1BlIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZm9yIGEsYiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIGIuTmFtZSA9PSAnUGluZWFwcGxlU3Bhd25lcicgb3IgYi5OYW1lID09ICdCYW5hbmFTcGF3bmVyJyBvciBiLk5hbWUgPT0gJ0FwcGxlU3Bhd25lcicgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGI6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCdUb29sJykgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IHRhc2sud2FpdCguMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiRnJ1aXRFU1AiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgQmlsbGJvYXJkR3VpID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIFRleHRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5QYXJlbnQgPSB2LkhhbmRsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5BY3RpdmUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLk5hbWUgPSAiRnJ1aXRFU1AiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkFsd2F5c09uVG9wID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5MaWdodEluZmx1ZW5jZSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuUGFyZW50ID0gQmlsbGJvYXJkR3VpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5Gb250U2l6ZSA9ICJTaXplMTQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgRGlzID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSGFuZGxlLkZydWl0RVNQLlRleHRMYWJlbC5UZXh0ID0gdi5OYW1lLi4iXG4iLi5EaXMuLiIgTS4iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBGcnVpdEVTUGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZWxzZQ0KICAgICAgICBmb3IgYSxiIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICBpZiBiLk5hbWUgPT0gJ1BpbmVhcHBsZVNwYXduZXInIG9yIGIuTmFtZSA9PSAnQmFuYW5hU3Bhd25lcicgb3IgYi5OYW1lID09ICdBcHBsZVNwYXduZXInIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGI6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoJ1Rvb2wnKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIYW5kbGUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIkZydWl0RVNQIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhhbmRsZS5GcnVpdEVTUDpEZXN0cm95KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpFU1BfU2VjdGlvbjphZGRUb2dnbGUoJ0Zsb3dlciBFU1AnLCBGbG93ZXJFU1AsIGZ1bmN0aW9uKFZhbHVlKQ0KRmxvd2VyRVNQID0gVmFsdWUNCmVuZCkNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIEZsb3dlckVTUCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkZsb3dlcjIiIG9yIHYuTmFtZSA9PSAiRmxvd2VyMSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjpGaW5kRmlyc3RDaGlsZCgiRmluZEZsb3dlciIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIEJpbGxib2FyZEd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIFRleHRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCg0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlBhcmVudCA9IHYNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkFjdGl2ZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5OYW1lID0gIkZpbmRGbG93ZXIiDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuQWx3YXlzT25Ub3AgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuTGlnaHRJbmZsdWVuY2UgPSAxLjAwMA0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlBhcmVudCA9IEJpbGxib2FyZEd1aQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUwLCAyNTAsIDMwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnRTaXplID0gIlNpemUxNCINCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBEaXMgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUpDQogICAgICAgICAgICAgICAgICAgIHYuRmluZEZsb3dlci5UZXh0TGFiZWwuVGV4dCA9IHYuTmFtZS4uIiAtIFsiLi5EaXMuLiIgTV0iDQogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiRmxvd2VyMSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdi5GaW5kRmxvd2VyLlRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygyNTUsMTIwLDEyMCkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHYuTmFtZSA9PSAiRmxvd2VyMiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdi5GaW5kRmxvd2VyLlRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxMjAsMTIwLDI1NSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVsc2UNCiAgICAgICAgZm9yIGksdiBpbiBwYWlycyAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiRmluZEZsb3dlciIpIHRoZW4NCiAgICAgICAgICAgICAgICB2LkZpbmRGbG93ZXI6RGVzdHJveSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmVuZCkNCg0KRVNQX1NlY3Rpb246YWRkVG9nZ2xlKCdJc2xhbmQgRVNQJywgSXNsYW5kRVNQLCBmdW5jdGlvbihWYWx1ZSkNCklzbGFuZEVTUCA9IFZhbHVlDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQp3aGlsZSB3YWl0KCkgZG8NCiAgICBpZiBJc2xhbmRFU1AgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCJJc2xhbmRFc3AiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIEJpbGxib2FyZEd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgVGV4dExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KDQogICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5QYXJlbnQgPSB2DQogICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuQWN0aXZlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuTmFtZSA9ICJJc2xhbmRFc3AiDQogICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5BbHdheXNPblRvcCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLkxpZ2h0SW5mbHVlbmNlID0gMS4wMDANCiAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkNCiAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKQ0KDQogICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5QYXJlbnQgPSBCaWxsYm9hcmRHdWkNCiAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApDQogICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQNCiAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnRTaXplID0gIlNpemUxNCINCiAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBsb2NhbCBEaXMgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAxMCkNCiAgICAgICAgICAgICAgICB2LklzbGFuZEVzcC5UZXh0TGFiZWwuVGV4dCA9IHYuTmFtZS4uIlxuIi4uIlsiLi5EaXMuLiJdIg0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbHNlDQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kRXNwIikgdGhlbg0KICAgICAgICAgICAgICAgIHYuSXNsYW5kRXNwOkRlc3Ryb3koKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQpDQoNCkVTUF9TZWN0aW9uOmFkZFRvZ2dsZSgnTnBjIEVTUCcsIE5wY0VTUCwgZnVuY3Rpb24oVmFsdWUpDQpOcGNFU1AgPSBWYWx1ZQ0KZW5kKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2hpbGUgd2FpdCgpIGRvDQogICAgaWYgTnBjRVNQIHRoZW4NCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjpGaW5kRmlyc3RDaGlsZCgiTnBjRXNwZXMiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBCaWxsYm9hcmRHdWkgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBUZXh0TGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5QYXJlbnQgPSB2DQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5BY3RpdmUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuTmFtZSA9ICJOcGNFc3BlcyINCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5BbHdheXNPblRvcCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIEJpbGxib2FyZEd1aS5MaWdodEluZmx1ZW5jZSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgICAgICBCaWxsYm9hcmRHdWkuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgQmlsbGJvYXJkR3VpLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuUGFyZW50ID0gQmlsbGJvYXJkR3VpDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZA0KICAgICAgICAgICAgICAgICAgICAgICAgVGV4dExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRMYWJlbC5Gb250U2l6ZSA9ICJTaXplMTQiDQogICAgICAgICAgICAgICAgICAgICAgICBUZXh0TGFiZWwuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgRGlzID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUpDQogICAgICAgICAgICAgICAgICAgIHYuTnBjRXNwZXMuVGV4dExhYmVsLlRleHQgPSB2Lk5hbWUuLiIgLSBbIi4uRGlzLi4iIE1dIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbHNlDQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiTnBjRXNwZXMiKSB0aGVuDQogICAgICAgICAgICAgICAgdi5OcGNFc3BlczpEZXN0cm95KCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQpFU1BfU2VjdGlvbjphZGRUb2dnbGUoJ0xlZ2VuZCBTd29yZCBEZWFsZXIgRVNQJywgTEFERVNQLCBmdW5jdGlvbihWYWx1ZSkNCkxBREVTUCA9IFZhbHVlDQplbmQpDQpmdW5jdGlvbiBVcGRhdGVMU0RFU1AoKSANCmZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvDQogICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICBpZiBMQURFU1AgdGhlbiANCiAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiTGVnZW5kYXJ5IFN3b3JkIERlYWxlciIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJykgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBiaWxsID0gSW5zdGFuY2UubmV3KCdCaWxsYm9hcmRHdWknLHYpDQogICAgICAgICAgICAgICAgICAgIGJpbGwuTmFtZSA9ICdOYW1lRXNwJw0KICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQ0KICAgICAgICAgICAgICAgICAgICBiaWxsLlNpemUgPSBVRGltMi5uZXcoMSwyMDAsMSwzMCkNCiAgICAgICAgICAgICAgICAgICAgYmlsbC5BZG9ybmVlID0gdg0KICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBuYW1lID0gSW5zdGFuY2UubmV3KCdUZXh0TGFiZWwnLGJpbGwpDQogICAgICAgICAgICAgICAgICAgIG5hbWUuRm9udCA9ICJDb2RlIg0KICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCINCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0V3JhcHBlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbmFtZS5TaXplID0gVURpbTIubmV3KDEsMCwxLDApDQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJw0KICAgICAgICAgICAgICAgICAgICBuYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQ0KICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICB2WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSAodi5OYW1lIC4uJyAgIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgTScpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcpIHRoZW4NCiAgICAgICAgICAgICAgICB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJyk6RGVzdHJveSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQplbmQNCnNwYXduKGZ1bmN0aW9uKCkNCndoaWxlIHdhaXQoKSBkbw0KICAgIGlmIExBREVTUCB0aGVuDQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIFVwZGF0ZUxTREVTUCgpDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KZW5kKQ0KDQotLSAyNW1zIHdhcyBoZXJlIDozDQogICAgZWxzZQ0KICAgICAgIHByaW50KCJLZXkgaXMgaW52YWxpZCIpDQogICAgZW5kDQplbmQNCg0KY2hlY2soKQ0KDQpsb2NhbCBDaGVja2tleSA9IFRhYnMuS2V5U3lzOkFkZEJ1dHRvbih7DQogICAgVGl0bGUgPSAiQ2hlY2sgS2V5IiwNCiAgICBEZXNjcmlwdGlvbiA9ICJFbnRlciBLZXkgYmVmb3JlIHByZXNzaW5nIHRoaXMgYnV0dG9uIiwNCiAgICBDYWxsYmFjayA9IGNoZWNrDQp9KQ0KDQpsb2NhbCBHZXRrZXkgPSBUYWJzLktleVN5czpBZGRCdXR0b24oew0KICAgIFRpdGxlID0gIkdldCBLZXkiLA0KICAgIERlc2NyaXB0aW9uID0gIkdldCBLZXkgaGVyZSIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgc2V0Y2xpcGJvYXJkKEtleUd1YXJkTGlicmFyeS5nZXRMaW5rKCkpDQogICAgZW5kDQp9KQ0KDQpXaW5kb3c6U2VsZWN0VGFiKDEpDQo=", getfenv();b["\108\111\97\100\115\116\114\105\110\103"](b["\98\97\115\101\54\52\95\100\101\99\111\100\101"](a))()
